     1	[37m// A few random snippets of HLSL shader code I gathered...[39;49;00m[37m[39;49;00m
     2	[37m[39;49;00m
     3	[[90mnumthreads[39;49;00m([34m256[39;49;00m,[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00m[34m1[39;49;00m)][37m[39;49;00m
     4	[36mvoid[39;49;00m[37m [39;49;00mcs_main([36muint3[39;49;00m[37m [39;49;00mthreadId[37m [39;49;00m:[37m [39;49;00m[90mSV_DispatchThreadID[39;49;00m)[37m[39;49;00m
     5	{[37m[39;49;00m
     6	[37m	[39;49;00m[37m// Seed the PRNG using the thread ID[39;49;00m[37m[39;49;00m
     7	[37m	[39;49;00mrng_state[37m [39;49;00m=[37m [39;49;00mthreadId.x;[37m[39;49;00m
     8	[37m[39;49;00m
     9	[37m	[39;49;00m[37m// Generate a few numbers...[39;49;00m[37m[39;49;00m
    10	[37m	[39;49;00m[36muint[39;49;00m[37m [39;49;00mr0[37m [39;49;00m=[37m [39;49;00mrand_xorshift();[37m[39;49;00m
    11	[37m	[39;49;00m[36muint[39;49;00m[37m [39;49;00mr1[37m [39;49;00m=[37m [39;49;00mrand_xorshift();[37m[39;49;00m
    12	[37m	[39;49;00m[37m// Do some stuff with them...[39;49;00m[37m[39;49;00m
    13	[37m[39;49;00m
    14	[37m	[39;49;00m[37m// Generate a random float in [0, 1)...[39;49;00m[37m[39;49;00m
    15	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mf0[37m [39;49;00m=[37m [39;49;00m[36mfloat[39;49;00m(rand_xorshift())[37m [39;49;00m*[37m [39;49;00m([34m1.0[39;49;00m[37m [39;49;00m/[37m [39;49;00m[34m4294967296.0[39;49;00m);[37m[39;49;00m
    16	[37m[39;49;00m
    17	[37m	[39;49;00m[37m// ...etc.[39;49;00m[37m[39;49;00m
    18	}[37m[39;49;00m
    19	[37m[39;49;00m
    20	[37m// Constant buffer of parameters[39;49;00m[37m[39;49;00m
    21	[34mcbuffer[39;49;00m[37m [39;49;00mIntegratorParams[37m [39;49;00m:[37m [39;49;00m[34mregister[39;49;00m(b0)[37m[39;49;00m
    22	{[37m[39;49;00m
    23	[37m	[39;49;00m[36mfloat2[39;49;00m[37m [39;49;00mspecPow;[37m		[39;49;00m[37m// Spec powers in XY directions (equal for isotropic BRDFs)[39;49;00m[37m[39;49;00m
    24	[37m	[39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mL;[37m			[39;49;00m[37m// Unit vector toward light [39;49;00m[37m[39;49;00m
    25	[37m	[39;49;00m[36mint2[39;49;00m[37m [39;49;00mcThread;[37m		[39;49;00m[37m// Total threads launched in XY dimensions[39;49;00m[37m[39;49;00m
    26	[37m	[39;49;00m[36mint2[39;49;00m[37m [39;49;00mxyOutput;[37m		[39;49;00m[37m// Where in the output buffer to store the result[39;49;00m[37m[39;49;00m
    27	}[37m[39;49;00m
    28	[37m[39;49;00m
    29	[34mstatic[39;49;00m[37m [39;49;00m[34mconst[39;49;00m[37m [39;49;00m[36mfloat[39;49;00m[37m [39;49;00mpi[37m [39;49;00m=[37m [39;49;00m[34m3.141592654[39;49;00m;[37m[39;49;00m
    30	[37m[39;49;00m
    31	[36mfloat[39;49;00m[37m [39;49;00mAshikhminShirleyNDF([36mfloat3[39;49;00m[37m [39;49;00mH)[37m[39;49;00m
    32	{[37m[39;49;00m
    33	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mnormFactor[37m [39;49;00m=[37m [39;49;00m[36msqrt[39;49;00m((specPow.x[37m [39;49;00m+[37m [39;49;00m[34m2.0f[39;49;00m)[37m [39;49;00m*[37m [39;49;00m(specPow.y[37m [39;49;00m+[37m [39;49;00m[34m2.0[39;49;00m))[37m [39;49;00m*[37m [39;49;00m([34m0.5f[39;49;00m[37m [39;49;00m/[37m [39;49;00mpi);[37m[39;49;00m
    34	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mNdotH[37m [39;49;00m=[37m [39;49;00mH.z;[37m[39;49;00m
    35	[37m	[39;49;00m[36mfloat2[39;49;00m[37m [39;49;00mHxy[37m [39;49;00m=[37m [39;49;00m[36mnormalize[39;49;00m(H.xy);[37m[39;49;00m
    36	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mnormFactor[37m [39;49;00m*[37m [39;49;00m[36mpow[39;49;00m(NdotH,[37m [39;49;00m[36mdot[39;49;00m(specPow,[37m [39;49;00mHxy[37m [39;49;00m*[37m [39;49;00mHxy));[37m[39;49;00m
    37	}[37m[39;49;00m
    38	[37m[39;49;00m
    39	[36mfloat[39;49;00m[37m [39;49;00mBeckmannNDF([36mfloat3[39;49;00m[37m [39;49;00mH)[37m[39;49;00m
    40	{[37m[39;49;00m
    41	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mglossFactor[37m [39;49;00m=[37m [39;49;00mspecPow.x[37m [39;49;00m*[37m [39;49;00m[34m0.5f[39;49;00m[37m [39;49;00m+[37m [39;49;00m[34m1.0f[39;49;00m;[37m	[39;49;00m[37m// This is 1/m^2 in the usual Beckmann formula[39;49;00m[37m[39;49;00m
    42	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mnormFactor[37m [39;49;00m=[37m [39;49;00mglossFactor[37m [39;49;00m*[37m [39;49;00m([34m1.0f[39;49;00m[37m [39;49;00m/[37m [39;49;00mpi);[37m[39;49;00m
    43	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mNdotHSq[37m [39;49;00m=[37m [39;49;00mH.z[37m [39;49;00m*[37m [39;49;00mH.z;[37m[39;49;00m
    44	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mnormFactor[37m [39;49;00m/[37m [39;49;00m(NdotHSq[37m [39;49;00m*[37m [39;49;00mNdotHSq)[37m [39;49;00m*[37m [39;49;00m[36mexp[39;49;00m(glossFactor[37m [39;49;00m*[37m [39;49;00m([34m1.0f[39;49;00m[37m [39;49;00m-[37m [39;49;00m[34m1.0f[39;49;00m[37m [39;49;00m/[37m [39;49;00mNdotHSq));[37m[39;49;00m
    45	}[37m[39;49;00m
    46	[37m[39;49;00m
    47	[37m// Output buffer for compute shader (actually float, but must be declared as uint[39;49;00m[37m[39;49;00m
    48	[37m// for atomic operations to work)[39;49;00m[37m[39;49;00m
    49	[34mgloballycoherent[39;49;00m[37m [39;49;00m[36mRWTexture2D[39;49;00m<[36muint[39;49;00m>[37m [39;49;00mo_data[37m [39;49;00m:[37m [39;49;00m[34mregister[39;49;00m(u0);[37m[39;49;00m
    50	[37m[39;49;00m
    51	[37m// Sum up the outputs of all threads and store to the output location[39;49;00m[37m[39;49;00m
    52	[34mstatic[39;49;00m[37m [39;49;00m[34mconst[39;49;00m[37m [39;49;00m[36muint[39;49;00m[37m [39;49;00mthreadGroupSize2D[37m [39;49;00m=[37m [39;49;00m[34m16[39;49;00m;[37m[39;49;00m
    53	[34mstatic[39;49;00m[37m [39;49;00m[34mconst[39;49;00m[37m [39;49;00m[36muint[39;49;00m[37m [39;49;00mthreadGroupSize1D[37m [39;49;00m=[37m [39;49;00mthreadGroupSize2D[37m [39;49;00m*[37m [39;49;00mthreadGroupSize2D;[37m[39;49;00m
    54	[34mgroupshared[39;49;00m[37m [39;49;00m[36mfloat[39;49;00m[37m [39;49;00mg_partialSums[threadGroupSize1D];[37m[39;49;00m
    55	[36mvoid[39;49;00m[37m [39;49;00mSumAcrossThreadsAndStore([36mfloat[39;49;00m[37m [39;49;00mvalue,[37m [39;49;00m[36muint[39;49;00m[37m [39;49;00miThreadInGroup)[37m[39;49;00m
    56	{[37m[39;49;00m
    57	[37m	[39;49;00m[37m// First reduce within the threadgroup: partial sums of 2, 4, 8... elements[39;49;00m[37m[39;49;00m
    58	[37m	[39;49;00m[37m// are calculated by 1/2, 1/4, 1/8... of the threads, always keeping the[39;49;00m[37m[39;49;00m
    59	[37m	[39;49;00m[37m// active threads at the front of the group to minimize divergence.[39;49;00m[37m[39;49;00m
    60	[37m[39;49;00m
    61	[37m	[39;49;00m[37m// NOTE: there are faster ways of doing this...but this is simple to code[39;49;00m[37m[39;49;00m
    62	[37m	[39;49;00m[37m// and good enough.[39;49;00m[37m[39;49;00m
    63	[37m[39;49;00m
    64	[37m	[39;49;00mg_partialSums[iThreadInGroup][37m [39;49;00m=[37m [39;49;00mvalue;[37m[39;49;00m
    65	[37m	[39;49;00m[36mGroupMemoryBarrierWithGroupSync[39;49;00m();[37m[39;49;00m
    66	[37m[39;49;00m
    67	[37m	[39;49;00m[[90munroll[39;49;00m][37m [39;49;00m[34mfor[39;49;00m[37m [39;49;00m([36muint[39;49;00m[37m [39;49;00mi[37m [39;49;00m=[37m [39;49;00mthreadGroupSize1D[37m [39;49;00m/[37m [39;49;00m[34m2[39;49;00m;[37m [39;49;00mi[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00mi[37m [39;49;00m/=[37m [39;49;00m[34m2[39;49;00m)[37m[39;49;00m
    68	[37m	[39;49;00m{[37m[39;49;00m
    69	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(iThreadInGroup[37m [39;49;00m<[37m [39;49;00mi)[37m[39;49;00m
    70	[37m		[39;49;00m{[37m[39;49;00m
    71	[37m			[39;49;00mg_partialSums[iThreadInGroup][37m [39;49;00m+=[37m [39;49;00mg_partialSums[iThreadInGroup[37m [39;49;00m+[37m [39;49;00mi];[37m[39;49;00m
    72	[37m		[39;49;00m}[37m[39;49;00m
    73	[37m		[39;49;00m[36mGroupMemoryBarrierWithGroupSync[39;49;00m();[37m[39;49;00m
    74	[37m	[39;49;00m}[37m[39;49;00m
    75	[37m[39;49;00m
    76	[37m	[39;49;00m[37m// Then reduce across threadgroups: one thread from each group adds the group[39;49;00m[37m[39;49;00m
    77	[37m	[39;49;00m[37m// total to the final output location, using a software transactional memory[39;49;00m[37m[39;49;00m
    78	[37m	[39;49;00m[37m// style since D3D11 doesn't support atomic add on floats.[39;49;00m[37m[39;49;00m
    79	[37m	[39;49;00m[37m// (Assumes the output value has been cleared to zero beforehand.)[39;49;00m[37m[39;49;00m
    80	[37m[39;49;00m
    81	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(iThreadInGroup[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m[39;49;00m
    82	[37m	[39;49;00m{[37m[39;49;00m
    83	[37m		[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mthreadGroupSum[37m [39;49;00m=[37m [39;49;00mg_partialSums[[34m0[39;49;00m];[37m[39;49;00m
    84	[37m		[39;49;00m[36muint[39;49;00m[37m [39;49;00moutputValueRead[37m [39;49;00m=[37m [39;49;00mo_data[xyOutput];[37m[39;49;00m
    85	[37m		[39;49;00m[34mwhile[39;49;00m[37m [39;49;00m([34mtrue[39;49;00m)[37m[39;49;00m
    86	[37m		[39;49;00m{[37m[39;49;00m
    87	[37m			[39;49;00m[36muint[39;49;00m[37m [39;49;00mnewOutputValue[37m [39;49;00m=[37m [39;49;00m[36masuint[39;49;00m([36masfloat[39;49;00m(outputValueRead)[37m [39;49;00m+[37m [39;49;00mthreadGroupSum);[37m[39;49;00m
    88	[37m			[39;49;00m[36muint[39;49;00m[37m [39;49;00mpreviousOutputValue;[37m[39;49;00m
    89	[37m			[39;49;00m[36mInterlockedCompareExchange[39;49;00m([37m[39;49;00m
    90	[37m				[39;49;00mo_data[xyOutput],[37m [39;49;00moutputValueRead,[37m [39;49;00mnewOutputValue,[37m [39;49;00mpreviousOutputValue);[37m[39;49;00m
    91	[37m			[39;49;00m[34mif[39;49;00m[37m [39;49;00m(previousOutputValue[37m [39;49;00m==[37m [39;49;00moutputValueRead)[37m[39;49;00m
    92	[37m				[39;49;00m[34mbreak[39;49;00m;[37m[39;49;00m
    93	[37m			[39;49;00moutputValueRead[37m [39;49;00m=[37m [39;49;00mpreviousOutputValue;[37m[39;49;00m
    94	[37m		[39;49;00m}[37m[39;49;00m
    95	[37m	[39;49;00m}[37m[39;49;00m
    96	}[37m[39;49;00m
    97	[37m[39;49;00m
    98	[36mvoid[39;49;00m[37m [39;49;00mmain([37m[39;49;00m
    99	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00mVertex[37m [39;49;00mi_vtx,[37m[39;49;00m
   100	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00mVertex[37m [39;49;00mo_vtx,[37m[39;49;00m
   101	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mo_vecCamera[37m [39;49;00m:[37m [39;49;00mCAMERA,[37m[39;49;00m
   102	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00m[36mfloat4[39;49;00m[37m [39;49;00mo_uvzwShadow[37m [39;49;00m:[37m [39;49;00mUVZW_SHADOW,[37m[39;49;00m
   103	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00m[36mfloat4[39;49;00m[37m [39;49;00mo_posClip[37m [39;49;00m:[37m [39;49;00m[90mSV_Position[39;49;00m)[37m[39;49;00m
   104	{[37m[39;49;00m
   105	[37m	[39;49;00mo_vtx[37m [39;49;00m=[37m [39;49;00mi_vtx;[37m[39;49;00m
   106	[37m	[39;49;00mo_vecCamera[37m [39;49;00m=[37m [39;49;00mg_posCamera[37m [39;49;00m-[37m [39;49;00mi_vtx.m_pos;[37m[39;49;00m
   107	[37m	[39;49;00mo_uvzwShadow[37m [39;49;00m=[37m [39;49;00m[36mmul[39;49;00m([36mfloat4[39;49;00m(i_vtx.m_pos,[37m [39;49;00m[34m1.0[39;49;00m),[37m [39;49;00mg_matWorldToUvzwShadow);[37m[39;49;00m
   108	[37m	[39;49;00mo_posClip[37m [39;49;00m=[37m [39;49;00m[36mmul[39;49;00m([36mfloat4[39;49;00m(i_vtx.m_pos,[37m [39;49;00m[34m1.0[39;49;00m),[37m [39;49;00mg_matWorldToClip);[37m[39;49;00m
   109	}[37m[39;49;00m
   110	[37m[39;49;00m
   111	[36m#pragma pack_matrix(row_major)[39;49;00m[37m[39;49;00m
   112	[37m[39;49;00m
   113	[34mstruct[39;49;00m[37m [39;49;00mVertex[37m[39;49;00m
   114	{[37m[39;49;00m
   115	[37m	[39;49;00m[36mfloat3[39;49;00m[37m		[39;49;00mm_pos[37m		[39;49;00m:[37m [39;49;00mPOSITION;[37m[39;49;00m
   116	[37m	[39;49;00m[36mfloat3[39;49;00m[37m		[39;49;00mm_normal[37m	[39;49;00m:[37m [39;49;00mNORMAL;[37m[39;49;00m
   117	[37m	[39;49;00m[36mfloat2[39;49;00m[37m		[39;49;00mm_uv[37m		[39;49;00m:[37m [39;49;00mUV;[37m[39;49;00m
   118	};[37m[39;49;00m
   119	[37m[39;49;00m
   120	[34mcbuffer[39;49;00m[37m [39;49;00mCBFrame[37m [39;49;00m:[37m [39;49;00mCB_FRAME[37m					[39;49;00m[37m// matches struct CBFrame in test.cpp[39;49;00m[37m[39;49;00m
   121	{[37m[39;49;00m
   122	[37m	[39;49;00m[36mfloat4x4[39;49;00m[37m	[39;49;00mg_matWorldToClip;[37m[39;49;00m
   123	[37m	[39;49;00m[36mfloat4x4[39;49;00m[37m	[39;49;00mg_matWorldToUvzwShadow;[37m[39;49;00m
   124	[37m	[39;49;00m[36mfloat3x3[39;49;00m[37m	[39;49;00mg_matWorldToUvzShadowNormal;[37m[39;49;00m
   125	[37m	[39;49;00m[36mfloat3[39;49;00m[37m		[39;49;00mg_posCamera;[37m[39;49;00m
   126	[37m[39;49;00m
   127	[37m	[39;49;00m[36mfloat3[39;49;00m[37m		[39;49;00mg_vecDirectionalLight;[37m[39;49;00m
   128	[37m	[39;49;00m[36mfloat3[39;49;00m[37m		[39;49;00mg_rgbDirectionalLight;[37m[39;49;00m
   129	[37m[39;49;00m
   130	[37m	[39;49;00m[36mfloat2[39;49;00m[37m		[39;49;00mg_dimsShadowMap;[37m[39;49;00m
   131	[37m	[39;49;00m[36mfloat[39;49;00m[37m		[39;49;00mg_normalOffsetShadow;[37m[39;49;00m
   132	[37m	[39;49;00m[36mfloat[39;49;00m[37m		[39;49;00mg_shadowSharpening;[37m[39;49;00m
   133	[37m[39;49;00m
   134	[37m	[39;49;00m[36mfloat[39;49;00m[37m		[39;49;00mg_exposure;[37m					[39;49;00m[37m// Exposure multiplier[39;49;00m[37m[39;49;00m
   135	}[37m[39;49;00m
   136	[37m[39;49;00m
   137	[36mTexture2D[39;49;00m<[36mfloat3[39;49;00m>[37m [39;49;00mg_texDiffuse[37m [39;49;00m:[37m [39;49;00m[34mregister[39;49;00m(t0);[37m[39;49;00m
   138	[36mSamplerState[39;49;00m[37m [39;49;00mg_ss[37m [39;49;00m:[37m [39;49;00m[34mregister[39;49;00m(s0);[37m[39;49;00m
   139	[37m[39;49;00m
   140	[36mvoid[39;49;00m[37m [39;49;00mmain([37m[39;49;00m
   141	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00mVertex[37m [39;49;00mi_vtx,[37m[39;49;00m
   142	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mi_vecCamera[37m [39;49;00m:[37m [39;49;00mCAMERA,[37m[39;49;00m
   143	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mfloat4[39;49;00m[37m [39;49;00mi_uvzwShadow[37m [39;49;00m:[37m [39;49;00mUVZW_SHADOW,[37m[39;49;00m
   144	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mo_rgb[37m [39;49;00m:[37m [39;49;00m[90mSV_Target[39;49;00m)[37m[39;49;00m
   145	{[37m[39;49;00m
   146	[37m	[39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mnormal[37m [39;49;00m=[37m [39;49;00m[36mnormalize[39;49;00m(i_vtx.m_normal);[37m[39;49;00m
   147	[37m[39;49;00m
   148	[37m	[39;49;00m[37m// Sample shadow map[39;49;00m[37m[39;49;00m
   149	[37m	[39;49;00m[36mfloat[39;49;00m[37m [39;49;00mshadow[37m [39;49;00m=[37m [39;49;00mEvaluateShadow(i_uvzwShadow,[37m [39;49;00mnormal);[37m[39;49;00m
   150	[37m[39;49;00m
   151	[37m	[39;49;00m[37m// Evaluate diffuse lighting[39;49;00m[37m[39;49;00m
   152	[37m	[39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mdiffuseColor[37m [39;49;00m=[37m [39;49;00mg_texDiffuse.Sample(g_ss,[37m [39;49;00mi_vtx.m_uv);[37m[39;49;00m
   153	[37m	[39;49;00m[36mfloat3[39;49;00m[37m [39;49;00mdiffuseLight[37m [39;49;00m=[37m [39;49;00mg_rgbDirectionalLight[37m [39;49;00m*[37m [39;49;00m(shadow[37m [39;49;00m*[37m [39;49;00m[36msaturate[39;49;00m([36mdot[39;49;00m(normal,[37m [39;49;00mg_vecDirectionalLight)));[37m[39;49;00m
   154	[37m	[39;49;00mdiffuseLight[37m [39;49;00m+=[37m [39;49;00mSimpleAmbient(normal);[37m[39;49;00m
   155	[37m[39;49;00m
   156	[37m	[39;49;00mo_rgb[37m [39;49;00m=[37m [39;49;00mdiffuseColor[37m [39;49;00m*[37m [39;49;00mdiffuseLight;[37m[39;49;00m
   157	}[37m[39;49;00m
   158	[37m[39;49;00m
   159	[[90mdomain[39;49;00m([33m"[39;49;00m[33mquad[39;49;00m[33m"[39;49;00m)][37m[39;49;00m
   160	[36mvoid[39;49;00m[37m [39;49;00mds([37m[39;49;00m
   161	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mfloat[39;49;00m[37m [39;49;00medgeFactors[[34m4[39;49;00m][37m [39;49;00m:[37m [39;49;00m[90mSV_TessFactor[39;49;00m,[37m[39;49;00m
   162	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mfloat[39;49;00m[37m [39;49;00minsideFactors[[34m2[39;49;00m][37m [39;49;00m:[37m [39;49;00m[90mSV_InsideTessFactor[39;49;00m,[37m[39;49;00m
   163	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mOutputPatch[39;49;00m<VData,[37m [39;49;00m[34m4[39;49;00m>[37m [39;49;00minp,[37m[39;49;00m
   164	[37m	[39;49;00m[34min[39;49;00m[37m [39;49;00m[36mfloat2[39;49;00m[37m [39;49;00muv[37m [39;49;00m:[37m [39;49;00m[90mSV_DomainLocation[39;49;00m,[37m[39;49;00m
   165	[37m	[39;49;00m[34mout[39;49;00m[37m [39;49;00m[36mfloat4[39;49;00m[37m [39;49;00mo_pos[37m [39;49;00m:[37m [39;49;00m[90mSV_Position[39;49;00m)[37m[39;49;00m
   166	{[37m[39;49;00m
   167	[37m	[39;49;00mo_pos[37m [39;49;00m=[37m [39;49;00m[36mlerp[39;49;00m([36mlerp[39;49;00m(inp[[34m0[39;49;00m].pos,[37m [39;49;00minp[[34m1[39;49;00m].pos,[37m [39;49;00muv.x),[37m [39;49;00m[36mlerp[39;49;00m(inp[[34m2[39;49;00m].pos,[37m [39;49;00minp[[34m3[39;49;00m].pos,[37m [39;49;00muv.x),[37m [39;49;00muv.y);[37m[39;49;00m
   168	}
