     1	[34mimport[39;49;00m[37m [39;49;00m[04m[32mMath.Vector3[39;49;00m[37m [39;49;00m[32m(..)[39;49;00m[37m[39;49;00m
     2	[34mimport[39;49;00m[37m [39;49;00m[04m[32mMath.Matrix4[39;49;00m[37m [39;49;00m[32m(..)[39;49;00m[37m[39;49;00m
     3	[34mimport[39;49;00m[37m [39;49;00m[04m[32mGraphics.WebGL[39;49;00m[37m [39;49;00m[32m(..)[39;49;00m[37m[39;49;00m
     4	[37m[39;49;00m
     5	[37m-- Create a mesh with two triangles[39;49;00m[37m[39;49;00m
     6	[37m[39;49;00m
     7	[34mtype[39;49;00m[37m [39;49;00m[36mVertex[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m [39;49;00m{[37m [39;49;00m[31mposition[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m,[37m [39;49;00m[31mcolor[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m[37m [39;49;00m}[37m[39;49;00m
     8	[37m[39;49;00m
     9	[31mmesh[39;49;00m[37m [39;49;00m[32m:[39;49;00m[37m [39;49;00m[[36mTriangle[39;49;00m[37m [39;49;00m[36mVertex[39;49;00m][37m[39;49;00m
    10	[31mmesh[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m [39;49;00m[[37m [39;49;00m([37m [39;49;00m[36mVertex[39;49;00m[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m  [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m[39;49;00m
    11	[37m         [39;49;00m,[37m [39;49;00m[36mVertex[39;49;00m[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m  [39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m[39;49;00m
    12	[37m         [39;49;00m,[37m [39;49;00m[36mVertex[39;49;00m[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m[32m-[39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m1[39;49;00m)[37m[39;49;00m
    13	[37m         [39;49;00m)[37m[39;49;00m
    14	[37m       [39;49;00m][37m[39;49;00m
    15	[37m[39;49;00m
    16	[37m-- Create the scene[39;49;00m[37m[39;49;00m
    17	[37m[39;49;00m
    18	[34mmain [39;49;00m[32m:[39;49;00m[37m [39;49;00m[36mSignal[39;49;00m[37m [39;49;00m[36mElement[39;49;00m[37m[39;49;00m
    19	[34mmain [39;49;00m[32m=[39;49;00m[37m [39;49;00m[31mscene[39;49;00m[37m [39;49;00m[32m<~[39;49;00m[37m [39;49;00m[31mfoldp[39;49;00m[37m [39;49;00m[32m(+)[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m([31mfps[39;49;00m[37m [39;49;00m[34m30[39;49;00m)[37m[39;49;00m
    20	[37m[39;49;00m
    21	[31mscene[39;49;00m[37m [39;49;00m[32m:[39;49;00m[37m [39;49;00m[36mFloat[39;49;00m[37m [39;49;00m[32m->[39;49;00m[37m [39;49;00m[36mElement[39;49;00m[37m[39;49;00m
    22	[31mscene[39;49;00m[37m [39;49;00m[31mt[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m[39;49;00m
    23	[37m    [39;49;00m[31mwebgl[39;49;00m[37m [39;49;00m([34m400[39;49;00m,[34m400[39;49;00m)[37m[39;49;00m
    24	[37m    [39;49;00m[[37m [39;49;00m[31mentity[39;49;00m[37m [39;49;00m[31mvertexShader[39;49;00m[37m [39;49;00m[31mfragmentShader[39;49;00m[37m [39;49;00m[31mmesh[39;49;00m[37m [39;49;00m{[37m [39;49;00m[31mview[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m [39;49;00m[31mview[39;49;00m[37m [39;49;00m([31mt[39;49;00m[37m [39;49;00m[32m/[39;49;00m[37m [39;49;00m[34m1000[39;49;00m)[37m [39;49;00m}[37m [39;49;00m][37m[39;49;00m
    25	[37m[39;49;00m
    26	[31mview[39;49;00m[37m [39;49;00m[32m:[39;49;00m[37m [39;49;00m[36mFloat[39;49;00m[37m [39;49;00m[32m->[39;49;00m[37m [39;49;00m[36mMat4[39;49;00m[37m[39;49;00m
    27	[31mview[39;49;00m[37m [39;49;00m[31mt[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m[39;49;00m
    28	[37m    [39;49;00m[31mmul[39;49;00m[37m [39;49;00m([31mmakePerspective[39;49;00m[37m [39;49;00m[34m45[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0.[39;49;00m[34m01[39;49;00m[37m [39;49;00m[34m100[39;49;00m)[37m[39;49;00m
    29	[37m        [39;49;00m([31mmakeLookAt[39;49;00m[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m([34m4[39;49;00m[37m [39;49;00m[32m*[39;49;00m[37m [39;49;00m[31mcos[39;49;00m[37m [39;49;00m[31mt[39;49;00m)[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m([34m4[39;49;00m[37m [39;49;00m[32m*[39;49;00m[37m [39;49;00m[31msin[39;49;00m[37m [39;49;00m[31mt[39;49;00m))[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m([31mvec3[39;49;00m[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m[34m0[39;49;00m))[37m[39;49;00m
    30	[37m[39;49;00m
    31	[37m-- Shaders[39;49;00m[37m[39;49;00m
    32	[37m[39;49;00m
    33	[31mvertexShader[39;49;00m[37m [39;49;00m[32m:[39;49;00m[37m [39;49;00m[36mShader[39;49;00m[37m [39;49;00m{[37m [39;49;00m[31mattr[39;49;00m[37m [39;49;00m[32m|[39;49;00m[37m [39;49;00m[31mposition[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m,[37m [39;49;00m[31mcolor[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m[37m [39;49;00m}[37m [39;49;00m{[37m [39;49;00m[31munif[39;49;00m[37m [39;49;00m[32m|[39;49;00m[37m [39;49;00m[31mview[39;49;00m[32m:[39;49;00m[36mMat4[39;49;00m[37m [39;49;00m}[37m [39;49;00m{[37m [39;49;00m[31mvcolor[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m[37m [39;49;00m}[37m[39;49;00m
    34	[31mvertexShader[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m [39;49;00m[glsl|[37m[39;49;00m
    35	[37m[39;49;00m
    36	attribute vec3 position;[37m[39;49;00m
    37	attribute vec3 color;[37m[39;49;00m
    38	uniform mat4 view;[37m[39;49;00m
    39	varying vec3 vcolor;[37m[39;49;00m
    40	[37m[39;49;00m
    41	void main () {[37m[39;49;00m
    42	    gl_Position = view * vec4(position, 1.0);[37m[39;49;00m
    43	    vcolor = color;[37m[39;49;00m
    44	}[37m[39;49;00m
    45	[37m[39;49;00m
    46	|][37m[39;49;00m
    47	[37m[39;49;00m
    48	[31mfragmentShader[39;49;00m[37m [39;49;00m[32m:[39;49;00m[37m [39;49;00m[36mShader[39;49;00m[37m [39;49;00m{}[37m [39;49;00m[31mu[39;49;00m[37m [39;49;00m{[37m [39;49;00m[31mvcolor[39;49;00m[32m:[39;49;00m[36mVec3[39;49;00m[37m [39;49;00m}[37m[39;49;00m
    49	[31mfragmentShader[39;49;00m[37m [39;49;00m[32m=[39;49;00m[37m [39;49;00m[glsl|[37m[39;49;00m
    50	[37m[39;49;00m
    51	precision mediump float;[37m[39;49;00m
    52	varying vec3 vcolor;[37m[39;49;00m
    53	[37m[39;49;00m
    54	void main () {[37m[39;49;00m
    55	    gl_FragColor = vec4(vcolor, 1.0);[37m[39;49;00m
    56	}[37m[39;49;00m
    57	[37m[39;49;00m
    58	|]
