10[34mREM[39;49;00m[37m >EIRC[39;49;00m[37m[39;49;00m$
20[34mREM[39;49;00m[37m The simplest IRC client you can write. Maybe.[39;49;00m[37m[39;49;00m$
30[34mREM[39;49;00m[37m (C) Justin Fletcher, 1998[39;49;00m[37m[39;49;00m$
40[36m:[39;49;00m[37m[39;49;00m$
50[34mEND[39;49;00m=[34mPAGE[39;49;00m[34m+1024[39;49;00m*[34m16[39;49;00m[37m[39;49;00m$
60[34mREM[39;49;00m[37m Change these if you wish[39;49;00m[37m[39;49;00m$
70[31mhost$[39;49;00m=[33m"[39;49;00m[33mirc.stealth.net[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
80[31mport[39;49;00m=[34m6667[39;49;00m[37m[39;49;00m$
90[31mnick$[39;49;00m=[33m"[39;49;00m[33meirc[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
100[31mourchan$[39;49;00m=[33m"[39;49;00m[33m#acorn[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
110[36m:[39;49;00m[37m[39;49;00m$
120[34mREM[39;49;00m[37m Start connecting to a host[39;49;00m[37m[39;49;00m$
130[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_ConnectToHost[39;49;00m[33m"[39;49;00m,[31mhost$[39;49;00m,[31mport[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mhandle[39;49;00m[37m[39;49;00m$
140[34mREPEAT[39;49;00m[37m[39;49;00m$
150[37m [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_CheckState[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mstate[39;49;00m[37m[39;49;00m$
160[37m [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31mstate[39;49;00m<[34m-1[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_Forget[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m[36m:[39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_DecodeState[39;49;00m[33m"[39;49;00m,[31mstate[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31ma$[39;49;00m[36m:[39;49;00m[34mERR[39;49;00m[34mOR[39;49;00m[37m [39;49;00m[34m1[39;49;00m,[33m"[39;49;00m[33mFailed ([39;49;00m[33m"[39;49;00m+[31ma$[39;49;00m+[33m"[39;49;00m[33m)[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
170[34mUNTIL[39;49;00m[37m [39;49;00m[31mstate[39;49;00m=[34m4[39;49;00m[37m[39;49;00m$
180[36m:[39;49;00m[37m[39;49;00m$
190[34mREM[39;49;00m[37m We are now connected[39;49;00m[37m[39;49;00m$
200[34mPRINT[39;49;00m[33m"[39;49;00m[33mConnected[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
210[36m:[39;49;00m[37m[39;49;00m$
220[34mREM[39;49;00m[37m Log on to the server[39;49;00m[37m[39;49;00m$
230[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mUSER [39;49;00m[33m"[39;49;00m+[31mnick$[39;49;00m+[33m"[39;49;00m[33m x x :[39;49;00m[33m"[39;49;00m+[31mnick$[39;49;00m[37m[39;49;00m$
240[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mNICK [39;49;00m[33m"[39;49;00m+[31mnick$[39;49;00m[37m[39;49;00m$
250[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mJOIN [39;49;00m[33m"[39;49;00m+[31mourchan$[39;49;00m[37m[39;49;00m$
260[34mREM[39;49;00m[37m Install a monitor so that we don't waste time[39;49;00m[37m[39;49;00m$
270[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_Monitor[39;49;00m[33m"[39;49;00m,[34m0[39;49;00m,[31mhandle[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mmonitor[39;49;00m[37m[39;49;00m$
280[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_ResetMonitor[39;49;00m[33m"[39;49;00m,[31mmonitor[39;49;00m,[34m0[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mpolladdr%[39;49;00m[37m[39;49;00m$
290[36m:[39;49;00m[37m[39;49;00m$
300[34mREM[39;49;00m[37m If we crash, we should tidy up after ourselves[39;49;00m[37m[39;49;00m$
310[34mON[39;49;00m[37m [39;49;00m[34mERR[39;49;00m[34mOR[39;49;00m[37m [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mXESocket_Forget[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m[36m:[39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mXESocket_Forget[39;49;00m[33m"[39;49;00m,[31mmonitor[39;49;00m[36m:[39;49;00m[34mERR[39;49;00m[34mOR[39;49;00m[37m [39;49;00m[34mEXT[39;49;00m[37m [39;49;00m[34mERR[39;49;00m,[34mREPORT$[39;49;00m+[33m"[39;49;00m[33m at line [39;49;00m[33m"[39;49;00m+[34mSTR$[39;49;00m[34mERL[39;49;00m[37m[39;49;00m$
320[36m:[39;49;00m[37m[39;49;00m$
330[34mREM[39;49;00m[37m Memory buffer for our data[39;49;00m[37m[39;49;00m$
340[31mbufsize%[39;49;00m=[34m1024[39;49;00m[37m[39;49;00m$
350[34mDIM[39;49;00m[37m [39;49;00m[31mbuf%[39;49;00m[37m [39;49;00m[31mbufsize%[39;49;00m[37m[39;49;00m$
360[36m:[39;49;00m[37m[39;49;00m$
370[31minput$[39;49;00m=[33m"[39;49;00m[33m"[39;49;00m[36m:[39;49;00m[34mREM[39;49;00m[37m The input line[39;49;00m[37m[39;49;00m$
380[34mREPEAT[39;49;00m[37m[39;49;00m$
390[37m [39;49;00m[34mREM[39;49;00m[37m In a taskwindow we should yield until there is data[39;49;00m[37m[39;49;00m$
400[37m [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mOS_UpCall[39;49;00m[33m"[39;49;00m,[34m6[39;49;00m,[31mpolladdr%[39;49;00m[37m[39;49;00m$
410[37m [39;49;00m[34mIF[39;49;00m[37m [39;49;00m![31mpolladdr%[39;49;00m<>[34m0[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
420[37m  [39;49;00m[34mREM[39;49;00m[37m Reset the monitor for the time being[39;49;00m[37m[39;49;00m$
430[37m  [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_ResetMonitor[39;49;00m[33m"[39;49;00m,[31mmonitor[39;49;00m,[34m0[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mpolladdr%[39;49;00m[37m[39;49;00m$
440[37m  [39;49;00m[34mREPEAT[39;49;00m[37m[39;49;00m$
450[37m   [39;49;00m[34mREM[39;49;00m[37m Read lines from the connection until this buffer is empty[39;49;00m[37m[39;49;00m$
460[37m   [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_ReadLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[31mbuf%[39;49;00m,[31mbufsize%[39;49;00m,[34m%100[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m,[31mstr[39;49;00m,[31mlen[39;49;00m[37m[39;49;00m$
470[37m   [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31mstr[39;49;00m<>[34m0[39;49;00m[37m [39;49;00m[34mAND[39;49;00m[37m [39;49;00m$[31mstr[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
480[37m    [39;49;00m[31mline$[39;49;00m=$[31mstr[39;49;00m[37m[39;49;00m$
490[37m    [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34m4[39;49;00m)=[33m"[39;49;00m[33mPING[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
500[37m     [39;49;00m[34mREM[39;49;00m[37m Ping's must be replied to immediately[39;49;00m[37m[39;49;00m$
510[37m     [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mPONG [39;49;00m[33m"[39;49;00m+[34mMID$[39;49;00m([31mline$[39;49;00m,[34m6[39;49;00m)[37m[39;49;00m$
520[37m    [39;49;00m[34mELSE[39;49;00m[37m[39;49;00m$
530[37m     [39;49;00m[34mREM[39;49;00m[37m Extract source info[39;49;00m[37m[39;49;00m$
540[37m     [39;49;00m[31mfrom$[39;49;00m=[34mMID$[39;49;00m([34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m),[34m2[39;49;00m)[37m[39;49;00m$
550[37m     [39;49;00m[31mline$[39;49;00m=[34mMID$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m+1[39;49;00m)[37m[39;49;00m$
560[37m     [39;49;00m[31muid$[39;49;00m=[34mLEFT$[39;49;00m([31mfrom$[39;49;00m,[34mINSTR[39;49;00m([31mfrom$[39;49;00m+[33m"[39;49;00m[33m![39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m![39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m)[37m[39;49;00m$
570[37m     [39;49;00m[31mcom$[39;49;00m=[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m)[37m[39;49;00m$
580[37m     [39;49;00m[31mline$[39;49;00m=[34mMID$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m+1[39;49;00m)[37m[39;49;00m$
590[37m     [39;49;00m[34mREM[39;49;00m[37m remove the input line[39;49;00m[37m[39;49;00m$
600[37m     [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31minput$[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[34mFOR[39;49;00m[31mI[39;49;00m=[34m1[39;49;00m[34mTO[39;49;00m[34mLEN[39;49;00m([31minput$[39;49;00m)[36m:[39;49;00m[34mVDU[39;49;00m[34m127[39;49;00m[36m:[39;49;00m[34mNEXT[39;49;00m[37m[39;49;00m$
610[37m     [39;49;00m[34mCASE[39;49;00m[37m [39;49;00m[34mFN[39;49;00m[32mupper[39;49;00m([31mcom$[39;49;00m)[37m [39;49;00m[34mOF[39;49;00m[37m[39;49;00m$
620[37m      [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mPRIVMSG[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
630[37m       [39;49;00m[34mREM[39;49;00m[37m Extract the destination[39;49;00m[37m[39;49;00m$
640[37m       [39;49;00m[31mchan$[39;49;00m=[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m)[37m[39;49;00m$
650[37m       [39;49;00m[31mline$[39;49;00m=[34mMID$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m+2[39;49;00m)[36m:[39;49;00m[34mREM[39;49;00m[37m Skip :[39;49;00m[37m[39;49;00m$
660[37m       [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34m1[39;49;00m)=[34mCHR$[39;49;00m[34m1[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
670[37m        [39;49;00m[34mREM[39;49;00m[37m CTCP, so respond to it[39;49;00m[37m[39;49;00m$
680[37m        [39;49;00m[31mline$[39;49;00m=[34mMID$[39;49;00m([31mline$[39;49;00m,[34m2[39;49;00m,[34mLEN[39;49;00m([31mline$[39;49;00m)[34m-2[39;49;00m)[37m[39;49;00m$
690[37m        [39;49;00m[31mcom$[39;49;00m=[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m)[37m[39;49;00m$
700[37m        [39;49;00m[31mline$[39;49;00m=[34mMID$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m+1[39;49;00m)[37m[39;49;00m$
710[37m        [39;49;00m[34mCASE[39;49;00m[37m [39;49;00m[34mFN[39;49;00m[32mupper[39;49;00m([31mcom$[39;49;00m)[37m [39;49;00m[34mOF[39;49;00m[37m[39;49;00m$
720[37m         [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mPING[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
730[37m          [39;49;00m[34mREM[39;49;00m[37m Ping lag timing[39;49;00m[37m[39;49;00m$
740[37m          [39;49;00m[31mline$[39;49;00m=[33m"[39;49;00m[33mPONG [39;49;00m[33m"[39;49;00m+[31mline$[39;49;00m[37m[39;49;00m$
750[37m          [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m pinged us[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
760[37m         [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mVERSION[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
770[37m          [39;49;00m[34mREM[39;49;00m[37m Version checking[39;49;00m[37m[39;49;00m$
780[37m          [39;49;00m[31mline$[39;49;00m=[33m"[39;49;00m[33mVERSION EIRC 1.00 (c) Justin Fletcher[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
790[37m          [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m wanted our version[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
800[37m         [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mACTION[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
810[37m          [39;49;00m[34mPRINT[39;49;00m[33m"[39;49;00m[33m* [39;49;00m[33m"[39;49;00m;[31muid$[39;49;00m;[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m;[31mline$[39;49;00m[37m[39;49;00m$
820[37m          [39;49;00m[31mline$[39;49;00m=[33m"[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
830[37m         [39;49;00m[34mOTHERWISE[39;49;00m[37m[39;49;00m$
840[37m          [39;49;00m[34mREM[39;49;00m[37m everything else is an error[39;49;00m[37m[39;49;00m$
850[37m          [39;49;00m[31mline$[39;49;00m=[33m"[39;49;00m[33mERRMSG [39;49;00m[33m"[39;49;00m+[31mcom$[39;49;00m+[33m"[39;49;00m[33m not understood[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
860[37m          [39;49;00m[34mPRINT[39;49;00m[33m"[39;49;00m[33mCTCP '[39;49;00m[33m"[39;49;00m;[31mcom$[39;49;00m;[33m"[39;49;00m[33m' from [39;49;00m[33m"[39;49;00m;[31muid$[39;49;00m;[33m"[39;49;00m[33m ([39;49;00m[33m"[39;49;00m;[31mline$[39;49;00m;[33m"[39;49;00m[33m)[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
870[37m        [39;49;00m[34mEND[39;49;00m[34mCASE[39;49;00m[37m[39;49;00m$
880[37m        [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31mline$[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
890[37m         [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mNOTICE [39;49;00m[33m"[39;49;00m+[31muid$[39;49;00m+[33m"[39;49;00m[33m :[39;49;00m[33m"[39;49;00m+[34mCHR$[39;49;00m[34m1[39;49;00m+[31mline$[39;49;00m+[34mCHR$[39;49;00m[34m1[39;49;00m[37m[39;49;00m$
900[37m        [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
910[37m       [39;49;00m[34mELSE[39;49;00m[37m[39;49;00m$
920[37m        [39;49;00m[34mREM[39;49;00m[37m Somebody said something...[39;49;00m[37m[39;49;00m$
930[37m        [39;49;00m[34mPRINT[39;49;00m[33m"[39;49;00m[33m<[39;49;00m[33m"[39;49;00m;[31muid$[39;49;00m;[33m"[39;49;00m[33m> [39;49;00m[33m"[39;49;00m;[34mFN[39;49;00m[32msafe[39;49;00m([31mline$[39;49;00m)[37m[39;49;00m$
940[37m       [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
950[37m      [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mJOIN[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
960[37m       [39;49;00m[34mREM[39;49;00m[37m We (or someone else) has joined the channel[39;49;00m[37m[39;49;00m$
970[37m       [39;49;00m[31mchan$[39;49;00m=[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m))[36m:[39;49;00m[34mREM[39;49;00m[37m Skip :[39;49;00m[37m[39;49;00m$
980[37m       [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[34mLEFT$[39;49;00m([31mchan$[39;49;00m,[34m1[39;49;00m)=[33m"[39;49;00m[33m:[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[31mchan$[39;49;00m=[34mMID$[39;49;00m([31mchan$[39;49;00m,[34m2[39;49;00m)[37m[39;49;00m$
990[37m       [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m has joined [39;49;00m[33m"[39;49;00m;[31mchan$[39;49;00m[37m[39;49;00m$
1000[37m      [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mPART[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
1010[37m       [39;49;00m[34mREM[39;49;00m[37m Someone else has left the channel[39;49;00m[37m[39;49;00m$
1020[37m       [39;49;00m[31mchan$[39;49;00m=[34mLEFT$[39;49;00m([31mline$[39;49;00m,[34mINSTR[39;49;00m([31mline$[39;49;00m+[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m,[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m)[34m-1[39;49;00m)[37m[39;49;00m$
1030[37m       [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[34mLEFT$[39;49;00m([31mchan$[39;49;00m,[34m1[39;49;00m)=[33m"[39;49;00m[33m:[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[31mchan$[39;49;00m=[34mMID$[39;49;00m([31mchan$[39;49;00m,[34m2[39;49;00m)[37m[39;49;00m$
1040[37m       [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m has left [39;49;00m[33m"[39;49;00m;[31mchan$[39;49;00m[37m[39;49;00m$
1050[37m      [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mQUIT[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
1060[37m       [39;49;00m[34mREM[39;49;00m[37m Someone else has quit IRC[39;49;00m[37m[39;49;00m$
1070[37m       [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m quit IRC[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
1080[37m      [39;49;00m[34mOTHERWISE[39;49;00m[37m[39;49;00m$
1090[37m       [39;49;00m[34mREM[39;49;00m[37m Some unknown command[39;49;00m[37m[39;49;00m$
1100[37m       [39;49;00m[34mPRINT[39;49;00m[31muid$[39;49;00m;[33m"[39;49;00m[33m:[39;49;00m[33m"[39;49;00m;[31mcom$[39;49;00m;[33m"[39;49;00m[33m:[39;49;00m[33m"[39;49;00m;[34mFN[39;49;00m[32msafe[39;49;00m([31mline$[39;49;00m)[37m[39;49;00m$
1110[37m     [39;49;00m[34mEND[39;49;00m[34mCASE[39;49;00m[37m[39;49;00m$
1120[37m     [39;49;00m[34mREM[39;49;00m[37m Re-display our input line[39;49;00m[37m[39;49;00m$
1130[37m     [39;49;00m[34mPRINT[39;49;00m[31minput$[39;49;00m;[37m[39;49;00m$
1140[37m    [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
1150[37m   [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
1160[37m  [39;49;00m[34mUNTIL[39;49;00m[37m [39;49;00m[31mstr[39;49;00m=[34m0[39;49;00m[37m[39;49;00m$
1170[37m [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
1180[37m [39;49;00m[31mb$[39;49;00m=[34mINKEY$[39;49;00m([34m0[39;49;00m)[37m[39;49;00m$
1190[37m [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31mb$[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[37m[39;49;00m$
1200[37m  [39;49;00m[34mCASE[39;49;00m[37m [39;49;00m[31mb$[39;49;00m[37m [39;49;00m[34mOF[39;49;00m[37m[39;49;00m$
1210[37m   [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[34mCHR$[39;49;00m[34m13[39;49;00m[37m[39;49;00m$
1220[37m    [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_SendLine[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[33m"[39;49;00m[33mPRIVMSG [39;49;00m[33m"[39;49;00m+[31mourchan$[39;49;00m+[33m"[39;49;00m[33m :[39;49;00m[33m"[39;49;00m+[31minput$[39;49;00m[37m[39;49;00m$
1230[37m    [39;49;00m[34mREM[39;49;00m[37m Remove the line[39;49;00m[37m[39;49;00m$
1240[37m    [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31minput$[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[34mFOR[39;49;00m[31mI[39;49;00m=[34m1[39;49;00m[34mTO[39;49;00m[34mLEN[39;49;00m([31minput$[39;49;00m)[36m:[39;49;00m[34mVDU[39;49;00m[34m127[39;49;00m[36m:[39;49;00m[34mNEXT[39;49;00m[37m[39;49;00m$
1250[37m    [39;49;00m[34mREM[39;49;00m[37m We said it...[39;49;00m[37m[39;49;00m$
1260[37m    [39;49;00m[34mPRINT[39;49;00m[33m"[39;49;00m[33m<[39;49;00m[33m"[39;49;00m+[31mnick$[39;49;00m+[33m"[39;49;00m[33m> [39;49;00m[33m"[39;49;00m;[31minput$[39;49;00m[37m[39;49;00m$
1270[37m    [39;49;00m[31minput$[39;49;00m=[33m"[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
1280[37m   [39;49;00m[34mWHEN[39;49;00m[37m [39;49;00m[34mCHR$[39;49;00m[34m127[39;49;00m,[34mCHR$[39;49;00m[34m8[39;49;00m[37m[39;49;00m$
1290[37m    [39;49;00m[34mREM[39;49;00m[37m Backspace[39;49;00m[37m[39;49;00m$
1300[37m    [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31minput$[39;49;00m<>[33m"[39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[34mVDU[39;49;00m[34m127[39;49;00m[37m[39;49;00m$
1310[37m    [39;49;00m[31minput$[39;49;00m=[34mLEFT$[39;49;00m([31minput$[39;49;00m)[37m[39;49;00m$
1320[37m   [39;49;00m[34mOTHERWISE[39;49;00m[37m[39;49;00m$
1330[37m    [39;49;00m[34mREM[39;49;00m[37m Ad to current input[39;49;00m[37m[39;49;00m$
1340[37m    [39;49;00m[31minput$[39;49;00m+=[31mb$[39;49;00m[37m[39;49;00m$
1350[37m    [39;49;00m[34mPRINT[39;49;00m[31mb$[39;49;00m;[37m[39;49;00m$
1360[37m  [39;49;00m[34mEND[39;49;00m[34mCASE[39;49;00m[37m[39;49;00m$
1370[37m [39;49;00m[34mEND[39;49;00m[34mIF[39;49;00m[37m[39;49;00m$
1380[37m [39;49;00m[34mREM[39;49;00m[37m Has the socket closed[39;49;00m[37m[39;49;00m$
1390[37m [39;49;00m[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_Closed[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m,[34m%0[39;49;00m[37m [39;49;00m[34mTO[39;49;00m[37m [39;49;00m[31mclosed[39;49;00m[37m[39;49;00m$
1400[34mUNTIL[39;49;00m[37m [39;49;00m[31mclosed[39;49;00m[37m[39;49;00m$
1410[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_Forget[39;49;00m[33m"[39;49;00m,[31mhandle[39;49;00m[37m[39;49;00m$
1420[34mSYS[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mESocket_Forget[39;49;00m[33m"[39;49;00m,[31mmonitor[39;49;00m[37m[39;49;00m$
1430[34mEND[39;49;00m[37m[39;49;00m$
1440[36m:[39;49;00m[37m[39;49;00m$
1450[34mDEF[39;49;00m[34mFN[39;49;00m[32mupper[39;49;00m([31ma$[39;49;00m)[36m:[39;49;00m[34mLOCAL[39;49;00m[37m [39;49;00m[31mc$[39;49;00m,[31mb$[39;49;00m,[31mI[39;49;00m[37m[39;49;00m$
1460[34mFOR[39;49;00m[31mI[39;49;00m=[34m1[39;49;00m[34mTO[39;49;00m[34mLEN[39;49;00m([31ma$[39;49;00m)[37m[39;49;00m$
1470[31mc$[39;49;00m=[34mMID$[39;49;00m([31ma$[39;49;00m,[31mI[39;49;00m,[34m1[39;49;00m)[36m:[39;49;00m[34mIF[39;49;00m[37m [39;49;00m[31mc$[39;49;00m>=[33m"[39;49;00m[33ma[39;49;00m[33m"[39;49;00m[34mAND[39;49;00m[31mc$[39;49;00m<=[33m"[39;49;00m[33mz[39;49;00m[33m"[39;49;00m[34mTHEN[39;49;00m[31mc$[39;49;00m=[34mCHR$[39;49;00m([34mASC[39;49;00m([31mc$[39;49;00m)[34m-32[39;49;00m)[37m[39;49;00m$
1480[31mb$[39;49;00m+=[31mc$[39;49;00m[36m:[39;49;00m[34mNEXT[39;49;00m[36m:[39;49;00m=[31mb$[39;49;00m[37m[39;49;00m$
1490[37m[39;49;00m$
1500[34mREM[39;49;00m[37m Remove control codes[39;49;00m[37m[39;49;00m$
1510[34mDEF[39;49;00m[34mFN[39;49;00m[32msafe[39;49;00m([31mline$[39;49;00m)[37m[39;49;00m$
1520[34mLOCAL[39;49;00m[37m [39;49;00m[31mI[39;49;00m[37m[39;49;00m$
1530[34mFOR[39;49;00m[31mI[39;49;00m=[34m1[39;49;00m[34mTO[39;49;00m[34mLEN[39;49;00m([31mline$[39;49;00m)[37m[39;49;00m$
1540[37m [39;49;00m[34mIF[39;49;00m[37m [39;49;00m[34mMID$[39;49;00m([31mline$[39;49;00m,[31mI[39;49;00m,[34m1[39;49;00m)<[33m"[39;49;00m[33m [39;49;00m[33m"[39;49;00m[37m [39;49;00m[34mTHEN[39;49;00m[34mMID$[39;49;00m([31mline$[39;49;00m,[31mI[39;49;00m,[34m1[39;49;00m)=[33m"[39;49;00m[33m*[39;49;00m[33m"[39;49;00m[37m[39;49;00m$
1550[34mNEXT[39;49;00m[37m[39;49;00m$
1560=[31mline$[39;49;00m$
