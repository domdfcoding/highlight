     1	[37m# ltmain.sh - Provide generalized library-building support services.[39;49;00m
     2	[37m# NOTE: Changing this file will not affect anything until you rerun configure.[39;49;00m
     3	[37m#[39;49;00m
     4	[37m# Copyright (C) 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004, 2005[39;49;00m
     5	[37m# Free Software Foundation, Inc.[39;49;00m
     6	[37m# Originally by Gordon Matzigkeit <gord@gnu.ai.mit.edu>, 1996[39;49;00m
     7	[37m#[39;49;00m
     8	[37m# This program is free software; you can redistribute it and/or modify[39;49;00m
     9	[37m# it under the terms of the GNU General Public License as published by[39;49;00m
    10	[37m# the Free Software Foundation; either version 2 of the License, or[39;49;00m
    11	[37m# (at your option) any later version.[39;49;00m
    12	[37m#[39;49;00m
    13	[37m# This program is distributed in the hope that it will be useful, but[39;49;00m
    14	[37m# WITHOUT ANY WARRANTY; without even the implied warranty of[39;49;00m
    15	[37m# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU[39;49;00m
    16	[37m# General Public License for more details.[39;49;00m
    17	[37m#[39;49;00m
    18	[37m# You should have received a copy of the GNU General Public License[39;49;00m
    19	[37m# along with this program; if not, write to the Free Software[39;49;00m
    20	[37m# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.[39;49;00m
    21	[37m#[39;49;00m
    22	[37m# As a special exception to the GNU General Public License, if you[39;49;00m
    23	[37m# distribute this file as part of a program that contains a[39;49;00m
    24	[37m# configuration script generated by Autoconf, you may include it under[39;49;00m
    25	[37m# the same distribution terms that you use for the rest of that program.[39;49;00m
    26
    27	[31mbasename[39;49;00m=[33m"s,^.*/,,g"[39;49;00m
    28
    29	[37m# Work around backward compatibility issue on IRIX 6.5. On IRIX 6.4+, sh[39;49;00m
    30	[37m# is ksh but when the shell is invoked as "sh" and the current value of[39;49;00m
    31	[37m# the _XPG environment variable is not equal to 1 (one), the special[39;49;00m
    32	[37m# positional parameter $0, within a function call, is the name of the[39;49;00m
    33	[37m# function.[39;49;00m
    34	[31mprogpath[39;49;00m=[33m"[39;49;00m[31m$0[39;49;00m[33m"[39;49;00m
    35
    36	[37m# define SED for historic ltconfig's generated by Libtool 1.3[39;49;00m
    37	[36mtest[39;49;00m -z [33m"[39;49;00m[31m$SED[39;49;00m[33m"[39;49;00m && [31mSED[39;49;00m=sed
    38
    39	[37m# The name of this program:[39;49;00m
    40	[31mprogname[39;49;00m=[33m`[39;49;00m[36mecho[39;49;00m [33m"[39;49;00m[31m$progpath[39;49;00m[33m"[39;49;00m | [31m$SED[39;49;00m [31m$basename[39;49;00m[33m`[39;49;00m
    41	[31mmodename[39;49;00m=[33m"[39;49;00m[31m$progname[39;49;00m[33m"[39;49;00m
    42
    43	[37m# Global variables:[39;49;00m
    44	[31mEXIT_SUCCESS[39;49;00m=[34m0[39;49;00m
    45	[31mEXIT_FAILURE[39;49;00m=[34m1[39;49;00m
    46
    47	[31mPROGRAM[39;49;00m=ltmain.sh
    48	[31mPACKAGE[39;49;00m=libtool
    49	[31mVERSION[39;49;00m=[34m1[39;49;00m.5.22
    50	[31mTIMESTAMP[39;49;00m=[33m" (1.1220.2.365 2005/12/18 22:14:06)"[39;49;00m
    51
    52	[37m# See if we are running on zsh, and set the options which allow our[39;49;00m
    53	[37m# commands through without removal of \ escapes.[39;49;00m
    54	[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[33m${[39;49;00m[31mZSH_VERSION[39;49;00m+set[33m}[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m
    55	  setopt NO_GLOB_SUBST
    56	[34mfi[39;49;00m
    57	[37m# Same for EGREP, and just to be sure, do LTCC as well[39;49;00m
    58	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$EGREP[39;49;00m[33m"[39;49;00m = X ; [34mthen[39;49;00m
    59	    [31mEGREP[39;49;00m=egrep
    60	[34mfi[39;49;00m
    61	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$LTCC[39;49;00m[33m"[39;49;00m = X ; [34mthen[39;49;00m
    62	    [31mLTCC[39;49;00m=[33m${[39;49;00m[31mCC[39;49;00m-gcc[33m}[39;49;00m
    63	[34mfi[39;49;00m
    64
    65	[37m# Check that we have a working $echo.[39;49;00m
    66	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m = X--no-reexec; [34mthen[39;49;00m
    67	  [37m# Discard the --no-reexec flag, and continue.[39;49;00m
    68	  [36mshift[39;49;00m
    69	[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m = X--fallback-echo; [34mthen[39;49;00m
    70	  [37m# Avoid inline document here, it may be left over[39;49;00m
    71	  :
    72	[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX`([39;49;00m[31m$echo[39;49;00m[33m '\t') 2>/dev/null`[39;49;00m[33m"[39;49;00m = [33m'X\t'[39;49;00m; [34mthen[39;49;00m
    73	  [37m# Yippee, $echo works![39;49;00m
    74	  :
    75	[34melse[39;49;00m
    76	  [37m# Restart under the correct shell, and then maybe $echo will work.[39;49;00m
    77	  [36mexec[39;49;00m [31m$SHELL[39;49;00m [33m"[39;49;00m[31m$progpath[39;49;00m[33m"[39;49;00m --no-reexec [33m${[39;49;00m[31m1[39;49;00m+[33m"[39;49;00m[31m$@[39;49;00m[33m"[39;49;00m[33m}[39;49;00m
    78	[34mfi[39;49;00m
    79
    80	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m = X--fallback-echo; [34mthen[39;49;00m
    81	  [37m# used as fallback echo[39;49;00m
    82	  [36mshift[39;49;00m
    83	  cat [33m<<EOF[39;49;00m
    84	[33m$*[39;49;00m
    85	[33mEOF[39;49;00m
    86	  [36mexit[39;49;00m [31m$EXIT_SUCCESS[39;49;00m
    87	[34mfi[39;49;00m
    88
    89	[31mdefault_mode[39;49;00m=
    90	[31mhelp[39;49;00m=[33m"[39;49;00m[33mTry \`[39;49;00m[31m$progname[39;49;00m[33m --help' for more information.[39;49;00m[33m"[39;49;00m
    91	[31mmagic[39;49;00m=[33m"%%%MAGIC variable%%%"[39;49;00m
    92	[31mmkdir[39;49;00m=[33m"mkdir"[39;49;00m
    93	[31mmv[39;49;00m=[33m"mv -f"[39;49;00m
    94	[31mrm[39;49;00m=[33m"rm -f"[39;49;00m
    95
    96	[37m# Sed substitution that helps us do robust quoting.  It backslashifies[39;49;00m
    97	[37m# metacharacters that are still active within double-quoted strings.[39;49;00m
    98	[31mXsed[39;49;00m=[33m"[39;49;00m[33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m[33m"[39;49;00m[33m' -e 1s/^X//'[39;49;00m
    99	[31msed_quote_subst[39;49;00m=[33m's/\([\\`\\"$\\\\]\)/\\\1/g'[39;49;00m
   100	[37m# test EBCDIC or ASCII[39;49;00m
   101	[34mcase[39;49;00m [33m`[39;49;00m[36mecho[39;49;00m X|tr X [33m'\101'[39;49;00m[33m`[39;49;00m [34min[39;49;00m
   102	 A) [37m# ASCII based system[39;49;00m
   103	    [37m# \n is not interpreted correctly by Solaris 8 /usr/ucb/tr[39;49;00m
   104	  [31mSP2NL[39;49;00m=[33m'tr \040 \012'[39;49;00m
   105	  [31mNL2SP[39;49;00m=[33m'tr \015\012 \040\040'[39;49;00m
   106	  ;;
   107	 *) [37m# EBCDIC based system[39;49;00m
   108	  [31mSP2NL[39;49;00m=[33m'tr \100 \n'[39;49;00m
   109	  [31mNL2SP[39;49;00m=[33m'tr \r\n \100\100'[39;49;00m
   110	  ;;
   111	[34mesac[39;49;00m
   112
   113	[37m# NLS nuisances.[39;49;00m
   114	[37m# Only set LANG and LC_ALL to C if already set.[39;49;00m
   115	[37m# These must not be set unconditionally because not all systems understand[39;49;00m
   116	[37m# e.g. LANG=C (notably SCO).[39;49;00m
   117	[37m# We save the old values to restore during execute mode.[39;49;00m
   118	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mLC_ALL[39;49;00m+set[33m}[39;49;00m[33m"[39;49;00m = set; [34mthen[39;49;00m
   119	  [31msave_LC_ALL[39;49;00m=[33m"[39;49;00m[31m$LC_ALL[39;49;00m[33m"[39;49;00m; [31mLC_ALL[39;49;00m=C; [36mexport[39;49;00m LC_ALL
   120	[34mfi[39;49;00m
   121	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mLANG[39;49;00m+set[33m}[39;49;00m[33m"[39;49;00m = set; [34mthen[39;49;00m
   122	  [31msave_LANG[39;49;00m=[33m"[39;49;00m[31m$LANG[39;49;00m[33m"[39;49;00m; [31mLANG[39;49;00m=C; [36mexport[39;49;00m LANG
   123	[34mfi[39;49;00m
   124
   125	[37m# Make sure IFS has a sensible default[39;49;00m
   126	[31mlt_nl[39;49;00m=[33m'[39;49;00m
   127	[33m'[39;49;00m
   128	[31mIFS[39;49;00m=[33m"[39;49;00m[33m 	[39;49;00m[31m$lt_nl[39;49;00m[33m"[39;49;00m
   129
   130	[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m != yes && [36mtest[39;49;00m [33m"[39;49;00m[31m$build_old_libs[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
   131	  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: not configured to build any kind of library[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   132	  [31m$echo[39;49;00m [33m"[39;49;00m[33mFatal configuration error.  See the [39;49;00m[31m$PACKAGE[39;49;00m[33m docs for more information.[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   133	  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   134	[34mfi[39;49;00m
   135
   136	[37m# Global variables.[39;49;00m
   137	[31mmode[39;49;00m=[31m$default_mode[39;49;00m
   138	[31mnonopt[39;49;00m=
   139	[31mprev[39;49;00m=
   140	[31mprevopt[39;49;00m=
   141	[31mrun[39;49;00m=
   142	[31mshow[39;49;00m=[33m"[39;49;00m[31m$echo[39;49;00m[33m"[39;49;00m
   143	[31mshow_help[39;49;00m=
   144	[31mexecute_dlfiles[39;49;00m=
   145	[31mduplicate_deps[39;49;00m=no
   146	[31mpreserve_args[39;49;00m=
   147	[31mlo2o[39;49;00m=[33m"[39;49;00m[33ms/\\.lo\$/.[39;49;00m[33m${[39;49;00m[31mobjext[39;49;00m[33m}[39;49;00m[33m/[39;49;00m[33m"[39;49;00m
   148	[31mo2lo[39;49;00m=[33m"[39;49;00m[33ms/\\.[39;49;00m[33m${[39;49;00m[31mobjext[39;49;00m[33m}[39;49;00m[33m\$/.lo/[39;49;00m[33m"[39;49;00m
   149
   150	[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$max_cmd_len[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   151	  [31mi[39;49;00m=[34m0[39;49;00m
   152	  [31mtestring[39;49;00m=[33m"ABCD"[39;49;00m
   153	  [31mnew_result[39;49;00m=
   154
   155	  [37m# If test is not a shell built-in, we'll probably end up computing a[39;49;00m
   156	  [37m# maximum length that is only half of the actual maximum length, but[39;49;00m
   157	  [37m# we can't tell.[39;49;00m
   158	  [34mwhile[39;49;00m ([36mtest[39;49;00m [33m"X"[39;49;00m[33m`[39;49;00m[31m$SHELL[39;49;00m [31m$0[39;49;00m --fallback-echo [33m"[39;49;00m[33mX[39;49;00m[31m$testring[39;49;00m[33m"[39;49;00m [34m2[39;49;00m>/dev/null[33m`[39;49;00m [33m\[39;49;00m
   159	             = [33m"[39;49;00m[33mXX[39;49;00m[31m$testring[39;49;00m[33m"[39;49;00m) >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m &&
   160	          [31mnew_result[39;49;00m=[33m`[39;49;00mexpr [33m"[39;49;00m[33mX[39;49;00m[31m$testring[39;49;00m[33m"[39;49;00m : [33m".*"[39;49;00m [34m2[39;49;00m>&[34m1[39;49;00m[33m`[39;49;00m &&
   161	          [31mmax_cmd_len[39;49;00m=[33m"[39;49;00m[31m$new_result[39;49;00m[33m"[39;49;00m &&
   162	          [36mtest[39;49;00m [33m"[39;49;00m[31m$i[39;49;00m[33m"[39;49;00m != [34m17[39;49;00m [37m# 1/2 MB should be enough[39;49;00m
   163	  [34mdo[39;49;00m
   164	    [31mi[39;49;00m=[33m`[39;49;00mexpr [31m$i[39;49;00m + [34m1[39;49;00m[33m`[39;49;00m
   165	    [31mtestring[39;49;00m=[33m"[39;49;00m[31m$testring[39;49;00m[31m$testring[39;49;00m[33m"[39;49;00m
   166	  [34mdone[39;49;00m
   167	  [31mtestring[39;49;00m=
   168	  [37m# Add a significant safety factor because C++ compilers can tack on massive[39;49;00m
   169	  [37m# amounts of additional arguments before passing them to the linker.[39;49;00m
   170	  [37m# It appears as though 1/2 is a usable value.[39;49;00m
   171	  [31mmax_cmd_len[39;49;00m=[33m`[39;49;00mexpr [31m$max_cmd_len[39;49;00m [33m\/[39;49;00m [34m2[39;49;00m[33m`[39;49;00m
   172	[34mfi[39;49;00m
   173
   174	[37m#####################################[39;49;00m
   175	[37m# Shell function definitions:[39;49;00m
   176	[37m# This seems to be the best place for them[39;49;00m
   177
   178	[37m# func_mktempdir [string][39;49;00m
   179	[37m# Make a temporary directory that won't clash with other running[39;49;00m
   180	[37m# libtool processes, and avoids race conditions if possible.  If[39;49;00m
   181	[37m# given, STRING is the basename for that directory.[39;49;00m
   182	func_mktempdir ()
   183	{
   184	    [31mmy_template[39;49;00m=[33m"[39;49;00m[33m${[39;49;00m[31mTMPDIR[39;49;00m-/tmp[33m}[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31m1[39;49;00m-[31m$progname[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   185
   186	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m = [33m":"[39;49;00m; [34mthen[39;49;00m
   187	      [37m# Return a directory name, but don't create it in dry-run mode[39;49;00m
   188	      [31mmy_tmpdir[39;49;00m=[33m"[39;49;00m[33m${[39;49;00m[31mmy_template[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[31m$$[39;49;00m[33m"[39;49;00m
   189	    [34melse[39;49;00m
   190
   191	      [37m# If mktemp works, use that first and foremost[39;49;00m
   192	      [31mmy_tmpdir[39;49;00m=[33m`[39;49;00mmktemp -d [33m"[39;49;00m[33m${[39;49;00m[31mmy_template[39;49;00m[33m}[39;49;00m[33m-XXXXXXXX[39;49;00m[33m"[39;49;00m [34m2[39;49;00m>/dev/null[33m`[39;49;00m
   193
   194	      [34mif[39;49;00m [36mtest[39;49;00m ! -d [33m"[39;49;00m[31m$my_tmpdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   195		[37m# Failing that, at least try and use $RANDOM to avoid a race[39;49;00m
   196		[31mmy_tmpdir[39;49;00m=[33m"[39;49;00m[33m${[39;49;00m[31mmy_template[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[33m${[39;49;00m[31mRANDOM[39;49;00m-0[33m}[39;49;00m[31m$$[39;49;00m[33m"[39;49;00m
   197
   198		[31msave_mktempdir_umask[39;49;00m=[33m`[39;49;00m[36mumask[39;49;00m[33m`[39;49;00m
   199		[36mumask[39;49;00m [34m0077[39;49;00m
   200		[31m$mkdir[39;49;00m [33m"[39;49;00m[31m$my_tmpdir[39;49;00m[33m"[39;49;00m
   201		[36mumask[39;49;00m [31m$save_mktempdir_umask[39;49;00m
   202	      [34mfi[39;49;00m
   203
   204	      [37m# If we're not in dry-run mode, bomb out on failure[39;49;00m
   205	      [36mtest[39;49;00m -d [33m"[39;49;00m[31m$my_tmpdir[39;49;00m[33m"[39;49;00m || {
   206	        [31m$echo[39;49;00m [33m"[39;49;00m[33mcannot create temporary directory \`[39;49;00m[31m$my_tmpdir[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   207		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   208	      }
   209	    [34mfi[39;49;00m
   210
   211	    [31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$my_tmpdir[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m
   212	}
   213
   214
   215	[37m# func_win32_libid arg[39;49;00m
   216	[37m# return the library type of file 'arg'[39;49;00m
   217	[37m#[39;49;00m
   218	[37m# Need a lot of goo to handle *both* DLLs and import libs[39;49;00m
   219	[37m# Has to be a shell function in order to 'eat' the argument[39;49;00m
   220	[37m# that is supplied when $file_magic_command is called.[39;49;00m
   221	func_win32_libid ()
   222	{
   223	  [31mwin32_libid_type[39;49;00m=[33m"unknown"[39;49;00m
   224	  [31mwin32_fileres[39;49;00m=[33m`[39;49;00mfile -L [31m$1[39;49;00m [34m2[39;49;00m>/dev/null[33m`[39;49;00m
   225	  [34mcase[39;49;00m [31m$win32_fileres[39;49;00m [34min[39;49;00m
   226	  *ar[33m\ [39;49;00marchive[33m\ [39;49;00mimport[33m\ [39;49;00mlibrary*) [37m# definitely import[39;49;00m
   227	    [31mwin32_libid_type[39;49;00m=[33m"x86 archive import"[39;49;00m
   228	    ;;
   229	  *ar[33m\ [39;49;00marchive*) [37m# could be an import, or static[39;49;00m
   230	    [34mif[39;49;00m [36meval[39;49;00m [31m$OBJDUMP[39;49;00m -f [31m$1[39;49;00m | [31m$SED[39;49;00m -e [33m'10q'[39;49;00m [34m2[39;49;00m>/dev/null | [33m\[39;49;00m
   231	      [31m$EGREP[39;49;00m -e [33m'file format pe-i386(.*architecture: i386)?'[39;49;00m >/dev/null ; [34mthen[39;49;00m
   232	      [31mwin32_nmres[39;49;00m=[33m`[39;49;00m[36meval[39;49;00m [31m$NM[39;49;00m -f posix -A [31m$1[39;49;00m | [33m\[39;49;00m
   233		[31m$SED[39;49;00m -n -e [33m'1,100{/ I /{s,.*,import,;p;q;};}'[39;49;00m[33m`[39;49;00m
   234	      [34mcase[39;49;00m [31m$win32_nmres[39;49;00m [34min[39;49;00m
   235	      import*)  [31mwin32_libid_type[39;49;00m=[33m"x86 archive import"[39;49;00m;;
   236	      *)        [31mwin32_libid_type[39;49;00m=[33m"x86 archive static"[39;49;00m;;
   237	      [34mesac[39;49;00m
   238	    [34mfi[39;49;00m
   239	    ;;
   240	  *DLL*)
   241	    [31mwin32_libid_type[39;49;00m=[33m"x86 DLL"[39;49;00m
   242	    ;;
   243	  *executable*) [37m# but shell scripts are "executable" too...[39;49;00m
   244	    [34mcase[39;49;00m [31m$win32_fileres[39;49;00m [34min[39;49;00m
   245	    *MS[33m\ [39;49;00mWindows[33m\ [39;49;00mPE[33m\ [39;49;00mIntel*)
   246	      [31mwin32_libid_type[39;49;00m=[33m"x86 DLL"[39;49;00m
   247	      ;;
   248	    [34mesac[39;49;00m
   249	    ;;
   250	  [34mesac[39;49;00m
   251	  [31m$echo[39;49;00m [31m$win32_libid_type[39;49;00m
   252	}
   253
   254
   255	[37m# func_infer_tag arg[39;49;00m
   256	[37m# Infer tagged configuration to use if any are available and[39;49;00m
   257	[37m# if one wasn't chosen via the "--tag" command line option.[39;49;00m
   258	[37m# Only attempt this if the compiler in the base compile[39;49;00m
   259	[37m# command doesn't match the default compiler.[39;49;00m
   260	[37m# arg is usually of the form 'gcc ...'[39;49;00m
   261	func_infer_tag ()
   262	{
   263	    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$available_tags[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m -z [33m"[39;49;00m[31m$tagname[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   264	      [31mCC_quoted[39;49;00m=
   265	      [34mfor[39;49;00m arg [34min[39;49;00m [31m$CC[39;49;00m; [34mdo[39;49;00m
   266		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   267		  *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   268		  [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
   269		  ;;
   270		[34mesac[39;49;00m
   271		[31mCC_quoted[39;49;00m=[33m"[39;49;00m[31m$CC_quoted[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   272	      [34mdone[39;49;00m
   273	      [34mcase[39;49;00m [31m$@[39;49;00m [34min[39;49;00m
   274	      [37m# Blanks in the command may have been stripped by the calling shell,[39;49;00m
   275	      [37m# but not from the CC environment variable when configure was run.[39;49;00m
   276	      [33m"[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[31m$CC[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[31m$CC_quoted[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m` [39;49;00m[33m"[39;49;00m*) ;;
   277	      [37m# Blanks at the start of $base_compile will cause this to fail[39;49;00m
   278	      [37m# if we don't check for them as well.[39;49;00m
   279	      *)
   280		[34mfor[39;49;00m z [34min[39;49;00m [31m$available_tags[39;49;00m; [34mdo[39;49;00m
   281		  [34mif[39;49;00m grep [33m"[39;49;00m[33m^# ### BEGIN LIBTOOL TAG CONFIG: [39;49;00m[31m$z[39;49;00m$[33m"[39;49;00m < [33m"[39;49;00m[31m$progpath[39;49;00m[33m"[39;49;00m > /dev/null; [34mthen[39;49;00m
   282		    [37m# Evaluate the configuration.[39;49;00m
   283		    [36meval[39;49;00m [33m"[39;49;00m[33m`[39;49;00m[33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m[33m -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '[39;49;00m[31m$z[39;49;00m[33m'[39;49;00m$[33m/,/^# ### END LIBTOOL TAG CONFIG: '[39;49;00m[31m$z[39;49;00m[33m'[39;49;00m$[33m/p' < [39;49;00m[31m$progpath[39;49;00m[33m`[39;49;00m[33m"[39;49;00m
   284		    [31mCC_quoted[39;49;00m=
   285		    [34mfor[39;49;00m arg [34min[39;49;00m [31m$CC[39;49;00m; [34mdo[39;49;00m
   286		    [37m# Double-quote args containing other shell metacharacters.[39;49;00m
   287		    [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   288		      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   289		      [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
   290		      ;;
   291		    [34mesac[39;49;00m
   292		    [31mCC_quoted[39;49;00m=[33m"[39;49;00m[31m$CC_quoted[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   293		  [34mdone[39;49;00m
   294		    [37m# user sometimes does CC=<HOST>-gcc so we need to match that to 'gcc'[39;49;00m
   295		    [31mtrimedcc[39;49;00m=[33m`[39;49;00m[36mecho[39;49;00m [33m${[39;49;00m[31mCC[39;49;00m[33m}[39;49;00m | [31m$SED[39;49;00m -e [33m"[39;49;00m[33ms/[39;49;00m[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m-//g[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
   296		    [37m# and sometimes libtool has CC=<HOST>-gcc but user does CC=gcc[39;49;00m
   297		    [31mextendcc[39;49;00m=[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m-[33m${[39;49;00m[31mCC[39;49;00m[33m}[39;49;00m
   298		    [37m# and sometimes libtool has CC=<OLDHOST>-gcc but user has CC=<NEWHOST>-gcc  [39;49;00m
   299		    [37m# (Gentoo-specific hack because we always export $CHOST)[39;49;00m
   300		    [31mmungedcc[39;49;00m=[33m${[39;49;00m[31mCHOST[39;49;00m-[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m}[39;49;00m-[33m${[39;49;00m[31mtrimedcc[39;49;00m[33m}[39;49;00m
   301		    [34mcase[39;49;00m [33m"[39;49;00m[31m$@[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
   302		      [33m"cc "[39;49;00m* | [33m" cc "[39;49;00m* | [33m"[39;49;00m[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m-cc [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m-cc [39;49;00m[33m"[39;49;00m*|[33m\[39;49;00m
   303		      [33m"gcc "[39;49;00m* | [33m" gcc "[39;49;00m* | [33m"[39;49;00m[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m-gcc [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31mhost[39;49;00m[33m}[39;49;00m[33m-gcc [39;49;00m[33m"[39;49;00m*)
   304		      [31mtagname[39;49;00m=CC
   305		      [36mbreak[39;49;00m ;;
   306		      [33m"[39;49;00m[31m$trimedcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[31m$trimedcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$trimedcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$trimedcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m*|[33m\[39;49;00m
   307		      [33m"[39;49;00m[31m$extendcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[31m$extendcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$extendcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$extendcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m*|[33m\[39;49;00m
   308		      [33m"[39;49;00m[31m$mungedcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[31m$mungedcc[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$mungedcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$mungedcc[39;49;00m[33m` [39;49;00m[33m"[39;49;00m*|[33m\[39;49;00m
   309		      [33m"[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[31m$CC[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[31m$CC_quoted[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m `[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m` [39;49;00m[33m"[39;49;00m* | [33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$CC_quoted[39;49;00m[33m` [39;49;00m[33m"[39;49;00m*)
   310		      [37m# The compiler in the base compile command matches[39;49;00m
   311		      [37m# the one in the tagged configuration.[39;49;00m
   312		      [37m# Assume this is the tagged configuration we want.[39;49;00m
   313		      [31mtagname[39;49;00m=[31m$z[39;49;00m
   314		      [36mbreak[39;49;00m
   315		      ;;
   316		    [34mesac[39;49;00m
   317		  [34mfi[39;49;00m
   318		[34mdone[39;49;00m
   319		[37m# If $tagname still isn't set, then no tagged configuration[39;49;00m
   320		[37m# was found and let the user know that the "--tag" command[39;49;00m
   321		[37m# line option must be used.[39;49;00m
   322		[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$tagname[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   323		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: unable to infer tagged configuration[39;49;00m[33m"[39;49;00m
   324		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: specify a tag with \`--tag'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   325		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   326	[37m#        else[39;49;00m
   327	[37m#          $echo "$modename: using $tagname tagged configuration"[39;49;00m
   328		[34mfi[39;49;00m
   329		;;
   330	      [34mesac[39;49;00m
   331	    [34mfi[39;49;00m
   332	}
   333
   334
   335	[37m# func_extract_an_archive dir oldlib[39;49;00m
   336	func_extract_an_archive ()
   337	{
   338	    [31mf_ex_an_ar_dir[39;49;00m=[33m"[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m; [36mshift[39;49;00m
   339	    [31mf_ex_an_ar_oldlib[39;49;00m=[33m"[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m
   340
   341	    [31m$show[39;49;00m [33m"[39;49;00m[33m(cd [39;49;00m[31m$f_ex_an_ar_dir[39;49;00m[33m && [39;49;00m[31m$AR[39;49;00m[33m x [39;49;00m[31m$f_ex_an_ar_oldlib[39;49;00m[33m)[39;49;00m[33m"[39;49;00m
   342	    [31m$run[39;49;00m [36meval[39;49;00m [33m"[39;49;00m[33m(cd \$f_ex_an_ar_dir && [39;49;00m[31m$AR[39;49;00m[33m x \$f_ex_an_ar_oldlib)[39;49;00m[33m"[39;49;00m || [36mexit[39;49;00m [31m$?[39;49;00m
   343	    [34mif[39;49;00m ([31m$AR[39;49;00m t [33m"[39;49;00m[31m$f_ex_an_ar_oldlib[39;49;00m[33m"[39;49;00m | sort | sort -uc >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m); [34mthen[39;49;00m
   344	     :
   345	    [34melse[39;49;00m
   346	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: ERROR: object name conflicts: [39;49;00m[31m$f_ex_an_ar_dir[39;49;00m[33m/[39;49;00m[31m$f_ex_an_ar_oldlib[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   347	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   348	    [34mfi[39;49;00m
   349	}
   350
   351	[37m# func_extract_archives gentop oldlib ...[39;49;00m
   352	func_extract_archives ()
   353	{
   354	    [31mmy_gentop[39;49;00m=[33m"[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m; [36mshift[39;49;00m
   355	    [31mmy_oldlibs[39;49;00m=[33m${[39;49;00m[31m1[39;49;00m+[33m"[39;49;00m[31m$@[39;49;00m[33m"[39;49;00m[33m}[39;49;00m
   356	    [31mmy_oldobjs[39;49;00m=[33m""[39;49;00m
   357	    [31mmy_xlib[39;49;00m=[33m""[39;49;00m
   358	    [31mmy_xabs[39;49;00m=[33m""[39;49;00m
   359	    [31mmy_xdir[39;49;00m=[33m""[39;49;00m
   360	    [31mmy_status[39;49;00m=[33m""[39;49;00m
   361
   362	    [31m$show[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mrm[39;49;00m[33m}[39;49;00m[33mr [39;49;00m[31m$my_gentop[39;49;00m[33m"[39;49;00m
   363	    [31m$run[39;49;00m [33m${[39;49;00m[31mrm[39;49;00m[33m}[39;49;00mr [33m"[39;49;00m[31m$my_gentop[39;49;00m[33m"[39;49;00m
   364	    [31m$show[39;49;00m [33m"[39;49;00m[31m$mkdir[39;49;00m[33m [39;49;00m[31m$my_gentop[39;49;00m[33m"[39;49;00m
   365	    [31m$run[39;49;00m [31m$mkdir[39;49;00m [33m"[39;49;00m[31m$my_gentop[39;49;00m[33m"[39;49;00m
   366	    [31mmy_status[39;49;00m=[31m$?[39;49;00m
   367	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$my_status[39;49;00m[33m"[39;49;00m -ne [34m0[39;49;00m && [36mtest[39;49;00m ! -d [33m"[39;49;00m[31m$my_gentop[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   368	      [36mexit[39;49;00m [31m$my_status[39;49;00m
   369	    [34mfi[39;49;00m
   370
   371	    [34mfor[39;49;00m my_xlib [34min[39;49;00m [31m$my_oldlibs[39;49;00m; [34mdo[39;49;00m
   372	      [37m# Extract the objects.[39;49;00m
   373	      [34mcase[39;49;00m [31m$my_xlib[39;49;00m [34min[39;49;00m
   374		[[33m\\[39;49;00m/]* | [A-Za-z]:[[33m\\[39;49;00m/]*) [31mmy_xabs[39;49;00m=[33m"[39;49;00m[31m$my_xlib[39;49;00m[33m"[39;49;00m ;;
   375		*) [31mmy_xabs[39;49;00m=[33m`[39;49;00m[36mpwd[39;49;00m[33m`[39;49;00m[33m"[39;49;00m[33m/[39;49;00m[31m$my_xlib[39;49;00m[33m"[39;49;00m ;;
   376	      [34mesac[39;49;00m
   377	      [31mmy_xlib[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$my_xlib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
   378	      [31mmy_xdir[39;49;00m=[33m"[39;49;00m[31m$my_gentop[39;49;00m[33m/[39;49;00m[31m$my_xlib[39;49;00m[33m"[39;49;00m
   379
   380	      [31m$show[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mrm[39;49;00m[33m}[39;49;00m[33mr [39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m
   381	      [31m$run[39;49;00m [33m${[39;49;00m[31mrm[39;49;00m[33m}[39;49;00mr [33m"[39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m
   382	      [31m$show[39;49;00m [33m"[39;49;00m[31m$mkdir[39;49;00m[33m [39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m
   383	      [31m$run[39;49;00m [31m$mkdir[39;49;00m [33m"[39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m
   384	      [31mexit_status[39;49;00m=[31m$?[39;49;00m
   385	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$exit_status[39;49;00m[33m"[39;49;00m -ne [34m0[39;49;00m && [36mtest[39;49;00m ! -d [33m"[39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   386		[36mexit[39;49;00m [31m$exit_status[39;49;00m
   387	      [34mfi[39;49;00m
   388	      [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
   389	      *-darwin*)
   390		[31m$show[39;49;00m [33m"[39;49;00m[33mExtracting [39;49;00m[31m$my_xabs[39;49;00m[33m"[39;49;00m
   391		[37m# Do not bother doing anything if just a dry run[39;49;00m
   392		[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   393		  [31mdarwin_orig_dir[39;49;00m=[33m`[39;49;00m[36mpwd[39;49;00m[33m`[39;49;00m
   394		  [36mcd[39;49;00m [31m$my_xdir[39;49;00m || [36mexit[39;49;00m [31m$?[39;49;00m
   395		  [31mdarwin_archive[39;49;00m=[31m$my_xabs[39;49;00m
   396		  [31mdarwin_curdir[39;49;00m=[33m`[39;49;00m[36mpwd[39;49;00m[33m`[39;49;00m
   397		  [31mdarwin_base_archive[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$darwin_archive[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
   398		  [31mdarwin_arches[39;49;00m=[33m`[39;49;00mlipo -info [33m"[39;49;00m[31m$darwin_archive[39;49;00m[33m"[39;49;00m [34m2[39;49;00m>/dev/null | [31m$EGREP[39;49;00m Architectures [34m2[39;49;00m>/dev/null[33m`[39;49;00m
   399		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$darwin_arches[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   400		    [31mdarwin_arches[39;49;00m=[33m`[39;49;00m[36mecho[39;49;00m [33m"[39;49;00m[31m$darwin_arches[39;49;00m[33m"[39;49;00m | [31m$SED[39;49;00m -e [33m's/.*are://'[39;49;00m[33m`[39;49;00m
   401		    [31mdarwin_arch[39;49;00m=
   402		    [31m$show[39;49;00m [33m"[39;49;00m[31m$darwin_base_archive[39;49;00m[33m has multiple architectures [39;49;00m[31m$darwin_arches[39;49;00m[33m"[39;49;00m
   403		    [34mfor[39;49;00m darwin_arch [34min[39;49;00m  [31m$darwin_arches[39;49;00m ; [34mdo[39;49;00m
   404		      mkdir -p [33m"[39;49;00m[33munfat-[39;49;00m[31m$$[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[33m${[39;49;00m[31mdarwin_arch[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   405		      lipo -thin [31m$darwin_arch[39;49;00m -output [33m"[39;49;00m[33munfat-[39;49;00m[31m$$[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[33m${[39;49;00m[31mdarwin_arch[39;49;00m[33m}[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mdarwin_archive[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   406		      [36mcd[39;49;00m [33m"[39;49;00m[33munfat-[39;49;00m[31m$$[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[33m${[39;49;00m[31mdarwin_arch[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   407		      func_extract_an_archive [33m"`pwd`"[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   408		      [36mcd[39;49;00m [33m"[39;49;00m[31m$darwin_curdir[39;49;00m[33m"[39;49;00m
   409		      [31m$rm[39;49;00m [33m"[39;49;00m[33munfat-[39;49;00m[31m$$[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m-[39;49;00m[33m${[39;49;00m[31mdarwin_arch[39;49;00m[33m}[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31mdarwin_base_archive[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
   410		    [34mdone[39;49;00m [37m# $darwin_arches[39;49;00m
   411	      [37m## Okay now we have a bunch of thin objects, gotta fatten them up :)[39;49;00m
   412		    [31mdarwin_filelist[39;49;00m=[33m`[39;49;00mfind unfat-[31m$$[39;49;00m -type f -name [33m\*[39;49;00m.o -print -o -name [33m\*[39;49;00m.lo -print| xargs basename | sort -u | [31m$NL2SP[39;49;00m[33m`[39;49;00m
   413		    [31mdarwin_file[39;49;00m=
   414		    [31mdarwin_files[39;49;00m=
   415		    [34mfor[39;49;00m darwin_file [34min[39;49;00m [31m$darwin_filelist[39;49;00m; [34mdo[39;49;00m
   416		      [31mdarwin_files[39;49;00m=[33m`[39;49;00mfind unfat-[31m$$[39;49;00m -name [31m$darwin_file[39;49;00m -print | [31m$NL2SP[39;49;00m[33m`[39;49;00m
   417		      lipo -create -output [33m"[39;49;00m[31m$darwin_file[39;49;00m[33m"[39;49;00m [31m$darwin_files[39;49;00m
   418		    [34mdone[39;49;00m [37m# $darwin_filelist[39;49;00m
   419		    [33m${[39;49;00m[31mrm[39;49;00m[33m}[39;49;00mr unfat-[31m$$[39;49;00m
   420		    [36mcd[39;49;00m [33m"[39;49;00m[31m$darwin_orig_dir[39;49;00m[33m"[39;49;00m
   421		  [34melse[39;49;00m
   422		    [36mcd[39;49;00m [33m"[39;49;00m[31m$darwin_orig_dir[39;49;00m[33m"[39;49;00m
   423	 	    func_extract_an_archive [33m"[39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[31m$my_xabs[39;49;00m[33m"[39;49;00m
   424		  [34mfi[39;49;00m [37m# $darwin_arches[39;49;00m
   425		[34mfi[39;49;00m [37m# $run[39;49;00m
   426		;;
   427	      *)
   428	        func_extract_an_archive [33m"[39;49;00m[31m$my_xdir[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[31m$my_xabs[39;49;00m[33m"[39;49;00m
   429	        ;;
   430	      [34mesac[39;49;00m
   431	      [31mmy_oldobjs[39;49;00m=[33m"[39;49;00m[31m$my_oldobjs[39;49;00m[33m [39;49;00m[33m"[39;49;00m[33m`[39;49;00mfind [31m$my_xdir[39;49;00m -name [33m\*[39;49;00m.[31m$objext[39;49;00m -print -o -name [33m\*[39;49;00m.lo -print | [31m$NL2SP[39;49;00m[33m`[39;49;00m
   432	    [34mdone[39;49;00m
   433	    [31mfunc_extract_archives_result[39;49;00m=[33m"[39;49;00m[31m$my_oldobjs[39;49;00m[33m"[39;49;00m
   434	}
   435	[37m# End of Shell function definitions[39;49;00m
   436	[37m#####################################[39;49;00m
   437
   438	[37m# Darwin sucks[39;49;00m
   439	[36meval[39;49;00m [31mstd_shrext[39;49;00m=[33m\"[39;49;00m[31m$shrext_cmds[39;49;00m[33m\"[39;49;00m
   440
   441	[31mdisable_libs[39;49;00m=no
   442
   443	[37m# Parse our command line options once, thoroughly.[39;49;00m
   444	[34mwhile[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$#[39;49;00m[33m"[39;49;00m -gt [34m0[39;49;00m
   445	[34mdo[39;49;00m
   446	  [31marg[39;49;00m=[33m"[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m
   447	  [36mshift[39;49;00m
   448
   449	  [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   450	  -*=*) [31moptarg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/[-_a-zA-Z0-9]*=//'[39;49;00m[33m`[39;49;00m ;;
   451	  *) [31moptarg[39;49;00m= ;;
   452	  [34mesac[39;49;00m
   453
   454	  [37m# If the previous option needs an argument, assign it.[39;49;00m
   455	  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   456	    [34mcase[39;49;00m [31m$prev[39;49;00m [34min[39;49;00m
   457	    execute_dlfiles)
   458	      [31mexecute_dlfiles[39;49;00m=[33m"[39;49;00m[31m$execute_dlfiles[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   459	      ;;
   460	    tag)
   461	      [31mtagname[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   462	      [31mpreserve_args[39;49;00m=[33m"[39;49;00m[33m${[39;49;00m[31mpreserve_args[39;49;00m[33m}[39;49;00m[33m=[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   463
   464	      [37m# Check whether tagname contains only valid characters[39;49;00m
   465	      [34mcase[39;49;00m [31m$tagname[39;49;00m [34min[39;49;00m
   466	      *[!-_A-Za-z0-9,/]*)
   467		[31m$echo[39;49;00m [33m"[39;49;00m[31m$progname[39;49;00m[33m: invalid tag name: [39;49;00m[31m$tagname[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   468		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   469		;;
   470	      [34mesac[39;49;00m
   471
   472	      [34mcase[39;49;00m [31m$tagname[39;49;00m [34min[39;49;00m
   473	      CC)
   474		[37m# Don't test for the "default" C tag, as we know, it's there, but[39;49;00m
   475		[37m# not specially marked.[39;49;00m
   476		;;
   477	      *)
   478		[34mif[39;49;00m grep [33m"[39;49;00m[33m^# ### BEGIN LIBTOOL TAG CONFIG: [39;49;00m[31m$tagname[39;49;00m$[33m"[39;49;00m < [33m"[39;49;00m[31m$progpath[39;49;00m[33m"[39;49;00m > /dev/null; [34mthen[39;49;00m
   479		  [31mtaglist[39;49;00m=[33m"[39;49;00m[31m$taglist[39;49;00m[33m [39;49;00m[31m$tagname[39;49;00m[33m"[39;49;00m
   480		  [37m# Evaluate the configuration.[39;49;00m
   481		  [36meval[39;49;00m [33m"[39;49;00m[33m`[39;49;00m[33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m[33m -n -e '/^# ### BEGIN LIBTOOL TAG CONFIG: '[39;49;00m[31m$tagname[39;49;00m[33m'[39;49;00m$[33m/,/^# ### END LIBTOOL TAG CONFIG: '[39;49;00m[31m$tagname[39;49;00m[33m'[39;49;00m$[33m/p' < [39;49;00m[31m$progpath[39;49;00m[33m`[39;49;00m[33m"[39;49;00m
   482		[34melse[39;49;00m
   483		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$progname[39;49;00m[33m: ignoring unknown tag [39;49;00m[31m$tagname[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   484		[34mfi[39;49;00m
   485		;;
   486	      [34mesac[39;49;00m
   487	      ;;
   488	    *)
   489	      [36meval[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m=\$arg[39;49;00m[33m"[39;49;00m
   490	      ;;
   491	    [34mesac[39;49;00m
   492
   493	    [31mprev[39;49;00m=
   494	    [31mprevopt[39;49;00m=
   495	    [34mcontinue[39;49;00m
   496	  [34mfi[39;49;00m
   497
   498	  [37m# Have we seen a non-optional argument yet?[39;49;00m
   499	  [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   500	  --help)
   501	    [31mshow_help[39;49;00m=yes
   502	    ;;
   503
   504	  --version)
   505	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$PROGRAM[39;49;00m[33m (GNU [39;49;00m[31m$PACKAGE[39;49;00m[33m) [39;49;00m[31m$VERSION[39;49;00m[31m$TIMESTAMP[39;49;00m[33m"[39;49;00m
   506	    [31m$echo[39;49;00m
   507	    [31m$echo[39;49;00m [33m"Copyright (C) 2005  Free Software Foundation, Inc."[39;49;00m
   508	    [31m$echo[39;49;00m [33m"This is free software; see the source for copying conditions.  There is NO"[39;49;00m
   509	    [31m$echo[39;49;00m [33m"warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."[39;49;00m
   510	    [36mexit[39;49;00m [31m$?[39;49;00m
   511	    ;;
   512
   513	  --config)
   514	    [33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m'1,/^# ### BEGIN LIBTOOL CONFIG/d'[39;49;00m -e [33m'/^# ### END LIBTOOL CONFIG/,$d'[39;49;00m [31m$progpath[39;49;00m
   515	    [37m# Now print the configurations for the tags.[39;49;00m
   516	    [34mfor[39;49;00m tagname [34min[39;49;00m [31m$taglist[39;49;00m; [34mdo[39;49;00m
   517	      [33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -n -e [33m"[39;49;00m[33m/^# ### BEGIN LIBTOOL TAG CONFIG: [39;49;00m[31m$tagname[39;49;00m$[33m/,/^# ### END LIBTOOL TAG CONFIG: [39;49;00m[31m$tagname[39;49;00m$[33m/p[39;49;00m[33m"[39;49;00m < [33m"[39;49;00m[31m$progpath[39;49;00m[33m"[39;49;00m
   518	    [34mdone[39;49;00m
   519	    [36mexit[39;49;00m [31m$?[39;49;00m
   520	    ;;
   521
   522	  --debug)
   523	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$progname[39;49;00m[33m: enabling shell trace mode[39;49;00m[33m"[39;49;00m
   524	    [36mset[39;49;00m -x
   525	    [31mpreserve_args[39;49;00m=[33m"[39;49;00m[31m$preserve_args[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   526	    ;;
   527
   528	  --dry-run | -n)
   529	    [31mrun[39;49;00m=:
   530	    ;;
   531
   532	  --features)
   533	    [31m$echo[39;49;00m [33m"[39;49;00m[33mhost: [39;49;00m[31m$host[39;49;00m[33m"[39;49;00m
   534	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
   535	      [31m$echo[39;49;00m [33m"enable shared libraries"[39;49;00m
   536	    [34melse[39;49;00m
   537	      [31m$echo[39;49;00m [33m"disable shared libraries"[39;49;00m
   538	    [34mfi[39;49;00m
   539	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_old_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
   540	      [31m$echo[39;49;00m [33m"enable static libraries"[39;49;00m
   541	    [34melse[39;49;00m
   542	      [31m$echo[39;49;00m [33m"disable static libraries"[39;49;00m
   543	    [34mfi[39;49;00m
   544	    [36mexit[39;49;00m [31m$?[39;49;00m
   545	    ;;
   546
   547	  --finish) [31mmode[39;49;00m=[33m"finish"[39;49;00m ;;
   548
   549	  --mode) [31mprevopt[39;49;00m=[33m"--mode"[39;49;00m [31mprev[39;49;00m=mode ;;
   550	  --mode=*) [31mmode[39;49;00m=[33m"[39;49;00m[31m$optarg[39;49;00m[33m"[39;49;00m ;;
   551
   552	  --preserve-dup-deps) [31mduplicate_deps[39;49;00m=[33m"yes"[39;49;00m ;;
   553
   554	  --quiet | --silent)
   555	    [31mshow[39;49;00m=:
   556	    [31mpreserve_args[39;49;00m=[33m"[39;49;00m[31m$preserve_args[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   557	    ;;
   558
   559	  --tag)
   560	    [31mprevopt[39;49;00m=[33m"--tag"[39;49;00m
   561	    [31mprev[39;49;00m=tag
   562	    [31mpreserve_args[39;49;00m=[33m"[39;49;00m[31m$preserve_args[39;49;00m[33m --tag[39;49;00m[33m"[39;49;00m
   563	    ;;
   564	  --tag=*)
   565	    [36mset[39;49;00m tag [33m"[39;49;00m[31m$optarg[39;49;00m[33m"[39;49;00m [33m${[39;49;00m[31m1[39;49;00m+[33m"[39;49;00m[31m$@[39;49;00m[33m"[39;49;00m[33m}[39;49;00m
   566	    [36mshift[39;49;00m
   567	    [31mprev[39;49;00m=tag
   568	    [31mpreserve_args[39;49;00m=[33m"[39;49;00m[31m$preserve_args[39;49;00m[33m --tag[39;49;00m[33m"[39;49;00m
   569	    ;;
   570
   571	  -dlopen)
   572	    [31mprevopt[39;49;00m=[33m"-dlopen"[39;49;00m
   573	    [31mprev[39;49;00m=execute_dlfiles
   574	    ;;
   575
   576	  -*)
   577	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: unrecognized option \`[39;49;00m[31m$arg[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   578	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   579	    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   580	    ;;
   581
   582	  *)
   583	    [31mnonopt[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   584	    [36mbreak[39;49;00m
   585	    ;;
   586	  [34mesac[39;49;00m
   587	[34mdone[39;49;00m
   588
   589	[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$prevopt[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   590	  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: option \`[39;49;00m[31m$prevopt[39;49;00m[33m' requires an argument[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   591	  [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   592	  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   593	[34mfi[39;49;00m
   594
   595	[34mcase[39;49;00m [31m$disable_libs[39;49;00m [34min[39;49;00m
   596	no)
   597	  ;;
   598	shared)
   599	  [31mbuild_libtool_libs[39;49;00m=no
   600	  [31mbuild_old_libs[39;49;00m=yes
   601	  ;;
   602	static)
   603	  [31mbuild_old_libs[39;49;00m=[33m`[39;49;00m[34mcase[39;49;00m [31m$build_libtool_libs[39;49;00m [34min[39;49;00m yes) [36mecho[39;49;00m no;; *) [36mecho[39;49;00m yes;; [34mesac[39;49;00m[33m`[39;49;00m
   604	  ;;
   605	[34mesac[39;49;00m
   606
   607	[37m# If this variable is set in any of the actions, the command in it[39;49;00m
   608	[37m# will be execed at the end.  This prevents here-documents from being[39;49;00m
   609	[37m# left over by shells.[39;49;00m
   610	[31mexec_cmd[39;49;00m=
   611
   612	[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$show_help[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   613
   614	  [37m# Infer the operation mode.[39;49;00m
   615	  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$mode[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   616	    [31m$echo[39;49;00m [33m"*** Warning: inferring the mode of operation is deprecated."[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   617	    [31m$echo[39;49;00m [33m"*** Future versions of Libtool will require --mode=MODE be specified."[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   618	    [34mcase[39;49;00m [31m$nonopt[39;49;00m [34min[39;49;00m
   619	    *cc | cc* | *++ | gcc* | *-gcc* | g++* | xlc*)
   620	      [31mmode[39;49;00m=link
   621	      [34mfor[39;49;00m arg
   622	      [34mdo[39;49;00m
   623		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   624		-c)
   625		   [31mmode[39;49;00m=compile
   626		   [36mbreak[39;49;00m
   627		   ;;
   628		[34mesac[39;49;00m
   629	      [34mdone[39;49;00m
   630	      ;;
   631	    *db | *dbx | *strace | *truss)
   632	      [31mmode[39;49;00m=execute
   633	      ;;
   634	    *install*|cp|mv)
   635	      [31mmode[39;49;00m=install
   636	      ;;
   637	    *rm)
   638	      [31mmode[39;49;00m=uninstall
   639	      ;;
   640	    *)
   641	      [37m# If we have no mode, but dlfiles were specified, then do execute mode.[39;49;00m
   642	      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$execute_dlfiles[39;49;00m[33m"[39;49;00m && [31mmode[39;49;00m=execute
   643
   644	      [37m# Just use the default operation mode.[39;49;00m
   645	      [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$mode[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   646		[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$nonopt[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   647		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: cannot infer operation mode from \`[39;49;00m[31m$nonopt[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   648		[34melse[39;49;00m
   649		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: cannot infer operation mode without MODE-ARGS[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   650		[34mfi[39;49;00m
   651	      [34mfi[39;49;00m
   652	      ;;
   653	    [34mesac[39;49;00m
   654	  [34mfi[39;49;00m
   655
   656	  [37m# Only execute mode is allowed to have -dlopen flags.[39;49;00m
   657	  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$execute_dlfiles[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m [33m"[39;49;00m[31m$mode[39;49;00m[33m"[39;49;00m != execute; [34mthen[39;49;00m
   658	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: unrecognized option \`-dlopen'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   659	    [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   660	    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   661	  [34mfi[39;49;00m
   662
   663	  [37m# Change the help message to a mode-specific one.[39;49;00m
   664	  [31mgeneric_help[39;49;00m=[33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m
   665	  [31mhelp[39;49;00m=[33m"[39;49;00m[33mTry \`[39;49;00m[31m$modename[39;49;00m[33m --help --mode=[39;49;00m[31m$mode[39;49;00m[33m' for more information.[39;49;00m[33m"[39;49;00m
   666
   667	  [37m# These modes are in order of execution frequency so that they run quickly.[39;49;00m
   668	  [34mcase[39;49;00m [31m$mode[39;49;00m [34min[39;49;00m
   669	  [37m# libtool compile mode[39;49;00m
   670	  compile)
   671	    [31mmodename[39;49;00m=[33m"[39;49;00m[31m$modename[39;49;00m[33m: compile[39;49;00m[33m"[39;49;00m
   672	    [37m# Get the compilation command and the source file.[39;49;00m
   673	    [31mbase_compile[39;49;00m=
   674	    [31msrcfile[39;49;00m=[33m"[39;49;00m[31m$nonopt[39;49;00m[33m"[39;49;00m  [37m#  always keep a non-empty value in "srcfile"[39;49;00m
   675	    [31msuppress_opt[39;49;00m=yes
   676	    [31msuppress_output[39;49;00m=
   677	    [31marg_mode[39;49;00m=normal
   678	    [31mlibobj[39;49;00m=
   679	    [31mlater[39;49;00m=
   680
   681	    [34mfor[39;49;00m arg
   682	    [34mdo[39;49;00m
   683	      [34mcase[39;49;00m [31m$arg_mode[39;49;00m [34min[39;49;00m
   684	      arg  )
   685		[37m# do not "continue".  Instead, add this to base_compile[39;49;00m
   686		[31mlastarg[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   687		[31marg_mode[39;49;00m=normal
   688		;;
   689
   690	      target )
   691		[31mlibobj[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   692		[31marg_mode[39;49;00m=normal
   693		[34mcontinue[39;49;00m
   694		;;
   695
   696	      normal )
   697		[37m# Accept any command-line options.[39;49;00m
   698		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   699		-o)
   700		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m
   701		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: you cannot specify \`-o' more than once[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   702		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   703		  [34mfi[39;49;00m
   704		  [31marg_mode[39;49;00m=target
   705		  [34mcontinue[39;49;00m
   706		  ;;
   707
   708		-static | -prefer-pic | -prefer-non-pic)
   709		  [31mlater[39;49;00m=[33m"[39;49;00m[31m$later[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   710		  [34mcontinue[39;49;00m
   711		  ;;
   712
   713		-no-suppress)
   714		  [31msuppress_opt[39;49;00m=no
   715		  [34mcontinue[39;49;00m
   716		  ;;
   717
   718		-Xcompiler)
   719		  [31marg_mode[39;49;00m=arg  [37m#  the next one goes into the "base_compile" arg list[39;49;00m
   720		  [34mcontinue[39;49;00m      [37m#  The current "srcfile" will either be retained or[39;49;00m
   721		  ;;            [37m#  replaced later.  I would guess that would be a bug.[39;49;00m
   722
   723		-Wc,*)
   724		  [31margs[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"s/^-Wc,//"[39;49;00m[33m`[39;49;00m
   725		  [31mlastarg[39;49;00m=
   726		  [31msave_ifs[39;49;00m=[33m"[39;49;00m[31m$IFS[39;49;00m[33m"[39;49;00m; [31mIFS[39;49;00m=[33m','[39;49;00m
   727	 	  [34mfor[39;49;00m arg [34min[39;49;00m [31m$args[39;49;00m; [34mdo[39;49;00m
   728		    [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
   729
   730		    [37m# Double-quote args containing other shell metacharacters.[39;49;00m
   731		    [37m# Many Bourne shells cannot handle close brackets correctly[39;49;00m
   732		    [37m# in scan sets, so we specify it separately.[39;49;00m
   733		    [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   734		      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   735		      [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
   736		      ;;
   737		    [34mesac[39;49;00m
   738		    [31mlastarg[39;49;00m=[33m"[39;49;00m[31m$lastarg[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   739		  [34mdone[39;49;00m
   740		  [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
   741		  [31mlastarg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$lastarg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"s/^ //"[39;49;00m[33m`[39;49;00m
   742
   743		  [37m# Add the arguments to base_compile.[39;49;00m
   744		  [31mbase_compile[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$lastarg[39;49;00m[33m"[39;49;00m
   745		  [34mcontinue[39;49;00m
   746		  ;;
   747
   748		* )
   749		  [37m# Accept the current argument as the source file.[39;49;00m
   750		  [37m# The previous "srcfile" becomes the current argument.[39;49;00m
   751		  [37m#[39;49;00m
   752		  [31mlastarg[39;49;00m=[33m"[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m
   753		  [31msrcfile[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
   754		  ;;
   755		[34mesac[39;49;00m  [37m#  case $arg[39;49;00m
   756		;;
   757	      [34mesac[39;49;00m    [37m#  case $arg_mode[39;49;00m
   758
   759	      [37m# Aesthetically quote the previous argument.[39;49;00m
   760	      [31mlastarg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$lastarg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
   761
   762	      [34mcase[39;49;00m [31m$lastarg[39;49;00m [34min[39;49;00m
   763	      [37m# Double-quote args containing other shell metacharacters.[39;49;00m
   764	      [37m# Many Bourne shells cannot handle close brackets correctly[39;49;00m
   765	      [37m# in scan sets, and some SunOS ksh mistreat backslash-escaping[39;49;00m
   766	      [37m# in scan sets (worked around with variable expansion),[39;49;00m
   767	      [37m# and furthermore cannot handle '|' '&' '(' ')' in scan sets [39;49;00m
   768	      [37m# at all, so we specify them separately.[39;49;00m
   769	      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   770		[31mlastarg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$lastarg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
   771		;;
   772	      [34mesac[39;49;00m
   773
   774	      [31mbase_compile[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$lastarg[39;49;00m[33m"[39;49;00m
   775	    [34mdone[39;49;00m [37m# for arg[39;49;00m
   776
   777	    [34mcase[39;49;00m [31m$arg_mode[39;49;00m [34min[39;49;00m
   778	    arg)
   779	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: you must specify an argument for -Xcompile[39;49;00m[33m"[39;49;00m
   780	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   781	      ;;
   782	    target)
   783	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: you must specify a target with \`-o'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   784	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   785	      ;;
   786	    *)
   787	      [37m# Get the name of the library object.[39;49;00m
   788	      [ -z [33m"[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m ] && [31mlibobj[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
   789	      ;;
   790	    [34mesac[39;49;00m
   791
   792	    [37m# Recognize several different file suffixes.[39;49;00m
   793	    [37m# If the user specifies -o file.o, it is replaced with file.lo[39;49;00m
   794	    [31mxform[39;49;00m=[33m'[cCFSifmso]'[39;49;00m
   795	    [34mcase[39;49;00m [31m$libobj[39;49;00m [34min[39;49;00m
   796	    *.ada) [31mxform[39;49;00m=ada ;;
   797	    *.adb) [31mxform[39;49;00m=adb ;;
   798	    *.ads) [31mxform[39;49;00m=ads ;;
   799	    *.asm) [31mxform[39;49;00m=asm ;;
   800	    *.c++) [31mxform[39;49;00m=c++ ;;
   801	    *.cc) [31mxform[39;49;00m=cc ;;
   802	    *.ii) [31mxform[39;49;00m=ii ;;
   803	    *.class) [31mxform[39;49;00m=class ;;
   804	    *.cpp) [31mxform[39;49;00m=cpp ;;
   805	    *.cxx) [31mxform[39;49;00m=cxx ;;
   806	    *.f90) [31mxform[39;49;00m=f90 ;;
   807	    *.for) [31mxform[39;49;00m=[34mfor[39;49;00m ;;
   808	    *.java) [31mxform[39;49;00m=java ;;
   809	    [34mesac[39;49;00m
   810
   811	    [31mlibobj[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[33ms/\.[39;49;00m[31m$xform[39;49;00m$[33m/.lo/[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
   812
   813	    [34mcase[39;49;00m [31m$libobj[39;49;00m [34min[39;49;00m
   814	    *.lo) [31mobj[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$lo2o[39;49;00m[33m"[39;49;00m[33m`[39;49;00m ;;
   815	    *)
   816	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot determine name of library object from \`[39;49;00m[31m$libobj[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   817	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   818	      ;;
   819	    [34mesac[39;49;00m
   820
   821	    func_infer_tag [31m$base_compile[39;49;00m
   822
   823	    [34mfor[39;49;00m arg [34min[39;49;00m [31m$later[39;49;00m; [34mdo[39;49;00m
   824	      [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
   825	      -static)
   826		[31mbuild_old_libs[39;49;00m=yes
   827		[34mcontinue[39;49;00m
   828		;;
   829
   830	      -prefer-pic)
   831		[31mpic_mode[39;49;00m=yes
   832		[34mcontinue[39;49;00m
   833		;;
   834
   835	      -prefer-non-pic)
   836		[31mpic_mode[39;49;00m=no
   837		[34mcontinue[39;49;00m
   838		;;
   839	      [34mesac[39;49;00m
   840	    [34mdone[39;49;00m
   841
   842	    [31mqlibobj[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
   843	    [34mcase[39;49;00m [31m$qlibobj[39;49;00m [34min[39;49;00m
   844	      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   845		[31mqlibobj[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$qlibobj[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m ;;
   846	    [34mesac[39;49;00m
   847	    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m != [33m"[39;49;00m[33mX[39;49;00m[31m$qlibobj[39;49;00m[33m"[39;49;00m [33m\[39;49;00m
   848		&& [31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m | grep [33m'[]~#^*{};<>?"'[39;49;00m[33m"'"[39;49;00m[33m' 	&()|`$[]'[39;49;00m [33m\[39;49;00m
   849		&& [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: libobj name \`[39;49;00m[31m$libobj[39;49;00m[33m' may not contain shell special characters.[39;49;00m[33m"[39;49;00m
   850	    [31mobjname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
   851	    [31mxdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
   852	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$xdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   853	      [31mxdir[39;49;00m=
   854	    [34melse[39;49;00m
   855	      [31mxdir[39;49;00m=[31m$xdir[39;49;00m/
   856	    [34mfi[39;49;00m
   857	    [31mlobj[39;49;00m=[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[31m$objdir[39;49;00m/[31m$objname[39;49;00m
   858
   859	    [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$base_compile[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   860	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: you must specify a compilation command[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   861	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
   862	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   863	    [34mfi[39;49;00m
   864
   865	    [37m# Delete any leftover library objects.[39;49;00m
   866	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_old_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
   867	      [31mremovelist[39;49;00m=[33m"[39;49;00m[31m$obj[39;49;00m[33m [39;49;00m[31m$lobj[39;49;00m[33m [39;49;00m[31m$libobj[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00m[33mT[39;49;00m[33m"[39;49;00m
   868	    [34melse[39;49;00m
   869	      [31mremovelist[39;49;00m=[33m"[39;49;00m[31m$lobj[39;49;00m[33m [39;49;00m[31m$libobj[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00m[33mT[39;49;00m[33m"[39;49;00m
   870	    [34mfi[39;49;00m
   871
   872	    [31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
   873	    [36mtrap[39;49;00m [33m"[39;49;00m[31m$run[39;49;00m[33m [39;49;00m[31m$rm[39;49;00m[33m [39;49;00m[31m$removelist[39;49;00m[33m; exit [39;49;00m[31m$EXIT_FAILURE[39;49;00m[33m"[39;49;00m [34m1[39;49;00m [34m2[39;49;00m [34m15[39;49;00m
   874
   875	    [37m# On Cygwin there's no "real" PIC flag so we must build both object types[39;49;00m
   876	    [34mcase[39;49;00m [31m$host_os[39;49;00m [34min[39;49;00m
   877	    cygwin* | mingw* | pw32* | os2*)
   878	      [31mpic_mode[39;49;00m=default
   879	      ;;
   880	    [34mesac[39;49;00m
   881	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_mode[39;49;00m[33m"[39;49;00m = no && [36mtest[39;49;00m [33m"[39;49;00m[31m$deplibs_check_method[39;49;00m[33m"[39;49;00m != pass_all; [34mthen[39;49;00m
   882	      [37m# non-PIC code in shared libraries is not supported[39;49;00m
   883	      [31mpic_mode[39;49;00m=default
   884	    [34mfi[39;49;00m
   885
   886	    [37m# Calculate the filename of the output object if compiler does[39;49;00m
   887	    [37m# not support -o with -c[39;49;00m
   888	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$compiler_c_o[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
   889	      [31moutput_obj[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m -e [33m's%\.[^.]*$%%'[39;49;00m[33m`[39;49;00m.[33m${[39;49;00m[31mobjext[39;49;00m[33m}[39;49;00m
   890	      [31mlockfile[39;49;00m=[33m"[39;49;00m[31m$output_obj[39;49;00m[33m.lock[39;49;00m[33m"[39;49;00m
   891	      [31mremovelist[39;49;00m=[33m"[39;49;00m[31m$removelist[39;49;00m[33m [39;49;00m[31m$output_obj[39;49;00m[33m [39;49;00m[31m$lockfile[39;49;00m[33m"[39;49;00m
   892	      [36mtrap[39;49;00m [33m"[39;49;00m[31m$run[39;49;00m[33m [39;49;00m[31m$rm[39;49;00m[33m [39;49;00m[31m$removelist[39;49;00m[33m; exit [39;49;00m[31m$EXIT_FAILURE[39;49;00m[33m"[39;49;00m [34m1[39;49;00m [34m2[39;49;00m [34m15[39;49;00m
   893	    [34melse[39;49;00m
   894	      [31moutput_obj[39;49;00m=
   895	      [31mneed_locks[39;49;00m=no
   896	      [31mlockfile[39;49;00m=
   897	    [34mfi[39;49;00m
   898
   899	    [37m# Lock this critical section if it is needed[39;49;00m
   900	    [37m# We use this script file to make the link, it avoids creating a new file[39;49;00m
   901	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$need_locks[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
   902	      [34muntil[39;49;00m [31m$run[39;49;00m ln [33m"[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[31m$lockfile[39;49;00m[33m"[39;49;00m [34m2[39;49;00m>/dev/null; [34mdo[39;49;00m
   903		[31m$show[39;49;00m [33m"[39;49;00m[33mWaiting for [39;49;00m[31m$lockfile[39;49;00m[33m to be removed[39;49;00m[33m"[39;49;00m
   904		sleep [34m2[39;49;00m
   905	      [34mdone[39;49;00m
   906	    [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$need_locks[39;49;00m[33m"[39;49;00m = warn; [34mthen[39;49;00m
   907	      [34mif[39;49;00m [36mtest[39;49;00m -f [33m"[39;49;00m[31m$lockfile[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   908		[31m$echo[39;49;00m [33m"[39;49;00m[33m\[39;49;00m
   909	[33m*** ERROR, [39;49;00m[31m$lockfile[39;49;00m[33m exists and contains:[39;49;00m
   910	[33m`cat [39;49;00m[31m$lockfile[39;49;00m[33m 2>/dev/null`[39;49;00m
   911	[33m[39;49;00m
   912	[33mThis indicates that another process is trying to use the same[39;49;00m
   913	[33mtemporary object file, and libtool could not work around it because[39;49;00m
   914	[33myour compiler does not support \`-c' and \`-o' together.  If you[39;49;00m
   915	[33mrepeat this compilation, it may succeed, by chance, but you had better[39;49;00m
   916	[33mavoid parallel builds (make -j) in this platform, or get a better[39;49;00m
   917	[33mcompiler.[39;49;00m[33m"[39;49;00m
   918
   919		[31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
   920		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   921	      [34mfi[39;49;00m
   922	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m > [33m"[39;49;00m[31m$lockfile[39;49;00m[33m"[39;49;00m
   923	    [34mfi[39;49;00m
   924
   925	    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$fix_srcfile_path[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   926	      [36meval[39;49;00m [31msrcfile[39;49;00m=[33m\"[39;49;00m[31m$fix_srcfile_path[39;49;00m[33m\"[39;49;00m
   927	    [34mfi[39;49;00m
   928	    [31mqsrcfile[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
   929	    [34mcase[39;49;00m [31m$qsrcfile[39;49;00m [34min[39;49;00m
   930	      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
   931	      [31mqsrcfile[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$qsrcfile[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m ;;
   932	    [34mesac[39;49;00m
   933
   934	    [31m$run[39;49;00m [31m$rm[39;49;00m [33m"[39;49;00m[31m$libobj[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00m[33mT[39;49;00m[33m"[39;49;00m
   935
   936	    [37m# Create a libtool object file (analogous to a ".la" file),[39;49;00m
   937	    [37m# but don't create it if we're doing a dry run.[39;49;00m
   938	    [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m && cat > [33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00mT [33m<<EOF[39;49;00m
   939	[33m# $libobj - a libtool object file[39;49;00m
   940	[33m# Generated by $PROGRAM - GNU $PACKAGE $VERSION$TIMESTAMP[39;49;00m
   941	[33m#[39;49;00m
   942	[33m# Please DO NOT delete this file![39;49;00m
   943	[33m# It is necessary for linking the library.[39;49;00m
   944	[33m[39;49;00m
   945	[33m# Name of the PIC object.[39;49;00m
   946	[33mEOF[39;49;00m
   947
   948	    [37m# Only build a PIC object if we are building libtool libraries.[39;49;00m
   949	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
   950	      [37m# Without this assignment, base_compile gets emptied.[39;49;00m
   951	      [31mfbsd_hideous_sh_bug[39;49;00m=[31m$base_compile[39;49;00m
   952
   953	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_mode[39;49;00m[33m"[39;49;00m != no; [34mthen[39;49;00m
   954		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$qsrcfile[39;49;00m[33m [39;49;00m[31m$pic_flag[39;49;00m[33m"[39;49;00m
   955	      [34melse[39;49;00m
   956		[37m# Don't build PIC code[39;49;00m
   957		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$qsrcfile[39;49;00m[33m"[39;49;00m
   958	      [34mfi[39;49;00m
   959
   960	      [34mif[39;49;00m [36mtest[39;49;00m ! -d [33m"[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   961		[31m$show[39;49;00m [33m"[39;49;00m[31m$mkdir[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m
   962		[31m$run[39;49;00m [31m$mkdir[39;49;00m [33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[31m$objdir[39;49;00m
   963		[31mexit_status[39;49;00m=[31m$?[39;49;00m
   964		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$exit_status[39;49;00m[33m"[39;49;00m -ne [34m0[39;49;00m && [36mtest[39;49;00m ! -d [33m"[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   965		  [36mexit[39;49;00m [31m$exit_status[39;49;00m
   966		[34mfi[39;49;00m
   967	      [34mfi[39;49;00m
   968
   969	      [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   970		[37m# Place PIC objects in $objdir[39;49;00m
   971		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$command[39;49;00m[33m -o [39;49;00m[31m$lobj[39;49;00m[33m"[39;49;00m
   972	      [34mfi[39;49;00m
   973
   974	      [31m$run[39;49;00m [31m$rm[39;49;00m [33m"[39;49;00m[31m$lobj[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m
   975
   976	      [31m$show[39;49;00m [33m"[39;49;00m[31m$command[39;49;00m[33m"[39;49;00m
   977	      [34mif[39;49;00m [31m$run[39;49;00m [36meval[39;49;00m [33m"[39;49;00m[31m$command[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m :
   978	      [34melse[39;49;00m
   979		[36mtest[39;49;00m -n [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m && [31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
   980		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
   981	      [34mfi[39;49;00m
   982
   983	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$need_locks[39;49;00m[33m"[39;49;00m = warn &&
   984		 [36mtest[39;49;00m [33m"[39;49;00m[33mX`cat [39;49;00m[31m$lockfile[39;49;00m[33m 2>/dev/null`[39;49;00m[33m"[39;49;00m != [33m"[39;49;00m[33mX[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
   985		[31m$echo[39;49;00m [33m"[39;49;00m[33m\[39;49;00m
   986	[33m*** ERROR, [39;49;00m[31m$lockfile[39;49;00m[33m contains:[39;49;00m
   987	[33m`cat [39;49;00m[31m$lockfile[39;49;00m[33m 2>/dev/null`[39;49;00m
   988	[33m[39;49;00m
   989	[33mbut it should contain:[39;49;00m
   990	[31m$srcfile[39;49;00m[33m[39;49;00m
   991	[33m[39;49;00m
   992	[33mThis indicates that another process is trying to use the same[39;49;00m
   993	[33mtemporary object file, and libtool could not work around it because[39;49;00m
   994	[33myour compiler does not support \`-c' and \`-o' together.  If you[39;49;00m
   995	[33mrepeat this compilation, it may succeed, by chance, but you had better[39;49;00m
   996	[33mavoid parallel builds (make -j) in this platform, or get a better[39;49;00m
   997	[33mcompiler.[39;49;00m[33m"[39;49;00m
   998
   999		[31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
  1000		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1001	      [34mfi[39;49;00m
  1002
  1003	      [37m# Just move the object if needed, then go on to compile the next one[39;49;00m
  1004	      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m != [33m"[39;49;00m[33mX[39;49;00m[31m$lobj[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1005		[31m$show[39;49;00m [33m"[39;49;00m[31m$mv[39;49;00m[33m [39;49;00m[31m$output_obj[39;49;00m[33m [39;49;00m[31m$lobj[39;49;00m[33m"[39;49;00m
  1006		[34mif[39;49;00m [31m$run[39;49;00m [31m$mv[39;49;00m [31m$output_obj[39;49;00m [31m$lobj[39;49;00m; [34mthen[39;49;00m :
  1007		[34melse[39;49;00m
  1008		  [31merror[39;49;00m=[31m$?[39;49;00m
  1009		  [31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
  1010		  [36mexit[39;49;00m [31m$error[39;49;00m
  1011		[34mfi[39;49;00m
  1012	      [34mfi[39;49;00m
  1013
  1014	      [37m# Append the name of the PIC object to the libtool object file.[39;49;00m
  1015	      [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m && cat >> [33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00mT [33m<<EOF[39;49;00m
  1016	[33mpic_object='$objdir/$objname'[39;49;00m
  1017	[33m[39;49;00m
  1018	[33mEOF[39;49;00m
  1019
  1020	      [37m# Allow error messages only from the first compilation.[39;49;00m
  1021	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$suppress_opt[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  1022	        [31msuppress_output[39;49;00m=[33m' >/dev/null 2>&1'[39;49;00m
  1023	      [34mfi[39;49;00m
  1024	    [34melse[39;49;00m
  1025	      [37m# No PIC object so indicate it doesn't exist in the libtool[39;49;00m
  1026	      [37m# object file.[39;49;00m
  1027	      [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m && cat >> [33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00mT [33m<<EOF[39;49;00m
  1028	[33mpic_object=none[39;49;00m
  1029	[33m[39;49;00m
  1030	[33mEOF[39;49;00m
  1031	    [34mfi[39;49;00m
  1032
  1033	    [37m# Only build a position-dependent object if we build old libraries.[39;49;00m
  1034	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_old_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  1035	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_mode[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
  1036		[37m# Don't build PIC code[39;49;00m
  1037		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$qsrcfile[39;49;00m[33m"[39;49;00m
  1038	      [34melse[39;49;00m
  1039		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$base_compile[39;49;00m[33m [39;49;00m[31m$qsrcfile[39;49;00m[33m [39;49;00m[31m$pic_flag[39;49;00m[33m"[39;49;00m
  1040	      [34mfi[39;49;00m
  1041	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$compiler_c_o[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  1042		[31mcommand[39;49;00m=[33m"[39;49;00m[31m$command[39;49;00m[33m -o [39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m
  1043	      [34mfi[39;49;00m
  1044
  1045	      [37m# Suppress compiler output if we already did a PIC compilation.[39;49;00m
  1046	      [31mcommand[39;49;00m=[33m"[39;49;00m[31m$command[39;49;00m[31m$suppress_output[39;49;00m[33m"[39;49;00m
  1047	      [31m$run[39;49;00m [31m$rm[39;49;00m [33m"[39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m
  1048	      [31m$show[39;49;00m [33m"[39;49;00m[31m$command[39;49;00m[33m"[39;49;00m
  1049	      [34mif[39;49;00m [31m$run[39;49;00m [36meval[39;49;00m [33m"[39;49;00m[31m$command[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m :
  1050	      [34melse[39;49;00m
  1051		[31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
  1052		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1053	      [34mfi[39;49;00m
  1054
  1055	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$need_locks[39;49;00m[33m"[39;49;00m = warn &&
  1056		 [36mtest[39;49;00m [33m"[39;49;00m[33mX`cat [39;49;00m[31m$lockfile[39;49;00m[33m 2>/dev/null`[39;49;00m[33m"[39;49;00m != [33m"[39;49;00m[33mX[39;49;00m[31m$srcfile[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1057		[31m$echo[39;49;00m [33m"[39;49;00m[33m\[39;49;00m
  1058	[33m*** ERROR, [39;49;00m[31m$lockfile[39;49;00m[33m contains:[39;49;00m
  1059	[33m`cat [39;49;00m[31m$lockfile[39;49;00m[33m 2>/dev/null`[39;49;00m
  1060	[33m[39;49;00m
  1061	[33mbut it should contain:[39;49;00m
  1062	[31m$srcfile[39;49;00m[33m[39;49;00m
  1063	[33m[39;49;00m
  1064	[33mThis indicates that another process is trying to use the same[39;49;00m
  1065	[33mtemporary object file, and libtool could not work around it because[39;49;00m
  1066	[33myour compiler does not support \`-c' and \`-o' together.  If you[39;49;00m
  1067	[33mrepeat this compilation, it may succeed, by chance, but you had better[39;49;00m
  1068	[33mavoid parallel builds (make -j) in this platform, or get a better[39;49;00m
  1069	[33mcompiler.[39;49;00m[33m"[39;49;00m
  1070
  1071		[31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
  1072		[36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1073	      [34mfi[39;49;00m
  1074
  1075	      [37m# Just move the object if needed[39;49;00m
  1076	      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$output_obj[39;49;00m[33m"[39;49;00m != [33m"[39;49;00m[33mX[39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1077		[31m$show[39;49;00m [33m"[39;49;00m[31m$mv[39;49;00m[33m [39;49;00m[31m$output_obj[39;49;00m[33m [39;49;00m[31m$obj[39;49;00m[33m"[39;49;00m
  1078		[34mif[39;49;00m [31m$run[39;49;00m [31m$mv[39;49;00m [31m$output_obj[39;49;00m [31m$obj[39;49;00m; [34mthen[39;49;00m :
  1079		[34melse[39;49;00m
  1080		  [31merror[39;49;00m=[31m$?[39;49;00m
  1081		  [31m$run[39;49;00m [31m$rm[39;49;00m [31m$removelist[39;49;00m
  1082		  [36mexit[39;49;00m [31m$error[39;49;00m
  1083		[34mfi[39;49;00m
  1084	      [34mfi[39;49;00m
  1085
  1086	      [37m# Append the name of the non-PIC object the libtool object file.[39;49;00m
  1087	      [37m# Only append if the libtool object file exists.[39;49;00m
  1088	      [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m && cat >> [33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00mT [33m<<EOF[39;49;00m
  1089	[33m# Name of the non-PIC object.[39;49;00m
  1090	[33mnon_pic_object='$objname'[39;49;00m
  1091	[33m[39;49;00m
  1092	[33mEOF[39;49;00m
  1093	    [34melse[39;49;00m
  1094	      [37m# Append the name of the non-PIC object the libtool object file.[39;49;00m
  1095	      [37m# Only append if the libtool object file exists.[39;49;00m
  1096	      [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m && cat >> [33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00mT [33m<<EOF[39;49;00m
  1097	[33m# Name of the non-PIC object.[39;49;00m
  1098	[33mnon_pic_object=none[39;49;00m
  1099	[33m[39;49;00m
  1100	[33mEOF[39;49;00m
  1101	    [34mfi[39;49;00m
  1102
  1103	    [31m$run[39;49;00m [31m$mv[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00m[33mT[39;49;00m[33m"[39;49;00m [33m"[39;49;00m[33m${[39;49;00m[31mlibobj[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
  1104
  1105	    [37m# Unlock the critical section if it was locked[39;49;00m
  1106	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$need_locks[39;49;00m[33m"[39;49;00m != no; [34mthen[39;49;00m
  1107	      [31m$run[39;49;00m [31m$rm[39;49;00m [33m"[39;49;00m[31m$lockfile[39;49;00m[33m"[39;49;00m
  1108	    [34mfi[39;49;00m
  1109
  1110	    [36mexit[39;49;00m [31m$EXIT_SUCCESS[39;49;00m
  1111	    ;;
  1112
  1113	  [37m# libtool link mode[39;49;00m
  1114	  link | relink)
  1115	    [31mmodename[39;49;00m=[33m"[39;49;00m[31m$modename[39;49;00m[33m: link[39;49;00m[33m"[39;49;00m
  1116	    [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  1117	    *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
  1118	      [37m# It is impossible to link a dll without this setting, and[39;49;00m
  1119	      [37m# we shouldn't force the makefile maintainer to figure out[39;49;00m
  1120	      [37m# which system we are compiling for in order to pass an extra[39;49;00m
  1121	      [37m# flag for every libtool invocation.[39;49;00m
  1122	      [37m# allow_undefined=no[39;49;00m
  1123
  1124	      [37m# FIXME: Unfortunately, there are problems with the above when trying[39;49;00m
  1125	      [37m# to make a dll which has undefined symbols, in which case not[39;49;00m
  1126	      [37m# even a static library is built.  For now, we need to specify[39;49;00m
  1127	      [37m# -no-undefined on the libtool link line when we can be certain[39;49;00m
  1128	      [37m# that all symbols are satisfied, otherwise we get a static library.[39;49;00m
  1129	      [31mallow_undefined[39;49;00m=yes
  1130	      ;;
  1131	    *)
  1132	      [31mallow_undefined[39;49;00m=yes
  1133	      ;;
  1134	    [34mesac[39;49;00m
  1135	    [31mlibtool_args[39;49;00m=[33m"[39;49;00m[31m$nonopt[39;49;00m[33m"[39;49;00m
  1136	    [31mbase_compile[39;49;00m=[33m"[39;49;00m[31m$nonopt[39;49;00m[33m [39;49;00m[31m$@[39;49;00m[33m"[39;49;00m
  1137	    [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$nonopt[39;49;00m[33m"[39;49;00m
  1138	    [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$nonopt[39;49;00m[33m"[39;49;00m
  1139
  1140	    [31mcompile_rpath[39;49;00m=
  1141	    [31mfinalize_rpath[39;49;00m=
  1142	    [31mcompile_shlibpath[39;49;00m=
  1143	    [31mfinalize_shlibpath[39;49;00m=
  1144	    [31mconvenience[39;49;00m=
  1145	    [31mold_convenience[39;49;00m=
  1146	    [31mdeplibs[39;49;00m=
  1147	    [31mold_deplibs[39;49;00m=
  1148	    [31mcompiler_flags[39;49;00m=
  1149	    [31mlinker_flags[39;49;00m=
  1150	    [31mdllsearchpath[39;49;00m=
  1151	    [31mlib_search_path[39;49;00m=[33m`[39;49;00m[36mpwd[39;49;00m[33m`[39;49;00m
  1152	    [31minst_prefix_dir[39;49;00m=
  1153
  1154	    [31mavoid_version[39;49;00m=no
  1155	    [31mdlfiles[39;49;00m=
  1156	    [31mdlprefiles[39;49;00m=
  1157	    [31mdlself[39;49;00m=no
  1158	    [31mexport_dynamic[39;49;00m=no
  1159	    [31mexport_symbols[39;49;00m=
  1160	    [31mexport_symbols_regex[39;49;00m=
  1161	    [31mgenerated[39;49;00m=
  1162	    [31mlibobjs[39;49;00m=
  1163	    [31mltlibs[39;49;00m=
  1164	    [31mmodule[39;49;00m=no
  1165	    [31mno_install[39;49;00m=no
  1166	    [31mobjs[39;49;00m=
  1167	    [31mnon_pic_objects[39;49;00m=
  1168	    [31mnotinst_path[39;49;00m= [37m# paths that contain not-installed libtool libraries[39;49;00m
  1169	    [31mprecious_files_regex[39;49;00m=
  1170	    [31mprefer_static_libs[39;49;00m=no
  1171	    [31mpreload[39;49;00m=no
  1172	    [31mprev[39;49;00m=
  1173	    [31mprevarg[39;49;00m=
  1174	    [31mrelease[39;49;00m=
  1175	    [31mrpath[39;49;00m=
  1176	    [31mxrpath[39;49;00m=
  1177	    [31mperm_rpath[39;49;00m=
  1178	    [31mtemp_rpath[39;49;00m=
  1179	    [31mthread_safe[39;49;00m=no
  1180	    [31mvinfo[39;49;00m=
  1181	    [31mvinfo_number[39;49;00m=no
  1182
  1183	    func_infer_tag [31m$base_compile[39;49;00m
  1184
  1185	    [37m# We need to know -static, to get the right output filenames.[39;49;00m
  1186	    [34mfor[39;49;00m arg
  1187	    [34mdo[39;49;00m
  1188	      [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1189	      -all-static | -static)
  1190		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-all-static"[39;49;00m; [34mthen[39;49;00m
  1191		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes && [36mtest[39;49;00m -z [33m"[39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1192		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: complete static linking is impossible in this configuration[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1193		  [34mfi[39;49;00m
  1194		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1195		    [31mdlopen_self[39;49;00m=[31m$dlopen_self_static[39;49;00m
  1196		  [34mfi[39;49;00m
  1197		  [31mprefer_static_libs[39;49;00m=yes
  1198		[34melse[39;49;00m
  1199		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$pic_flag[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m -n [33m"[39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1200		    [31mdlopen_self[39;49;00m=[31m$dlopen_self_static[39;49;00m
  1201		  [34mfi[39;49;00m
  1202		  [31mprefer_static_libs[39;49;00m=built
  1203		[34mfi[39;49;00m
  1204		[31mbuild_libtool_libs[39;49;00m=no
  1205		[31mbuild_old_libs[39;49;00m=yes
  1206		[36mbreak[39;49;00m
  1207		;;
  1208	      [34mesac[39;49;00m
  1209	    [34mdone[39;49;00m
  1210
  1211	    [37m# See if our shared archives depend on static archives.[39;49;00m
  1212	    [36mtest[39;49;00m -n [33m"[39;49;00m[31m$old_archive_from_new_cmds[39;49;00m[33m"[39;49;00m && [31mbuild_old_libs[39;49;00m=yes
  1213
  1214	    [37m# Go through the arguments, transforming them on the way.[39;49;00m
  1215	    [34mwhile[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$#[39;49;00m[33m"[39;49;00m -gt [34m0[39;49;00m; [34mdo[39;49;00m
  1216	      [31marg[39;49;00m=[33m"[39;49;00m[31m$1[39;49;00m[33m"[39;49;00m
  1217	      [36mshift[39;49;00m
  1218	      [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1219	      *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1220		[31mqarg[39;49;00m=[33m\"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m[33m\"[39;49;00m [37m### testsuite: skip nested quoting test[39;49;00m
  1221		;;
  1222	      *) [31mqarg[39;49;00m=[31m$arg[39;49;00m ;;
  1223	      [34mesac[39;49;00m
  1224	      [31mlibtool_args[39;49;00m=[33m"[39;49;00m[31m$libtool_args[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1225
  1226	      [37m# If the previous option needs an argument, assign it.[39;49;00m
  1227	      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1228		[34mcase[39;49;00m [31m$prev[39;49;00m [34min[39;49;00m
  1229		output)
  1230		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m @OUTPUT@[39;49;00m[33m"[39;49;00m
  1231		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m @OUTPUT@[39;49;00m[33m"[39;49;00m
  1232		  ;;
  1233		[34mesac[39;49;00m
  1234
  1235		[34mcase[39;49;00m [31m$prev[39;49;00m [34min[39;49;00m
  1236		dlfiles|dlprefiles)
  1237		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$preload[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  1238		    [37m# Add the symbol object into the linking commands.[39;49;00m
  1239		    [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m @SYMFILE@[39;49;00m[33m"[39;49;00m
  1240		    [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m @SYMFILE@[39;49;00m[33m"[39;49;00m
  1241		    [31mpreload[39;49;00m=yes
  1242		  [34mfi[39;49;00m
  1243		  [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1244		  *.la | *.lo) ;;  [37m# We handle these cases below.[39;49;00m
  1245		  force)
  1246		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$dlself[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  1247		      [31mdlself[39;49;00m=needless
  1248		      [31mexport_dynamic[39;49;00m=yes
  1249		    [34mfi[39;49;00m
  1250		    [31mprev[39;49;00m=
  1251		    [34mcontinue[39;49;00m
  1252		    ;;
  1253		  self)
  1254		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlprefiles; [34mthen[39;49;00m
  1255		      [31mdlself[39;49;00m=yes
  1256		    [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlfiles && [36mtest[39;49;00m [33m"[39;49;00m[31m$dlopen_self[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
  1257		      [31mdlself[39;49;00m=yes
  1258		    [34melse[39;49;00m
  1259		      [31mdlself[39;49;00m=needless
  1260		      [31mexport_dynamic[39;49;00m=yes
  1261		    [34mfi[39;49;00m
  1262		    [31mprev[39;49;00m=
  1263		    [34mcontinue[39;49;00m
  1264		    ;;
  1265		  *)
  1266		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlfiles; [34mthen[39;49;00m
  1267		      [31mdlfiles[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1268		    [34melse[39;49;00m
  1269		      [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1270		    [34mfi[39;49;00m
  1271		    [31mprev[39;49;00m=
  1272		    [34mcontinue[39;49;00m
  1273		    ;;
  1274		  [34mesac[39;49;00m
  1275		  ;;
  1276		expsyms)
  1277		  [31mexport_symbols[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1278		  [34mif[39;49;00m [36mtest[39;49;00m ! -f [33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1279		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: symbol file \`[39;49;00m[31m$arg[39;49;00m[33m' does not exist[39;49;00m[33m"[39;49;00m
  1280		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1281		  [34mfi[39;49;00m
  1282		  [31mprev[39;49;00m=
  1283		  [34mcontinue[39;49;00m
  1284		  ;;
  1285		expsyms_regex)
  1286		  [31mexport_symbols_regex[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1287		  [31mprev[39;49;00m=
  1288		  [34mcontinue[39;49;00m
  1289		  ;;
  1290		inst_prefix)
  1291		  [31minst_prefix_dir[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1292		  [31mprev[39;49;00m=
  1293		  [34mcontinue[39;49;00m
  1294		  ;;
  1295		precious_regex)
  1296		  [31mprecious_files_regex[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1297		  [31mprev[39;49;00m=
  1298		  [34mcontinue[39;49;00m
  1299		  ;;
  1300		release)
  1301		  [31mrelease[39;49;00m=[33m"[39;49;00m[33m-[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1302		  [31mprev[39;49;00m=
  1303		  [34mcontinue[39;49;00m
  1304		  ;;
  1305		objectlist)
  1306		  [34mif[39;49;00m [36mtest[39;49;00m -f [33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1307		    [31msave_arg[39;49;00m=[31m$arg[39;49;00m
  1308		    [31mmoreargs[39;49;00m=
  1309		    [34mfor[39;49;00m fil [34min[39;49;00m [33m`[39;49;00mcat [31m$save_arg[39;49;00m[33m`[39;49;00m
  1310		    [34mdo[39;49;00m
  1311	[37m#	      moreargs="$moreargs $fil"[39;49;00m
  1312		      [31marg[39;49;00m=[31m$fil[39;49;00m
  1313		      [37m# A libtool-controlled object.[39;49;00m
  1314
  1315		      [37m# Check to see that this really is a libtool object.[39;49;00m
  1316		      [34mif[39;49;00m ([33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m'2q'[39;49;00m [31m$arg[39;49;00m | grep [33m"[39;49;00m[33m^# Generated by .*[39;49;00m[31m$PACKAGE[39;49;00m[33m"[39;49;00m) >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m; [34mthen[39;49;00m
  1317			[31mpic_object[39;49;00m=
  1318			[31mnon_pic_object[39;49;00m=
  1319
  1320			[37m# Read the .lo file[39;49;00m
  1321			[37m# If there is no directory component, then add one.[39;49;00m
  1322			[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1323			*/* | *[33m\\[39;49;00m*) . [31m$arg[39;49;00m ;;
  1324			*) . ./[31m$arg[39;49;00m ;;
  1325			[34mesac[39;49;00m
  1326
  1327			[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m || [33m\[39;49;00m
  1328			   [36mtest[39;49;00m -z [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m ||
  1329			   [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m = none && [33m\[39;49;00m
  1330			   [36mtest[39;49;00m [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m = none; [34mthen[39;49;00m
  1331			  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot find name of object for \`[39;49;00m[31m$arg[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1332			  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1333			[34mfi[39;49;00m
  1334
  1335			[37m# Extract subdirectory from the argument.[39;49;00m
  1336			[31mxdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  1337			[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$xdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1338			  [31mxdir[39;49;00m=
  1339			[34melse[39;49;00m
  1340			  [31mxdir[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[33m/[39;49;00m[33m"[39;49;00m
  1341			[34mfi[39;49;00m
  1342
  1343			[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m != none; [34mthen[39;49;00m
  1344			  [37m# Prepend the subdirectory the object is found in.[39;49;00m
  1345			  [31mpic_object[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1346
  1347			  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlfiles; [34mthen[39;49;00m
  1348			    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes && [36mtest[39;49;00m [33m"[39;49;00m[31m$dlopen_support[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  1349			      [31mdlfiles[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1350			      [31mprev[39;49;00m=
  1351			      [34mcontinue[39;49;00m
  1352			    [34melse[39;49;00m
  1353			      [37m# If libtool objects are unsupported, then we need to preload.[39;49;00m
  1354			      [31mprev[39;49;00m=dlprefiles
  1355			    [34mfi[39;49;00m
  1356			  [34mfi[39;49;00m
  1357
  1358			  [37m# CHECK ME:  I think I busted this.  -Ossama[39;49;00m
  1359			  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlprefiles; [34mthen[39;49;00m
  1360			    [37m# Preload the old-style object.[39;49;00m
  1361			    [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1362			    [31mprev[39;49;00m=
  1363			  [34mfi[39;49;00m
  1364
  1365			  [37m# A PIC object.[39;49;00m
  1366			  [31mlibobjs[39;49;00m=[33m"[39;49;00m[31m$libobjs[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1367			  [31marg[39;49;00m=[33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1368			[34mfi[39;49;00m
  1369
  1370			[37m# Non-PIC object.[39;49;00m
  1371			[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m != none; [34mthen[39;49;00m
  1372			  [37m# Prepend the subdirectory the object is found in.[39;49;00m
  1373			  [31mnon_pic_object[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1374
  1375			  [37m# A standard non-PIC object[39;49;00m
  1376			  [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1377			  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m || [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m = none ; [34mthen[39;49;00m
  1378			    [31marg[39;49;00m=[33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1379			  [34mfi[39;49;00m
  1380			[34melse[39;49;00m
  1381			  [37m# If the PIC object exists, use it instead.[39;49;00m
  1382			  [37m# $xdir was prepended to $pic_object above.[39;49;00m
  1383			  [31mnon_pic_object[39;49;00m=[33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1384			  [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1385			[34mfi[39;49;00m
  1386		      [34melse[39;49;00m
  1387			[37m# Only an error if not doing a dry-run.[39;49;00m
  1388			[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1389			  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: \`[39;49;00m[31m$arg[39;49;00m[33m' is not a valid libtool object[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1390			  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1391			[34melse[39;49;00m
  1392			  [37m# Dry-run case.[39;49;00m
  1393
  1394			  [37m# Extract subdirectory from the argument.[39;49;00m
  1395			  [31mxdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  1396			  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$xdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1397			    [31mxdir[39;49;00m=
  1398			  [34melse[39;49;00m
  1399			    [31mxdir[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[33m/[39;49;00m[33m"[39;49;00m
  1400			  [34mfi[39;49;00m
  1401
  1402			  [31mpic_object[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[33m${[39;49;00m[31mobjdir[39;49;00m[33m}[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$lo2o[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1403			  [31mnon_pic_object[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$lo2o[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1404			  [31mlibobjs[39;49;00m=[33m"[39;49;00m[31m$libobjs[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1405			  [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1406			[34mfi[39;49;00m
  1407		      [34mfi[39;49;00m
  1408		    [34mdone[39;49;00m
  1409		  [34melse[39;49;00m
  1410		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: link input file \`[39;49;00m[31m$save_arg[39;49;00m[33m' does not exist[39;49;00m[33m"[39;49;00m
  1411		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1412		  [34mfi[39;49;00m
  1413		  [31marg[39;49;00m=[31m$save_arg[39;49;00m
  1414		  [31mprev[39;49;00m=
  1415		  [34mcontinue[39;49;00m
  1416		  ;;
  1417		rpath | xrpath)
  1418		  [37m# We need an absolute path.[39;49;00m
  1419		  [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1420		  [[33m\\[39;49;00m/]* | [A-Za-z]:[[33m\\[39;49;00m/]*) ;;
  1421		  *)
  1422		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: only absolute run-paths are allowed[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1423		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1424		    ;;
  1425		  [34mesac[39;49;00m
  1426		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = rpath; [34mthen[39;49;00m
  1427		    [34mcase[39;49;00m [33m"[39;49;00m[31m$rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  1428		    *[33m"[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  1429		    *) [31mrpath[39;49;00m=[33m"[39;49;00m[31m$rpath[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m ;;
  1430		    [34mesac[39;49;00m
  1431		  [34melse[39;49;00m
  1432		    [34mcase[39;49;00m [33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  1433		    *[33m"[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  1434		    *) [31mxrpath[39;49;00m=[33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m ;;
  1435		    [34mesac[39;49;00m
  1436		  [34mfi[39;49;00m
  1437		  [31mprev[39;49;00m=
  1438		  [34mcontinue[39;49;00m
  1439		  ;;
  1440		xcompiler)
  1441		  [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1442		  [31mprev[39;49;00m=
  1443		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1444		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1445		  [34mcontinue[39;49;00m
  1446		  ;;
  1447		xlinker)
  1448		  [31mlinker_flags[39;49;00m=[33m"[39;49;00m[31m$linker_flags[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1449		  [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1450		  [31mprev[39;49;00m=
  1451		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1452		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1453		  [34mcontinue[39;49;00m
  1454		  ;;
  1455		xcclinker)
  1456		  [31mlinker_flags[39;49;00m=[33m"[39;49;00m[31m$linker_flags[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1457		  [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1458		  [31mprev[39;49;00m=
  1459		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1460		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$qarg[39;49;00m[33m"[39;49;00m
  1461		  [34mcontinue[39;49;00m
  1462		  ;;
  1463		shrext)
  1464	  	  [31mshrext_cmds[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1465		  [31mprev[39;49;00m=
  1466		  [34mcontinue[39;49;00m
  1467		  ;;
  1468		darwin_framework|darwin_framework_skip)
  1469		  [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = [33m"darwin_framework"[39;49;00m && [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1470		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1471		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1472		  [31mprev[39;49;00m=
  1473		  [34mcontinue[39;49;00m
  1474		  ;;
  1475		*)
  1476		  [36meval[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m=\"\$arg\"[39;49;00m[33m"[39;49;00m
  1477		  [31mprev[39;49;00m=
  1478		  [34mcontinue[39;49;00m
  1479		  ;;
  1480		[34mesac[39;49;00m
  1481	      [34mfi[39;49;00m [37m# test -n "$prev"[39;49;00m
  1482
  1483	      [31mprevarg[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1484
  1485	      [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1486	      -all-static)
  1487		[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1488		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m
  1489		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$link_static_flag[39;49;00m[33m"[39;49;00m
  1490		[34mfi[39;49;00m
  1491		[34mcontinue[39;49;00m
  1492		;;
  1493
  1494	      -allow-undefined)
  1495		[37m# FIXME: remove this flag sometime in the future.[39;49;00m
  1496		[31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: \`-allow-undefined' is deprecated because it is the default[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1497		[34mcontinue[39;49;00m
  1498		;;
  1499
  1500	      -avoid-version)
  1501		[31mavoid_version[39;49;00m=yes
  1502		[34mcontinue[39;49;00m
  1503		;;
  1504
  1505	      -dlopen)
  1506		[31mprev[39;49;00m=dlfiles
  1507		[34mcontinue[39;49;00m
  1508		;;
  1509
  1510	      -dlpreopen)
  1511		[31mprev[39;49;00m=dlprefiles
  1512		[34mcontinue[39;49;00m
  1513		;;
  1514
  1515	      -export-dynamic)
  1516		[31mexport_dynamic[39;49;00m=yes
  1517		[34mcontinue[39;49;00m
  1518		;;
  1519
  1520	      -export-symbols | -export-symbols-regex)
  1521		[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$export_symbols[39;49;00m[33m"[39;49;00m || [36mtest[39;49;00m -n [33m"[39;49;00m[31m$export_symbols_regex[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1522		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: more than one -exported-symbols argument is not allowed[39;49;00m[33m"[39;49;00m
  1523		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1524		[34mfi[39;49;00m
  1525		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-export-symbols"[39;49;00m; [34mthen[39;49;00m
  1526		  [31mprev[39;49;00m=expsyms
  1527		[34melse[39;49;00m
  1528		  [31mprev[39;49;00m=expsyms_regex
  1529		[34mfi[39;49;00m
  1530		[34mcontinue[39;49;00m
  1531		;;
  1532
  1533	      -framework|-arch|-isysroot)
  1534		[34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$CC[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  1535		  *[33m"[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31m1[39;49;00m[33m}[39;49;00m[33m [39;49;00m[33m"[39;49;00m* | *[33m"[39;49;00m[33m [39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m	[39;49;00m[33m${[39;49;00m[31m1[39;49;00m[33m}[39;49;00m[33m [39;49;00m[33m"[39;49;00m*)
  1536			[31mprev[39;49;00m=darwin_framework_skip ;;
  1537		  *) [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1538		     [31mprev[39;49;00m=darwin_framework ;;
  1539		[34mesac[39;49;00m
  1540		[31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1541		[31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1542		[34mcontinue[39;49;00m
  1543		;;
  1544
  1545	      -inst-prefix-dir)
  1546		[31mprev[39;49;00m=inst_prefix
  1547		[34mcontinue[39;49;00m
  1548		;;
  1549
  1550	      [37m# The native IRIX linker understands -LANG:*, -LIST:* and -LNO:*[39;49;00m
  1551	      [37m# so, if we see these flags be careful not to treat them like -L[39;49;00m
  1552	      -L[A-Z][A-Z]*:*)
  1553		[34mcase[39;49;00m [31m$with_gcc[39;49;00m/[31m$host[39;49;00m [34min[39;49;00m
  1554		no/*-*-irix* | /*-*-irix*)
  1555		  [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1556		  [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1557		  ;;
  1558		[34mesac[39;49;00m
  1559		[34mcontinue[39;49;00m
  1560		;;
  1561
  1562	      -L*)
  1563		[31mdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-L//'[39;49;00m[33m`[39;49;00m
  1564		[37m# We need an absolute path.[39;49;00m
  1565		[34mcase[39;49;00m [31m$dir[39;49;00m [34min[39;49;00m
  1566		[[33m\\[39;49;00m/]* | [A-Za-z]:[[33m\\[39;49;00m/]*) ;;
  1567		*)
  1568		  [31mabsdir[39;49;00m=[33m`[39;49;00m[36mcd[39;49;00m [33m"[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m && [36mpwd[39;49;00m[33m`[39;49;00m
  1569		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$absdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1570		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot determine absolute directory name of \`[39;49;00m[31m$dir[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1571		    [31mabsdir[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  1572		    [31mnotinst_path[39;49;00m=[33m"[39;49;00m[31m$notinst_path[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  1573		  [34mfi[39;49;00m
  1574		  [31mdir[39;49;00m=[33m"[39;49;00m[31m$absdir[39;49;00m[33m"[39;49;00m
  1575		  ;;
  1576		[34mesac[39;49;00m
  1577		[34mcase[39;49;00m [33m"[39;49;00m[31m$deplibs[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  1578		*[33m"[39;49;00m[33m -L[39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  1579		*)
  1580		  [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m -L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  1581		  [31mlib_search_path[39;49;00m=[33m"[39;49;00m[31m$lib_search_path[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  1582		  ;;
  1583		[34mesac[39;49;00m
  1584		[34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  1585		*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
  1586		  [31mtestbindir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's*/lib$*/bin*'[39;49;00m[33m`[39;49;00m
  1587		  [34mcase[39;49;00m :[31m$dllsearchpath[39;49;00m: [34min[39;49;00m
  1588		  *[33m"[39;49;00m[33m:[39;49;00m[31m$dir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m*) ;;
  1589		  *) [31mdllsearchpath[39;49;00m=[33m"[39;49;00m[31m$dllsearchpath[39;49;00m[33m:[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m;;
  1590		  [34mesac[39;49;00m
  1591		  [34mcase[39;49;00m :[31m$dllsearchpath[39;49;00m: [34min[39;49;00m
  1592		  *[33m"[39;49;00m[33m:[39;49;00m[31m$testbindir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m*) ;;
  1593		  *) [31mdllsearchpath[39;49;00m=[33m"[39;49;00m[31m$dllsearchpath[39;49;00m[33m:[39;49;00m[31m$testbindir[39;49;00m[33m"[39;49;00m;;
  1594		  [34mesac[39;49;00m
  1595		  ;;
  1596		[34mesac[39;49;00m
  1597		[34mcontinue[39;49;00m
  1598		;;
  1599
  1600	      -l*)
  1601		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc"[39;49;00m || [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lm"[39;49;00m; [34mthen[39;49;00m
  1602		  [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  1603		  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-beos*)
  1604		    [37m# These systems don't actually have a C or math library (as such)[39;49;00m
  1605		    [34mcontinue[39;49;00m
  1606		    ;;
  1607		  *-*-os2*)
  1608		    [37m# These systems don't actually have a C library (as such)[39;49;00m
  1609		    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc"[39;49;00m && [34mcontinue[39;49;00m
  1610		    ;;
  1611		  *-*-openbsd* | *-*-freebsd* | *-*-dragonfly*)
  1612		    [37m# Do not include libc due to us having libc/libc_r.[39;49;00m
  1613		    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc"[39;49;00m && [34mcontinue[39;49;00m
  1614		    ;;
  1615		  *-*-rhapsody* | *-*-darwin1.[[34m012[39;49;00m])
  1616		    [37m# Rhapsody C and math libraries are in the System framework[39;49;00m
  1617		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m -framework System[39;49;00m[33m"[39;49;00m
  1618		    [34mcontinue[39;49;00m
  1619		    ;;
  1620		  *-*-sco3.2v5* | *-*-sco5v6*)
  1621		    [37m# Causes problems with __ctype[39;49;00m
  1622		    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc"[39;49;00m && [34mcontinue[39;49;00m
  1623		    ;;
  1624		  *-*-sysv4.2uw2* | *-*-sysv5* | *-*-unixware* | *-*-OpenUNIX*)
  1625		    [37m# Compiler inserts libc in the correct place for threads to work[39;49;00m
  1626		    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc"[39;49;00m && [34mcontinue[39;49;00m
  1627		    ;;
  1628		  [34mesac[39;49;00m
  1629		[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m = [33m"X-lc_r"[39;49;00m; [34mthen[39;49;00m
  1630		 [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  1631		 *-*-openbsd* | *-*-freebsd* | *-*-dragonfly*)
  1632		   [37m# Do not include libc_r directly, use -pthread flag.[39;49;00m
  1633		   [34mcontinue[39;49;00m
  1634		   ;;
  1635		 [34mesac[39;49;00m
  1636		[34mfi[39;49;00m
  1637		[31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1638		[34mcontinue[39;49;00m
  1639		;;
  1640
  1641	      [37m# Tru64 UNIX uses -model [arg] to determine the layout of C++[39;49;00m
  1642	      [37m# classes, name mangling, and exception handling.[39;49;00m
  1643	      -model)
  1644		[31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1645		[31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1646		[31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1647		[31mprev[39;49;00m=xcompiler
  1648		[34mcontinue[39;49;00m
  1649		;;
  1650
  1651	     -mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe)
  1652		[31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1653		[31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1654		[31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1655		[34mcontinue[39;49;00m
  1656		;;
  1657
  1658	      -module)
  1659		[31mmodule[39;49;00m=yes
  1660		[34mcontinue[39;49;00m
  1661		;;
  1662
  1663	      [37m# -64, -mips[0-9] enable 64-bit mode on the SGI compiler[39;49;00m
  1664	      [37m# -r[0-9][0-9]* specifies the processor on the SGI compiler[39;49;00m
  1665	      [37m# -xarch=*, -xtarget=* enable 64-bit mode on the Sun compiler[39;49;00m
  1666	      [37m# +DA*, +DD* enable 64-bit mode on the HP compiler[39;49;00m
  1667	      [37m# -q* pass through compiler args for the IBM compiler[39;49;00m
  1668	      [37m# -m* pass through architecture-specific compiler args for GCC[39;49;00m
  1669	      [37m# -m*, -t[45]*, -txscale* pass through architecture-specific[39;49;00m
  1670	      [37m# compiler args for GCC[39;49;00m
  1671	      [37m# -pg pass through profiling flag for GCC[39;49;00m
  1672	      [37m# @file GCC response files[39;49;00m
  1673	      -64|-mips[[34m0[39;49;00m-9]|-r[[34m0[39;49;00m-9][[34m0[39;49;00m-9]*|-xarch=*|-xtarget=*|+DA*|+DD*|-q*|-m*|-pg| [33m\[39;49;00m
  1674	      -t[[34m45[39;49;00m]*|-txscale*|@*)
  1675
  1676		[37m# Unknown arguments in both finalize_command and compile_command need[39;49;00m
  1677		[37m# to be aesthetically quoted because they are evaled later.[39;49;00m
  1678		[31marg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1679		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1680		*[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1681		  [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
  1682		  ;;
  1683		[34mesac[39;49;00m
  1684	        [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1685	        [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1686	        [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1687	        [34mcontinue[39;49;00m
  1688	        ;;
  1689
  1690	      -shrext)
  1691		[31mprev[39;49;00m=shrext
  1692		[34mcontinue[39;49;00m
  1693		;;
  1694
  1695	      -no-fast-install)
  1696		[31mfast_install[39;49;00m=no
  1697		[34mcontinue[39;49;00m
  1698		;;
  1699
  1700	      -no-install)
  1701		[34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  1702		*-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2*)
  1703		  [37m# The PATH hackery in wrapper scripts is required on Windows[39;49;00m
  1704		  [37m# in order for the loader to find any dlls it needs.[39;49;00m
  1705		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: \`-no-install' is ignored for [39;49;00m[31m$host[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1706		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: assuming \`-no-fast-install' instead[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1707		  [31mfast_install[39;49;00m=no
  1708		  ;;
  1709		*) [31mno_install[39;49;00m=yes ;;
  1710		[34mesac[39;49;00m
  1711		[34mcontinue[39;49;00m
  1712		;;
  1713
  1714	      -no-undefined)
  1715		[31mallow_undefined[39;49;00m=no
  1716		[34mcontinue[39;49;00m
  1717		;;
  1718
  1719	      -objectlist)
  1720		[31mprev[39;49;00m=objectlist
  1721		[34mcontinue[39;49;00m
  1722		;;
  1723
  1724	      -o) [31mprev[39;49;00m=output ;;
  1725
  1726	      -precious-files-regex)
  1727		[31mprev[39;49;00m=precious_regex
  1728		[34mcontinue[39;49;00m
  1729		;;
  1730
  1731	      -release)
  1732		[31mprev[39;49;00m=release
  1733		[34mcontinue[39;49;00m
  1734		;;
  1735
  1736	      -rpath)
  1737		[31mprev[39;49;00m=rpath
  1738		[34mcontinue[39;49;00m
  1739		;;
  1740
  1741	      -R)
  1742		[31mprev[39;49;00m=xrpath
  1743		[34mcontinue[39;49;00m
  1744		;;
  1745
  1746	      -R*)
  1747		[31mdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-R//'[39;49;00m[33m`[39;49;00m
  1748		[37m# We need an absolute path.[39;49;00m
  1749		[34mcase[39;49;00m [31m$dir[39;49;00m [34min[39;49;00m
  1750		[[33m\\[39;49;00m/]* | [A-Za-z]:[[33m\\[39;49;00m/]*) ;;
  1751		*)
  1752		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: only absolute run-paths are allowed[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1753		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1754		  ;;
  1755		[34mesac[39;49;00m
  1756		[34mcase[39;49;00m [33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  1757		*[33m"[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  1758		*) [31mxrpath[39;49;00m=[33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  1759		[34mesac[39;49;00m
  1760		[34mcontinue[39;49;00m
  1761		;;
  1762
  1763	      -static)
  1764		[37m# The effects of -static are defined in a previous loop.[39;49;00m
  1765		[37m# We used to do the same as -all-static on platforms that[39;49;00m
  1766		[37m# didn't have a PIC flag, but the assumption that the effects[39;49;00m
  1767		[37m# would be equivalent was wrong.  It would break on at least[39;49;00m
  1768		[37m# Digital Unix and AIX.[39;49;00m
  1769		[34mcontinue[39;49;00m
  1770		;;
  1771
  1772	      -thread-safe)
  1773		[31mthread_safe[39;49;00m=yes
  1774		[34mcontinue[39;49;00m
  1775		;;
  1776
  1777	      -version-info)
  1778		[31mprev[39;49;00m=vinfo
  1779		[34mcontinue[39;49;00m
  1780		;;
  1781	      -version-number)
  1782		[31mprev[39;49;00m=vinfo
  1783		[31mvinfo_number[39;49;00m=yes
  1784		[34mcontinue[39;49;00m
  1785		;;
  1786
  1787	      -Wc,*)
  1788		[31margs[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m -e [33m's/^-Wc,//'[39;49;00m[33m`[39;49;00m
  1789		[31marg[39;49;00m=
  1790		[31msave_ifs[39;49;00m=[33m"[39;49;00m[31m$IFS[39;49;00m[33m"[39;49;00m; [31mIFS[39;49;00m=[33m','[39;49;00m
  1791		[34mfor[39;49;00m flag [34min[39;49;00m [31m$args[39;49;00m; [34mdo[39;49;00m
  1792		  [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  1793		  [34mcase[39;49;00m [31m$flag[39;49;00m [34min[39;49;00m
  1794		    *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1795		    [31mflag[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$flag[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
  1796		    ;;
  1797		  [34mesac[39;49;00m
  1798		  [31marg[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$flag[39;49;00m[33m"[39;49;00m
  1799		  [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$flag[39;49;00m[33m"[39;49;00m
  1800		[34mdone[39;49;00m
  1801		[31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  1802		[31marg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"s/^ //"[39;49;00m[33m`[39;49;00m
  1803		;;
  1804
  1805	      -Wl,*)
  1806		[31margs[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m -e [33m's/^-Wl,//'[39;49;00m[33m`[39;49;00m
  1807		[31marg[39;49;00m=
  1808		[31msave_ifs[39;49;00m=[33m"[39;49;00m[31m$IFS[39;49;00m[33m"[39;49;00m; [31mIFS[39;49;00m=[33m','[39;49;00m
  1809		[34mfor[39;49;00m flag [34min[39;49;00m [31m$args[39;49;00m; [34mdo[39;49;00m
  1810		  [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  1811		  [34mcase[39;49;00m [31m$flag[39;49;00m [34min[39;49;00m
  1812		    *[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1813		    [31mflag[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$flag[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
  1814		    ;;
  1815		  [34mesac[39;49;00m
  1816		  [31marg[39;49;00m=[33m"[39;49;00m[31m$arg[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$flag[39;49;00m[33m"[39;49;00m
  1817		  [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$wl[39;49;00m[31m$flag[39;49;00m[33m"[39;49;00m
  1818		  [31mlinker_flags[39;49;00m=[33m"[39;49;00m[31m$linker_flags[39;49;00m[33m [39;49;00m[31m$flag[39;49;00m[33m"[39;49;00m
  1819		[34mdone[39;49;00m
  1820		[31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  1821		[31marg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"s/^ //"[39;49;00m[33m`[39;49;00m
  1822		;;
  1823
  1824	      -Xcompiler)
  1825		[31mprev[39;49;00m=xcompiler
  1826		[34mcontinue[39;49;00m
  1827		;;
  1828
  1829	      -Xlinker)
  1830		[31mprev[39;49;00m=xlinker
  1831		[34mcontinue[39;49;00m
  1832		;;
  1833
  1834	      -XCClinker)
  1835		[31mprev[39;49;00m=xcclinker
  1836		[34mcontinue[39;49;00m
  1837		;;
  1838
  1839	      [37m# Some other compiler flag.[39;49;00m
  1840	      -* | +*)
  1841		[37m# Unknown arguments in both finalize_command and compile_command need[39;49;00m
  1842		[37m# to be aesthetically quoted because they are evaled later.[39;49;00m
  1843		[31marg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1844		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1845		*[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1846		  [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
  1847		  ;;
  1848		[34mesac[39;49;00m
  1849		;;
  1850
  1851	      *.[31m$objext[39;49;00m)
  1852		[37m# A standard object.[39;49;00m
  1853		[31mobjs[39;49;00m=[33m"[39;49;00m[31m$objs[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1854		;;
  1855
  1856	      *.lo)
  1857		[37m# A libtool-controlled object.[39;49;00m
  1858
  1859		[37m# Check to see that this really is a libtool object.[39;49;00m
  1860		[34mif[39;49;00m ([33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m'2q'[39;49;00m [31m$arg[39;49;00m | grep [33m"[39;49;00m[33m^# Generated by .*[39;49;00m[31m$PACKAGE[39;49;00m[33m"[39;49;00m) >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m; [34mthen[39;49;00m
  1861		  [31mpic_object[39;49;00m=
  1862		  [31mnon_pic_object[39;49;00m=
  1863
  1864		  [37m# Read the .lo file[39;49;00m
  1865		  [37m# If there is no directory component, then add one.[39;49;00m
  1866		  [34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1867		  */* | *[33m\\[39;49;00m*) . [31m$arg[39;49;00m ;;
  1868		  *) . ./[31m$arg[39;49;00m ;;
  1869		  [34mesac[39;49;00m
  1870
  1871		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m || [33m\[39;49;00m
  1872		     [36mtest[39;49;00m -z [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m ||
  1873		     [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m = none && [33m\[39;49;00m
  1874		     [36mtest[39;49;00m [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m = none; [34mthen[39;49;00m
  1875		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot find name of object for \`[39;49;00m[31m$arg[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1876		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1877		  [34mfi[39;49;00m
  1878
  1879		  [37m# Extract subdirectory from the argument.[39;49;00m
  1880		  [31mxdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  1881		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$xdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1882		    [31mxdir[39;49;00m=
  1883	 	  [34melse[39;49;00m
  1884		    [31mxdir[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[33m/[39;49;00m[33m"[39;49;00m
  1885		  [34mfi[39;49;00m
  1886
  1887		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m != none; [34mthen[39;49;00m
  1888		    [37m# Prepend the subdirectory the object is found in.[39;49;00m
  1889		    [31mpic_object[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1890
  1891		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlfiles; [34mthen[39;49;00m
  1892		      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes && [36mtest[39;49;00m [33m"[39;49;00m[31m$dlopen_support[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  1893			[31mdlfiles[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1894			[31mprev[39;49;00m=
  1895			[34mcontinue[39;49;00m
  1896		      [34melse[39;49;00m
  1897			[37m# If libtool objects are unsupported, then we need to preload.[39;49;00m
  1898			[31mprev[39;49;00m=dlprefiles
  1899		      [34mfi[39;49;00m
  1900		    [34mfi[39;49;00m
  1901
  1902		    [37m# CHECK ME:  I think I busted this.  -Ossama[39;49;00m
  1903		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlprefiles; [34mthen[39;49;00m
  1904		      [37m# Preload the old-style object.[39;49;00m
  1905		      [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1906		      [31mprev[39;49;00m=
  1907		    [34mfi[39;49;00m
  1908
  1909		    [37m# A PIC object.[39;49;00m
  1910		    [31mlibobjs[39;49;00m=[33m"[39;49;00m[31m$libobjs[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1911		    [31marg[39;49;00m=[33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1912		  [34mfi[39;49;00m
  1913
  1914		  [37m# Non-PIC object.[39;49;00m
  1915		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m != none; [34mthen[39;49;00m
  1916		    [37m# Prepend the subdirectory the object is found in.[39;49;00m
  1917		    [31mnon_pic_object[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1918
  1919		    [37m# A standard non-PIC object[39;49;00m
  1920		    [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1921		    [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m || [36mtest[39;49;00m [33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m = none ; [34mthen[39;49;00m
  1922		      [31marg[39;49;00m=[33m"[39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1923		    [34mfi[39;49;00m
  1924		  [34melse[39;49;00m
  1925		    [37m# If the PIC object exists, use it instead.[39;49;00m
  1926		    [37m# $xdir was prepended to $pic_object above.[39;49;00m
  1927		    [31mnon_pic_object[39;49;00m=[33m"[39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1928		    [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1929		  [34mfi[39;49;00m
  1930		[34melse[39;49;00m
  1931		  [37m# Only an error if not doing a dry-run.[39;49;00m
  1932		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$run[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1933		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: \`[39;49;00m[31m$arg[39;49;00m[33m' is not a valid libtool object[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  1934		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  1935		  [34melse[39;49;00m
  1936		    [37m# Dry-run case.[39;49;00m
  1937
  1938		    [37m# Extract subdirectory from the argument.[39;49;00m
  1939		    [31mxdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  1940		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$xdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1941		      [31mxdir[39;49;00m=
  1942		    [34melse[39;49;00m
  1943		      [31mxdir[39;49;00m=[33m"[39;49;00m[31m$xdir[39;49;00m[33m/[39;49;00m[33m"[39;49;00m
  1944		    [34mfi[39;49;00m
  1945
  1946		    [31mpic_object[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[33m${[39;49;00m[31mobjdir[39;49;00m[33m}[39;49;00m[33m/[39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$lo2o[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1947		    [31mnon_pic_object[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[33m${[39;49;00m[31mxdir[39;49;00m[33m}[39;49;00m[33m${[39;49;00m[31marg[39;49;00m[33m}[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$lo2o[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1948		    [31mlibobjs[39;49;00m=[33m"[39;49;00m[31m$libobjs[39;49;00m[33m [39;49;00m[31m$pic_object[39;49;00m[33m"[39;49;00m
  1949		    [31mnon_pic_objects[39;49;00m=[33m"[39;49;00m[31m$non_pic_objects[39;49;00m[33m [39;49;00m[31m$non_pic_object[39;49;00m[33m"[39;49;00m
  1950		  [34mfi[39;49;00m
  1951		[34mfi[39;49;00m
  1952		;;
  1953
  1954	      *.[31m$libext[39;49;00m)
  1955		[37m# An archive.[39;49;00m
  1956		[31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1957		[31mold_deplibs[39;49;00m=[33m"[39;49;00m[31m$old_deplibs[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1958		[34mcontinue[39;49;00m
  1959		;;
  1960
  1961	      *.la)
  1962		[37m# A libtool-controlled library.[39;49;00m
  1963
  1964		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlfiles; [34mthen[39;49;00m
  1965		  [37m# This library was specified with -dlopen.[39;49;00m
  1966		  [31mdlfiles[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1967		  [31mprev[39;49;00m=
  1968		[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m = dlprefiles; [34mthen[39;49;00m
  1969		  [37m# The library was specified with -dlpreopen.[39;49;00m
  1970		  [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1971		  [31mprev[39;49;00m=
  1972		[34melse[39;49;00m
  1973		  [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1974		[34mfi[39;49;00m
  1975		[34mcontinue[39;49;00m
  1976		;;
  1977
  1978	      [37m# Some other compiler argument.[39;49;00m
  1979	      *)
  1980		[37m# Unknown arguments in both finalize_command and compile_command need[39;49;00m
  1981		[37m# to be aesthetically quoted because they are evaled later.[39;49;00m
  1982		[31marg[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m"[39;49;00m[31m$sed_quote_subst[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  1983		[34mcase[39;49;00m [31m$arg[39;49;00m [34min[39;49;00m
  1984		*[[33m\[[39;49;00m[33m\~[39;49;00m[33m\#[39;49;00m[33m\^[39;49;00m[33m\&[39;49;00m[33m\*[39;49;00m[33m\([39;49;00m[33m\)[39;49;00m[33m\{[39;49;00m[33m\}[39;49;00m[33m\|[39;49;00m[33m\;[39;49;00m[33m\<[39;49;00m[33m\>[39;49;00m[33m\?[39;49;00m[33m\'[39;49;00m[33m\ [39;49;00m[33m\	[39;49;00m]*|*]*|[33m""[39;49;00m)
  1985		  [31marg[39;49;00m=[33m"[39;49;00m[33m\"[39;49;00m[31m$arg[39;49;00m[33m\"[39;49;00m[33m"[39;49;00m
  1986		  ;;
  1987		[34mesac[39;49;00m
  1988		;;
  1989	      [34mesac[39;49;00m [37m# arg[39;49;00m
  1990
  1991	      [37m# Now actually substitute the argument into the commands.[39;49;00m
  1992	      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1993		[31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1994		[31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  1995	      [34mfi[39;49;00m
  1996	    [34mdone[39;49;00m [37m# argument parsing loop[39;49;00m
  1997
  1998	    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$prev[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  1999	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: the \`[39;49;00m[31m$prevarg[39;49;00m[33m' option requires an argument[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2000	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2001	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2002	    [34mfi[39;49;00m
  2003
  2004	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$export_dynamic[39;49;00m[33m"[39;49;00m = yes && [36mtest[39;49;00m -n [33m"[39;49;00m[31m$export_dynamic_flag_spec[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2005	      [36meval[39;49;00m [31marg[39;49;00m=[33m\"[39;49;00m[31m$export_dynamic_flag_spec[39;49;00m[33m\"[39;49;00m
  2006	      [31mcompile_command[39;49;00m=[33m"[39;49;00m[31m$compile_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  2007	      [31mfinalize_command[39;49;00m=[33m"[39;49;00m[31m$finalize_command[39;49;00m[33m [39;49;00m[31m$arg[39;49;00m[33m"[39;49;00m
  2008	    [34mfi[39;49;00m
  2009
  2010	    [31moldlibs[39;49;00m=
  2011	    [37m# calculate the name of the file, without its directory[39;49;00m
  2012	    [31moutputname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$output[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
  2013	    [31mlibobjs_save[39;49;00m=[33m"[39;49;00m[31m$libobjs[39;49;00m[33m"[39;49;00m
  2014
  2015	    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$shlibpath_var[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2016	      [37m# get the directories listed in $shlibpath_var[39;49;00m
  2017	      [36meval[39;49;00m [31mshlib_search_path[39;49;00m=[33m\`[39;49;00m[33m\$[39;49;00m[36mecho[39;49;00m [33m\"[39;49;00mX[33m\$[39;49;00m{[31m$shlibpath_var[39;49;00m}[33m\"[39;49;00m [33m\|[39;49;00m [33m\$[39;49;00mXsed -e [33m\'[39;49;00ms/:/ /g[33m\'[39;49;00m[33m\`[39;49;00m
  2018	    [34melse[39;49;00m
  2019	      [31mshlib_search_path[39;49;00m=
  2020	    [34mfi[39;49;00m
  2021	    [36meval[39;49;00m [31msys_lib_search_path[39;49;00m=[33m\"[39;49;00m[31m$sys_lib_search_path_spec[39;49;00m[33m\"[39;49;00m
  2022	    [36meval[39;49;00m [31msys_lib_dlsearch_path[39;49;00m=[33m\"[39;49;00m[31m$sys_lib_dlsearch_path_spec[39;49;00m[33m\"[39;49;00m
  2023
  2024	    [31moutput_objdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$output[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  2025	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$output_objdir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$output[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2026	      [31moutput_objdir[39;49;00m=[33m"[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m
  2027	    [34melse[39;49;00m
  2028	      [31moutput_objdir[39;49;00m=[33m"[39;49;00m[31m$output_objdir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m
  2029	    [34mfi[39;49;00m
  2030	    [37m# Create the object directory.[39;49;00m
  2031	    [34mif[39;49;00m [36mtest[39;49;00m ! -d [33m"[39;49;00m[31m$output_objdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2032	      [31m$show[39;49;00m [33m"[39;49;00m[31m$mkdir[39;49;00m[33m [39;49;00m[31m$output_objdir[39;49;00m[33m"[39;49;00m
  2033	      [31m$run[39;49;00m [31m$mkdir[39;49;00m [31m$output_objdir[39;49;00m
  2034	      [31mexit_status[39;49;00m=[31m$?[39;49;00m
  2035	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$exit_status[39;49;00m[33m"[39;49;00m -ne [34m0[39;49;00m && [36mtest[39;49;00m ! -d [33m"[39;49;00m[31m$output_objdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2036		[36mexit[39;49;00m [31m$exit_status[39;49;00m
  2037	      [34mfi[39;49;00m
  2038	    [34mfi[39;49;00m
  2039
  2040	    [37m# Determine the type of output[39;49;00m
  2041	    [34mcase[39;49;00m [31m$output[39;49;00m [34min[39;49;00m
  2042	    [33m""[39;49;00m)
  2043	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: you must specify an output file[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2044	      [31m$echo[39;49;00m [33m"[39;49;00m[31m$help[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2045	      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2046	      ;;
  2047	    *.[31m$libext[39;49;00m) [31mlinkmode[39;49;00m=oldlib ;;
  2048	    *.lo | *.[31m$objext[39;49;00m) [31mlinkmode[39;49;00m=obj ;;
  2049	    *.la) [31mlinkmode[39;49;00m=lib ;;
  2050	    *) [31mlinkmode[39;49;00m=prog ;; [37m# Anything else should be a program.[39;49;00m
  2051	    [34mesac[39;49;00m
  2052
  2053	    [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  2054	    *cygwin* | *mingw* | *pw32*)
  2055	      [37m# don't eliminate duplications in $postdeps and $predeps[39;49;00m
  2056	      [31mduplicate_compiler_generated_deps[39;49;00m=yes
  2057	      ;;
  2058	    *)
  2059	      [31mduplicate_compiler_generated_deps[39;49;00m=[31m$duplicate_deps[39;49;00m
  2060	      ;;
  2061	    [34mesac[39;49;00m
  2062	    [31mspecialdeplibs[39;49;00m=
  2063
  2064	    [31mlibs[39;49;00m=
  2065	    [37m# Find all interdependent deplibs by searching for libraries[39;49;00m
  2066	    [37m# that are linked more than once (e.g. -la -lb -la)[39;49;00m
  2067	    [34mfor[39;49;00m deplib [34min[39;49;00m [31m$deplibs[39;49;00m; [34mdo[39;49;00m
  2068	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$duplicate_deps[39;49;00m[33m"[39;49;00m = [33m"Xyes"[39;49;00m ; [34mthen[39;49;00m
  2069		[34mcase[39;49;00m [33m"[39;49;00m[31m$libs[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2070		*[33m"[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) [31mspecialdeplibs[39;49;00m=[33m"[39;49;00m[31m$specialdeplibs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m ;;
  2071		[34mesac[39;49;00m
  2072	      [34mfi[39;49;00m
  2073	      [31mlibs[39;49;00m=[33m"[39;49;00m[31m$libs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2074	    [34mdone[39;49;00m
  2075
  2076	    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = lib; [34mthen[39;49;00m
  2077	      [31mlibs[39;49;00m=[33m"[39;49;00m[31m$predeps[39;49;00m[33m [39;49;00m[31m$libs[39;49;00m[33m [39;49;00m[31m$compiler_lib_search_path[39;49;00m[33m [39;49;00m[31m$postdeps[39;49;00m[33m"[39;49;00m
  2078
  2079	      [37m# Compute libraries that are listed more than once in $predeps[39;49;00m
  2080	      [37m# $postdeps and mark them as special (i.e., whose duplicates are[39;49;00m
  2081	      [37m# not to be eliminated).[39;49;00m
  2082	      [31mpre_post_deps[39;49;00m=
  2083	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$duplicate_compiler_generated_deps[39;49;00m[33m"[39;49;00m = [33m"Xyes"[39;49;00m ; [34mthen[39;49;00m
  2084		[34mfor[39;49;00m pre_post_dep [34min[39;49;00m [31m$predeps[39;49;00m [31m$postdeps[39;49;00m; [34mdo[39;49;00m
  2085		  [34mcase[39;49;00m [33m"[39;49;00m[31m$pre_post_deps[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2086		  *[33m"[39;49;00m[33m [39;49;00m[31m$pre_post_dep[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) [31mspecialdeplibs[39;49;00m=[33m"[39;49;00m[31m$specialdeplibs[39;49;00m[33m [39;49;00m[31m$pre_post_deps[39;49;00m[33m"[39;49;00m ;;
  2087		  [34mesac[39;49;00m
  2088		  [31mpre_post_deps[39;49;00m=[33m"[39;49;00m[31m$pre_post_deps[39;49;00m[33m [39;49;00m[31m$pre_post_dep[39;49;00m[33m"[39;49;00m
  2089		[34mdone[39;49;00m
  2090	      [34mfi[39;49;00m
  2091	      [31mpre_post_deps[39;49;00m=
  2092	    [34mfi[39;49;00m
  2093
  2094	    [31mdeplibs[39;49;00m=
  2095	    [31mnewdependency_libs[39;49;00m=
  2096	    [31mnewlib_search_path[39;49;00m=
  2097	    [31mneed_relink[39;49;00m=no [37m# whether we're linking any uninstalled libtool libraries[39;49;00m
  2098	    [31mnotinst_deplibs[39;49;00m= [37m# not-installed libtool libraries[39;49;00m
  2099	    [34mcase[39;49;00m [31m$linkmode[39;49;00m [34min[39;49;00m
  2100	    lib)
  2101		[31mpasses[39;49;00m=[33m"conv link"[39;49;00m
  2102		[34mfor[39;49;00m file [34min[39;49;00m [31m$dlfiles[39;49;00m [31m$dlprefiles[39;49;00m; [34mdo[39;49;00m
  2103		  [34mcase[39;49;00m [31m$file[39;49;00m [34min[39;49;00m
  2104		  *.la) ;;
  2105		  *)
  2106		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: libraries can \`-dlopen' only libtool libraries: [39;49;00m[31m$file[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2107		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2108		    ;;
  2109		  [34mesac[39;49;00m
  2110		[34mdone[39;49;00m
  2111		;;
  2112	    prog)
  2113		[31mcompile_deplibs[39;49;00m=
  2114		[31mfinalize_deplibs[39;49;00m=
  2115		[31malldeplibs[39;49;00m=no
  2116		[31mnewdlfiles[39;49;00m=
  2117		[31mnewdlprefiles[39;49;00m=
  2118		[31mpasses[39;49;00m=[33m"conv scan dlopen dlpreopen link"[39;49;00m
  2119		;;
  2120	    *)  [31mpasses[39;49;00m=[33m"conv"[39;49;00m
  2121		;;
  2122	    [34mesac[39;49;00m
  2123	    [34mfor[39;49;00m pass [34min[39;49;00m [31m$passes[39;49;00m; [34mdo[39;49;00m
  2124	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"lib,link"[39;49;00m ||
  2125		 [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,scan"[39;49;00m; [34mthen[39;49;00m
  2126		[31mlibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2127		[31mdeplibs[39;49;00m=
  2128	      [34mfi[39;49;00m
  2129	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2130		[34mcase[39;49;00m [31m$pass[39;49;00m [34min[39;49;00m
  2131		dlopen) [31mlibs[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m"[39;49;00m ;;
  2132		dlpreopen) [31mlibs[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m"[39;49;00m ;;
  2133		link) [31mlibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m %DEPLIBS% [39;49;00m[31m$dependency_libs[39;49;00m[33m"[39;49;00m ;;
  2134		[34mesac[39;49;00m
  2135	      [34mfi[39;49;00m
  2136	      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = dlopen; [34mthen[39;49;00m
  2137		[37m# Collect dlpreopened libraries[39;49;00m
  2138		[31msave_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2139		[31mdeplibs[39;49;00m=
  2140	      [34mfi[39;49;00m
  2141	      [34mfor[39;49;00m deplib [34min[39;49;00m [31m$libs[39;49;00m; [34mdo[39;49;00m
  2142		[31mlib[39;49;00m=
  2143		[31mfound[39;49;00m=no
  2144		[34mcase[39;49;00m [31m$deplib[39;49;00m [34min[39;49;00m
  2145		-mt|-mthreads|-kthread|-Kthread|-pthread|-pthreads|--thread-safe)
  2146		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,link"[39;49;00m; [34mthen[39;49;00m
  2147		    [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2148		    [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2149		  [34melse[39;49;00m
  2150		    [31mcompiler_flags[39;49;00m=[33m"[39;49;00m[31m$compiler_flags[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2151		  [34mfi[39;49;00m
  2152		  [34mcontinue[39;49;00m
  2153		  ;;
  2154		-l*)
  2155		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != lib && [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != prog; [34mthen[39;49;00m
  2156		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: \`-l' is ignored for archives/objects[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2157		    [34mcontinue[39;49;00m
  2158		  [34mfi[39;49;00m
  2159		  [31mname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-l//'[39;49;00m[33m`[39;49;00m
  2160		  [34mfor[39;49;00m searchdir [34min[39;49;00m [31m$newlib_search_path[39;49;00m [31m$lib_search_path[39;49;00m [31m$sys_lib_search_path[39;49;00m [31m$shlib_search_path[39;49;00m; [34mdo[39;49;00m
  2161		    [34mfor[39;49;00m search_ext [34min[39;49;00m .la [31m$std_shrext[39;49;00m .so .a; [34mdo[39;49;00m
  2162		      [37m# Search the libtool library[39;49;00m
  2163		      [31mlib[39;49;00m=[33m"[39;49;00m[31m$searchdir[39;49;00m[33m/lib[39;49;00m[33m${[39;49;00m[31mname[39;49;00m[33m}[39;49;00m[33m${[39;49;00m[31msearch_ext[39;49;00m[33m}[39;49;00m[33m"[39;49;00m
  2164		      [34mif[39;49;00m [36mtest[39;49;00m -f [33m"[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2165			[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$search_ext[39;49;00m[33m"[39;49;00m = [33m".la"[39;49;00m; [34mthen[39;49;00m
  2166			  [31mfound[39;49;00m=yes
  2167			[34melse[39;49;00m
  2168			  [31mfound[39;49;00m=no
  2169			[34mfi[39;49;00m
  2170			[36mbreak[39;49;00m [34m2[39;49;00m
  2171		      [34mfi[39;49;00m
  2172		    [34mdone[39;49;00m
  2173		  [34mdone[39;49;00m
  2174		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$found[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
  2175		    [37m# deplib doesn't seem to be a libtool library[39;49;00m
  2176		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,link"[39;49;00m; [34mthen[39;49;00m
  2177		      [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2178		      [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2179		    [34melse[39;49;00m
  2180		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2181		      [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = lib && [31mnewdependency_libs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$newdependency_libs[39;49;00m[33m"[39;49;00m
  2182		    [34mfi[39;49;00m
  2183		    [34mcontinue[39;49;00m
  2184		  [34melse[39;49;00m [37m# deplib is a libtool library[39;49;00m
  2185		    [37m# If $allow_libtool_libs_with_static_runtimes && $deplib is a stdlib,[39;49;00m
  2186		    [37m# We need to do some special things here, and not later.[39;49;00m
  2187		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$allow_libtool_libs_with_static_runtimes[39;49;00m[33m"[39;49;00m = [33m"Xyes"[39;49;00m ; [34mthen[39;49;00m
  2188		      [34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$predeps[39;49;00m[33m [39;49;00m[31m$postdeps[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2189		      *[33m"[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[33m"[39;49;00m*)
  2190			[34mif[39;49;00m ([33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m'2q'[39;49;00m [31m$lib[39;49;00m |
  2191	                    grep [33m"[39;49;00m[33m^# Generated by .*[39;49;00m[31m$PACKAGE[39;49;00m[33m"[39;49;00m) >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m; [34mthen[39;49;00m
  2192			  [31mlibrary_names[39;49;00m=
  2193			  [31mold_library[39;49;00m=
  2194			  [34mcase[39;49;00m [31m$lib[39;49;00m [34min[39;49;00m
  2195			  */* | *[33m\\[39;49;00m*) . [31m$lib[39;49;00m ;;
  2196			  *) . ./[31m$lib[39;49;00m ;;
  2197			  [34mesac[39;49;00m
  2198			  [34mfor[39;49;00m l [34min[39;49;00m [31m$old_library[39;49;00m [31m$library_names[39;49;00m; [34mdo[39;49;00m
  2199			    [31mll[39;49;00m=[33m"[39;49;00m[31m$l[39;49;00m[33m"[39;49;00m
  2200			  [34mdone[39;49;00m
  2201			  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$ll[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m [37m# only static version available[39;49;00m
  2202			    [31mfound[39;49;00m=no
  2203			    [31mladir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  2204			    [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m && [31mladir[39;49;00m=[33m"."[39;49;00m
  2205			    [31mlib[39;49;00m=[31m$ladir[39;49;00m/[31m$old_library[39;49;00m
  2206			    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,link"[39;49;00m; [34mthen[39;49;00m
  2207			      [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2208			      [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2209			    [34melse[39;49;00m
  2210			      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2211			      [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = lib && [31mnewdependency_libs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$newdependency_libs[39;49;00m[33m"[39;49;00m
  2212			    [34mfi[39;49;00m
  2213			    [34mcontinue[39;49;00m
  2214			  [34mfi[39;49;00m
  2215			[34mfi[39;49;00m
  2216		        ;;
  2217		      *) ;;
  2218		      [34mesac[39;49;00m
  2219		    [34mfi[39;49;00m
  2220		  [34mfi[39;49;00m
  2221		  ;; [37m# -l[39;49;00m
  2222		-L*)
  2223		  [34mcase[39;49;00m [31m$linkmode[39;49;00m [34min[39;49;00m
  2224		  lib)
  2225		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2226		    [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = conv && [34mcontinue[39;49;00m
  2227		    [31mnewdependency_libs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$newdependency_libs[39;49;00m[33m"[39;49;00m
  2228		    [31mnewlib_search_path[39;49;00m=[33m"[39;49;00m[31m$newlib_search_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-L//'[39;49;00m[33m`[39;49;00m
  2229		    ;;
  2230		  prog)
  2231		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = conv; [34mthen[39;49;00m
  2232		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2233		      [34mcontinue[39;49;00m
  2234		    [34mfi[39;49;00m
  2235		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = scan; [34mthen[39;49;00m
  2236		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2237		    [34melse[39;49;00m
  2238		      [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2239		      [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2240		    [34mfi[39;49;00m
  2241		    [31mnewlib_search_path[39;49;00m=[33m"[39;49;00m[31m$newlib_search_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-L//'[39;49;00m[33m`[39;49;00m
  2242		    ;;
  2243		  *)
  2244		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: \`-L' is ignored for archives/objects[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2245		    ;;
  2246		  [34mesac[39;49;00m [37m# linkmode[39;49;00m
  2247		  [34mcontinue[39;49;00m
  2248		  ;; [37m# -L[39;49;00m
  2249		-R*)
  2250		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = link; [34mthen[39;49;00m
  2251		    [31mdir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-R//'[39;49;00m[33m`[39;49;00m
  2252		    [37m# Make sure the xrpath contains only unique directories.[39;49;00m
  2253		    [34mcase[39;49;00m [33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2254		    *[33m"[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2255		    *) [31mxrpath[39;49;00m=[33m"[39;49;00m[31m$xrpath[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  2256		    [34mesac[39;49;00m
  2257		  [34mfi[39;49;00m
  2258		  [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2259		  [34mcontinue[39;49;00m
  2260		  ;;
  2261		*.la) [31mlib[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m ;;
  2262		*.[31m$libext[39;49;00m)
  2263		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = conv; [34mthen[39;49;00m
  2264		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2265		    [34mcontinue[39;49;00m
  2266		  [34mfi[39;49;00m
  2267		  [34mcase[39;49;00m [31m$linkmode[39;49;00m [34min[39;49;00m
  2268		  lib)
  2269		    [31mvalid_a_lib[39;49;00m=no
  2270		    [34mcase[39;49;00m [31m$deplibs_check_method[39;49;00m [34min[39;49;00m
  2271		      match_pattern*)
  2272			[36mset[39;49;00m dummy [31m$deplibs_check_method[39;49;00m
  2273		        [31mmatch_pattern_regex[39;49;00m=[33m`[39;49;00mexpr [33m"[39;49;00m[31m$deplibs_check_method[39;49;00m[33m"[39;49;00m : [33m"[39;49;00m[31m$2[39;49;00m[33m \(.*\)[39;49;00m[33m"[39;49;00m[33m`[39;49;00m
  2274			[34mif[39;49;00m [36meval[39;49;00m [31m$echo[39;49;00m [33m\"[39;49;00m[31m$deplib[39;49;00m[33m\"[39;49;00m [34m2[39;49;00m>/dev/null [33m\[39;49;00m
  2275			    | [31m$SED[39;49;00m 10q [33m\[39;49;00m
  2276			    | [31m$EGREP[39;49;00m [33m"[39;49;00m[31m$match_pattern_regex[39;49;00m[33m"[39;49;00m > /dev/null; [34mthen[39;49;00m
  2277			  [31mvalid_a_lib[39;49;00m=yes
  2278			[34mfi[39;49;00m
  2279			;;
  2280		      pass_all)
  2281			[31mvalid_a_lib[39;49;00m=yes
  2282			;;
  2283	            [34mesac[39;49;00m
  2284		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$valid_a_lib[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
  2285		      [31m$echo[39;49;00m
  2286		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** Warning: Trying to link with static lib archive [39;49;00m[31m$deplib[39;49;00m[33m.[39;49;00m[33m"[39;49;00m
  2287		      [31m$echo[39;49;00m [33m"*** I have the capability to make that library automatically link in when"[39;49;00m
  2288		      [31m$echo[39;49;00m [33m"*** you link to this library.  But I can only do this if you have a"[39;49;00m
  2289		      [31m$echo[39;49;00m [33m"*** shared version of the library, which you do not appear to have"[39;49;00m
  2290		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** because the file extensions .[39;49;00m[31m$libext[39;49;00m[33m of this argument makes me believe[39;49;00m[33m"[39;49;00m
  2291		      [31m$echo[39;49;00m [33m"*** that it is just a static archive that I should not used here."[39;49;00m
  2292		    [34melse[39;49;00m
  2293		      [31m$echo[39;49;00m
  2294		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** Warning: Linking the shared library [39;49;00m[31m$output[39;49;00m[33m against the[39;49;00m[33m"[39;49;00m
  2295		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** static library [39;49;00m[31m$deplib[39;49;00m[33m is not portable![39;49;00m[33m"[39;49;00m
  2296		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2297		    [34mfi[39;49;00m
  2298		    [34mcontinue[39;49;00m
  2299		    ;;
  2300		  prog)
  2301		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m != link; [34mthen[39;49;00m
  2302		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2303		    [34melse[39;49;00m
  2304		      [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2305		      [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2306		    [34mfi[39;49;00m
  2307		    [34mcontinue[39;49;00m
  2308		    ;;
  2309		  [34mesac[39;49;00m [37m# linkmode[39;49;00m
  2310		  ;; [37m# *.$libext[39;49;00m
  2311		*.lo | *.[31m$objext[39;49;00m)
  2312		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = conv; [34mthen[39;49;00m
  2313		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2314		  [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2315		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = dlpreopen || [36mtest[39;49;00m [33m"[39;49;00m[31m$dlopen_support[39;49;00m[33m"[39;49;00m != yes || [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2316		      [37m# If there is no dlopen support or we're linking statically,[39;49;00m
  2317		      [37m# we need to preload.[39;49;00m
  2318		      [31mnewdlprefiles[39;49;00m=[33m"[39;49;00m[31m$newdlprefiles[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2319		      [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2320		      [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2321		    [34melse[39;49;00m
  2322		      [31mnewdlfiles[39;49;00m=[33m"[39;49;00m[31m$newdlfiles[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2323		    [34mfi[39;49;00m
  2324		  [34mfi[39;49;00m
  2325		  [34mcontinue[39;49;00m
  2326		  ;;
  2327		%DEPLIBS%)
  2328		  [31malldeplibs[39;49;00m=yes
  2329		  [34mcontinue[39;49;00m
  2330		  ;;
  2331		[34mesac[39;49;00m [37m# case $deplib[39;49;00m
  2332		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$found[39;49;00m[33m"[39;49;00m = yes || [36mtest[39;49;00m -f [33m"[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m :
  2333		[34melse[39;49;00m
  2334		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot find the library \`[39;49;00m[31m$lib[39;49;00m[33m' or unhandled argument \`[39;49;00m[31m$deplib[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2335		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2336		[34mfi[39;49;00m
  2337
  2338		[37m# Check to see that this really is a libtool archive.[39;49;00m
  2339		[34mif[39;49;00m ([33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m'2q'[39;49;00m [31m$lib[39;49;00m | grep [33m"[39;49;00m[33m^# Generated by .*[39;49;00m[31m$PACKAGE[39;49;00m[33m"[39;49;00m) >/dev/null [34m2[39;49;00m>&[34m1[39;49;00m; [34mthen[39;49;00m :
  2340		[34melse[39;49;00m
  2341		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: \`[39;49;00m[31m$lib[39;49;00m[33m' is not a valid libtool archive[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2342		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2343		[34mfi[39;49;00m
  2344
  2345		[31mladir[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%/[^/]*$%%'[39;49;00m[33m`[39;49;00m
  2346		[36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m = [33m"[39;49;00m[33mX[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m && [31mladir[39;49;00m=[33m"."[39;49;00m
  2347
  2348		[31mdlname[39;49;00m=
  2349		[31mdlopen[39;49;00m=
  2350		[31mdlpreopen[39;49;00m=
  2351		[31mlibdir[39;49;00m=
  2352		[31mlibrary_names[39;49;00m=
  2353		[31mold_library[39;49;00m=
  2354		[37m# If the library was installed with an old release of libtool,[39;49;00m
  2355		[37m# it will not redefine variables installed, or shouldnotlink[39;49;00m
  2356		[31minstalled[39;49;00m=yes
  2357		[31mshouldnotlink[39;49;00m=no
  2358		[31mavoidtemprpath[39;49;00m=
  2359
  2360
  2361		[37m# Read the .la file[39;49;00m
  2362		[34mcase[39;49;00m [31m$lib[39;49;00m [34min[39;49;00m
  2363		*/* | *[33m\\[39;49;00m*) . [31m$lib[39;49;00m ;;
  2364		*) . ./[31m$lib[39;49;00m ;;
  2365		[34mesac[39;49;00m
  2366
  2367		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"lib,link"[39;49;00m ||
  2368		   [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,scan"[39;49;00m ||
  2369		   { [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != prog && [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != lib; }; [34mthen[39;49;00m
  2370		  [36mtest[39;49;00m -n [33m"[39;49;00m[31m$dlopen[39;49;00m[33m"[39;49;00m && [31mdlfiles[39;49;00m=[33m"[39;49;00m[31m$dlfiles[39;49;00m[33m [39;49;00m[31m$dlopen[39;49;00m[33m"[39;49;00m
  2371		  [36mtest[39;49;00m -n [33m"[39;49;00m[31m$dlpreopen[39;49;00m[33m"[39;49;00m && [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$dlpreopen[39;49;00m[33m"[39;49;00m
  2372		[34mfi[39;49;00m
  2373
  2374		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = conv; [34mthen[39;49;00m
  2375		  [37m# Only check for convenience libraries[39;49;00m
  2376		  [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$lib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2377		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2378		    [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2379		      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot find name of link library for \`[39;49;00m[31m$lib[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2380		      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2381		    [34mfi[39;49;00m
  2382		    [37m# It is a libtool convenience library, so add in its objects.[39;49;00m
  2383		    [31mconvenience[39;49;00m=[33m"[39;49;00m[31m$convenience[39;49;00m[33m [39;49;00m[31m$ladir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m
  2384		    [31mold_convenience[39;49;00m=[33m"[39;49;00m[31m$old_convenience[39;49;00m[33m [39;49;00m[31m$ladir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m
  2385		    [31mtmp_libs[39;49;00m=
  2386		    [34mfor[39;49;00m deplib [34min[39;49;00m [31m$dependency_libs[39;49;00m; [34mdo[39;49;00m
  2387		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2388	              [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$duplicate_deps[39;49;00m[33m"[39;49;00m = [33m"Xyes"[39;49;00m ; [34mthen[39;49;00m
  2389		        [34mcase[39;49;00m [33m"[39;49;00m[31m$tmp_libs[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2390		        *[33m"[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) [31mspecialdeplibs[39;49;00m=[33m"[39;49;00m[31m$specialdeplibs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m ;;
  2391		        [34mesac[39;49;00m
  2392	              [34mfi[39;49;00m
  2393		      [31mtmp_libs[39;49;00m=[33m"[39;49;00m[31m$tmp_libs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2394		    [34mdone[39;49;00m
  2395		  [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != prog && [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m != lib; [34mthen[39;49;00m
  2396		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: \`[39;49;00m[31m$lib[39;49;00m[33m' is not a convenience library[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2397		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2398		  [34mfi[39;49;00m
  2399		  [34mcontinue[39;49;00m
  2400		[34mfi[39;49;00m [37m# $pass = conv[39;49;00m
  2401
  2402
  2403		[37m# Get the name of the library we link against.[39;49;00m
  2404		[31mlinklib[39;49;00m=
  2405		[34mfor[39;49;00m l [34min[39;49;00m [31m$old_library[39;49;00m [31m$library_names[39;49;00m; [34mdo[39;49;00m
  2406		  [31mlinklib[39;49;00m=[33m"[39;49;00m[31m$l[39;49;00m[33m"[39;49;00m
  2407		[34mdone[39;49;00m
  2408		[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2409		  [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot find name of link library for \`[39;49;00m[31m$lib[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2410		  [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2411		[34mfi[39;49;00m
  2412
  2413		[37m# This library was specified with -dlopen.[39;49;00m
  2414		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = dlopen; [34mthen[39;49;00m
  2415		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2416		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot -dlopen a convenience library: \`[39;49;00m[31m$lib[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2417		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2418		  [34mfi[39;49;00m
  2419		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$dlname[39;49;00m[33m"[39;49;00m ||
  2420		     [36mtest[39;49;00m [33m"[39;49;00m[31m$dlopen_support[39;49;00m[33m"[39;49;00m != yes ||
  2421		     [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2422		    [37m# If there is no dlname, no dlopen support or we're linking[39;49;00m
  2423		    [37m# statically, we need to preload.  We also need to preload any[39;49;00m
  2424		    [37m# dependent libraries so libltdl's deplib preloader doesn't[39;49;00m
  2425		    [37m# bomb out in the load deplibs phase.[39;49;00m
  2426		    [31mdlprefiles[39;49;00m=[33m"[39;49;00m[31m$dlprefiles[39;49;00m[33m [39;49;00m[31m$lib[39;49;00m[33m [39;49;00m[31m$dependency_libs[39;49;00m[33m"[39;49;00m
  2427		  [34melse[39;49;00m
  2428		    [31mnewdlfiles[39;49;00m=[33m"[39;49;00m[31m$newdlfiles[39;49;00m[33m [39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m
  2429		  [34mfi[39;49;00m
  2430		  [34mcontinue[39;49;00m
  2431		[34mfi[39;49;00m [37m# $pass = dlopen[39;49;00m
  2432
  2433		[37m# We need an absolute path.[39;49;00m
  2434		[34mcase[39;49;00m [31m$ladir[39;49;00m [34min[39;49;00m
  2435		[[33m\\[39;49;00m/]* | [A-Za-z]:[[33m\\[39;49;00m/]*) [31mabs_ladir[39;49;00m=[33m"[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m ;;
  2436		*)
  2437		  [31mabs_ladir[39;49;00m=[33m`[39;49;00m[36mcd[39;49;00m [33m"[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m && [36mpwd[39;49;00m[33m`[39;49;00m
  2438		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2439		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: cannot determine absolute directory name of \`[39;49;00m[31m$ladir[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2440		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: passing it literally to the linker, although it might fail[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2441		    [31mabs_ladir[39;49;00m=[33m"[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m
  2442		  [34mfi[39;49;00m
  2443		  ;;
  2444		[34mesac[39;49;00m
  2445		[31mlaname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's%^.*/%%'[39;49;00m[33m`[39;49;00m
  2446
  2447		[37m# Find the relevant object directory and library name.[39;49;00m
  2448		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$installed[39;49;00m[33m"[39;49;00m = Xyes; [34mthen[39;49;00m
  2449		  [34mif[39;49;00m [36mtest[39;49;00m ! -f [33m"[39;49;00m[31m$libdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m -f [33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2450		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: warning: library \`[39;49;00m[31m$lib[39;49;00m[33m' was moved.[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2451		    [31mdir[39;49;00m=[33m"[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m
  2452		    [31mabsdir[39;49;00m=[33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m
  2453		    [31mlibdir[39;49;00m=[33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m
  2454		  [34melse[39;49;00m
  2455		    [31mdir[39;49;00m=[33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2456		    [31mabsdir[39;49;00m=[33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2457		  [34mfi[39;49;00m
  2458		  [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$hardcode_automatic[39;49;00m[33m"[39;49;00m = Xyes && [31mavoidtemprpath[39;49;00m=yes
  2459		[34melse[39;49;00m
  2460		  [34mif[39;49;00m [36mtest[39;49;00m ! -f [33m"[39;49;00m[31m$ladir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m -f [33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2461		    [31mdir[39;49;00m=[33m"[39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m
  2462		    [31mabsdir[39;49;00m=[33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m
  2463		    [37m# Remove this search path later[39;49;00m
  2464		    [31mnotinst_path[39;49;00m=[33m"[39;49;00m[31m$notinst_path[39;49;00m[33m [39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m
  2465		  [34melse[39;49;00m
  2466		    [31mdir[39;49;00m=[33m"[39;49;00m[31m$ladir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m
  2467		    [31mabsdir[39;49;00m=[33m"[39;49;00m[31m$abs_ladir[39;49;00m[33m/[39;49;00m[31m$objdir[39;49;00m[33m"[39;49;00m
  2468		    [37m# Remove this search path later[39;49;00m
  2469		    [31mnotinst_path[39;49;00m=[33m"[39;49;00m[31m$notinst_path[39;49;00m[33m [39;49;00m[31m$abs_ladir[39;49;00m[33m"[39;49;00m
  2470		  [34mfi[39;49;00m
  2471		[34mfi[39;49;00m [37m# $installed = yes[39;49;00m
  2472		[31mname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$laname[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/\.la$//'[39;49;00m -e [33m's/^lib//'[39;49;00m[33m`[39;49;00m
  2473
  2474		[37m# This library was specified with -dlpreopen.[39;49;00m
  2475		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = dlpreopen; [34mthen[39;49;00m
  2476		  [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2477		    [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: cannot -dlpreopen a convenience library: \`[39;49;00m[31m$lib[39;49;00m[33m'[39;49;00m[33m"[39;49;00m [34m1[39;49;00m>&[34m2[39;49;00m
  2478		    [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2479		  [34mfi[39;49;00m
  2480		  [37m# Prefer using a static library (so that no silly _DYNAMIC symbols[39;49;00m
  2481		  [37m# are required to link).[39;49;00m
  2482		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2483		    [31mnewdlprefiles[39;49;00m=[33m"[39;49;00m[31m$newdlprefiles[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m
  2484		  [37m# Otherwise, use the dlname, so that lt_dlopen finds it.[39;49;00m
  2485		  [34melif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$dlname[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2486		    [31mnewdlprefiles[39;49;00m=[33m"[39;49;00m[31m$newdlprefiles[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$dlname[39;49;00m[33m"[39;49;00m
  2487		  [34melse[39;49;00m
  2488		    [31mnewdlprefiles[39;49;00m=[33m"[39;49;00m[31m$newdlprefiles[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2489		  [34mfi[39;49;00m
  2490		[34mfi[39;49;00m [37m# $pass = dlpreopen[39;49;00m
  2491
  2492		[34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2493		  [37m# Link the convenience library[39;49;00m
  2494		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = lib; [34mthen[39;49;00m
  2495		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2496		  [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,link"[39;49;00m; [34mthen[39;49;00m
  2497		    [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2498		    [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2499		  [34melse[39;49;00m
  2500		    [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$lib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m [37m# used for prog,scan pass[39;49;00m
  2501		  [34mfi[39;49;00m
  2502		  [34mcontinue[39;49;00m
  2503		[34mfi[39;49;00m
  2504
  2505
  2506		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog && [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m != link; [34mthen[39;49;00m
  2507		  [31mnewlib_search_path[39;49;00m=[33m"[39;49;00m[31m$newlib_search_path[39;49;00m[33m [39;49;00m[31m$ladir[39;49;00m[33m"[39;49;00m
  2508		  [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$lib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2509
  2510		  [31mlinkalldeplibs[39;49;00m=no
  2511		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$link_all_deplibs[39;49;00m[33m"[39;49;00m != no || [36mtest[39;49;00m -z [33m"[39;49;00m[31m$library_names[39;49;00m[33m"[39;49;00m ||
  2512		     [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2513		    [31mlinkalldeplibs[39;49;00m=yes
  2514		  [34mfi[39;49;00m
  2515
  2516		  [31mtmp_libs[39;49;00m=
  2517		  [34mfor[39;49;00m deplib [34min[39;49;00m [31m$dependency_libs[39;49;00m; [34mdo[39;49;00m
  2518		    [34mcase[39;49;00m [31m$deplib[39;49;00m [34min[39;49;00m
  2519		    -L*) [31mnewlib_search_path[39;49;00m=[33m"[39;49;00m[31m$newlib_search_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m[33m`[39;49;00m[31m$echo[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m | [31m$Xsed[39;49;00m -e [33m's/^-L//'[39;49;00m[33m`[39;49;00m;; [37m### testsuite: skip nested quoting test[39;49;00m
  2520		    [34mesac[39;49;00m
  2521		    [37m# Need to link against all dependency_libs?[39;49;00m
  2522		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkalldeplibs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2523		      [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2524		    [34melse[39;49;00m
  2525		      [37m# Need to hardcode shared library paths[39;49;00m
  2526		      [37m# or/and link against static libraries[39;49;00m
  2527		      [31mnewdependency_libs[39;49;00m=[33m"[39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[31m$newdependency_libs[39;49;00m[33m"[39;49;00m
  2528		    [34mfi[39;49;00m
  2529		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[33mX[39;49;00m[31m$duplicate_deps[39;49;00m[33m"[39;49;00m = [33m"Xyes"[39;49;00m ; [34mthen[39;49;00m
  2530		      [34mcase[39;49;00m [33m"[39;49;00m[31m$tmp_libs[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2531		      *[33m"[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) [31mspecialdeplibs[39;49;00m=[33m"[39;49;00m[31m$specialdeplibs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m ;;
  2532		      [34mesac[39;49;00m
  2533		    [34mfi[39;49;00m
  2534		    [31mtmp_libs[39;49;00m=[33m"[39;49;00m[31m$tmp_libs[39;49;00m[33m [39;49;00m[31m$deplib[39;49;00m[33m"[39;49;00m
  2535		  [34mdone[39;49;00m [37m# for deplib[39;49;00m
  2536		  [34mcontinue[39;49;00m
  2537		[34mfi[39;49;00m [37m# $linkmode = prog...[39;49;00m
  2538
  2539		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m,[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = [33m"prog,link"[39;49;00m; [34mthen[39;49;00m
  2540		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$library_names[39;49;00m[33m"[39;49;00m &&
  2541		     { [36mtest[39;49;00m [33m"[39;49;00m[31m$prefer_static_libs[39;49;00m[33m"[39;49;00m = no || [36mtest[39;49;00m -z [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m; }; [34mthen[39;49;00m
  2542		    [37m# We need to hardcode the library path[39;49;00m
  2543		    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$shlibpath_var[39;49;00m[33m"[39;49;00m && [36mtest[39;49;00m -z [33m"[39;49;00m[31m$avoidtemprpath[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m
  2544		      [37m# Make sure the rpath contains only unique directories.[39;49;00m
  2545		      [34mcase[39;49;00m [33m"[39;49;00m[31m$temp_rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2546		      *[33m"[39;49;00m[33m [39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2547		      *[33m"[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2548		      *) [31mtemp_rpath[39;49;00m=[33m"[39;49;00m[31m$temp_rpath[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m"[39;49;00m ;;
  2549		      [34mesac[39;49;00m
  2550		    [34mfi[39;49;00m
  2551
  2552		    [37m# Hardcode the library path.[39;49;00m
  2553		    [37m# Skip directories that are in the system default run-time[39;49;00m
  2554		    [37m# search path.[39;49;00m
  2555		    [34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$sys_lib_dlsearch_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2556		    *[33m"[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2557		    *)
  2558		      [34mcase[39;49;00m [33m"[39;49;00m[31m$compile_rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2559		      *[33m"[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2560		      *) [31mcompile_rpath[39;49;00m=[33m"[39;49;00m[31m$compile_rpath[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m"[39;49;00m
  2561		      [34mesac[39;49;00m
  2562		      ;;
  2563		    [34mesac[39;49;00m
  2564		    [34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$sys_lib_dlsearch_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2565		    *[33m"[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2566		    *)
  2567		      [34mcase[39;49;00m [33m"[39;49;00m[31m$finalize_rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2568		      *[33m"[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2569		      *) [31mfinalize_rpath[39;49;00m=[33m"[39;49;00m[31m$finalize_rpath[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2570		      [34mesac[39;49;00m
  2571		      ;;
  2572		    [34mesac[39;49;00m
  2573		  [34mfi[39;49;00m [37m# $linkmode,$pass = prog,link...[39;49;00m
  2574
  2575		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$alldeplibs[39;49;00m[33m"[39;49;00m = yes &&
  2576		     { [36mtest[39;49;00m [33m"[39;49;00m[31m$deplibs_check_method[39;49;00m[33m"[39;49;00m = pass_all ||
  2577		       { [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes &&
  2578			 [36mtest[39;49;00m -n [33m"[39;49;00m[31m$library_names[39;49;00m[33m"[39;49;00m; }; }; [34mthen[39;49;00m
  2579		    [37m# We only need to search for static libraries[39;49;00m
  2580		    [34mcontinue[39;49;00m
  2581		  [34mfi[39;49;00m
  2582		[34mfi[39;49;00m
  2583
  2584		[31mlink_static[39;49;00m=no [37m# Whether the deplib will be linked statically[39;49;00m
  2585		[31muse_static_libs[39;49;00m=[31m$prefer_static_libs[39;49;00m
  2586		[34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$use_static_libs[39;49;00m[33m"[39;49;00m = built && [36mtest[39;49;00m [33m"[39;49;00m[31m$installed[39;49;00m[33m"[39;49;00m = yes ; [34mthen[39;49;00m
  2587		  [31muse_static_libs[39;49;00m=no
  2588		[34mfi[39;49;00m
  2589		[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$library_names[39;49;00m[33m"[39;49;00m &&
  2590		   { [36mtest[39;49;00m [33m"[39;49;00m[31m$use_static_libs[39;49;00m[33m"[39;49;00m = no || [36mtest[39;49;00m -z [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m; }; [34mthen[39;49;00m
  2591		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$installed[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2592		    [31mnotinst_deplibs[39;49;00m=[33m"[39;49;00m[31m$notinst_deplibs[39;49;00m[33m [39;49;00m[31m$lib[39;49;00m[33m"[39;49;00m
  2593		    [31mneed_relink[39;49;00m=yes
  2594		  [34mfi[39;49;00m
  2595		  [37m# This is a shared library[39;49;00m
  2596
  2597		  [37m# Warn about portability, can't link against -module's on[39;49;00m
  2598		  [37m# some systems (darwin)[39;49;00m
  2599		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$shouldnotlink[39;49;00m[33m"[39;49;00m = yes && [36mtest[39;49;00m [33m"[39;49;00m[31m$pass[39;49;00m[33m"[39;49;00m = link ; [34mthen[39;49;00m
  2600		    [31m$echo[39;49;00m
  2601		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2602		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** Warning: Linking the executable [39;49;00m[31m$output[39;49;00m[33m against the loadable module[39;49;00m[33m"[39;49;00m
  2603		    [34melse[39;49;00m
  2604		      [31m$echo[39;49;00m [33m"[39;49;00m[33m*** Warning: Linking the shared library [39;49;00m[31m$output[39;49;00m[33m against the loadable module[39;49;00m[33m"[39;49;00m
  2605		    [34mfi[39;49;00m
  2606		    [31m$echo[39;49;00m [33m"[39;49;00m[33m*** [39;49;00m[31m$linklib[39;49;00m[33m is not portable![39;49;00m[33m"[39;49;00m
  2607		  [34mfi[39;49;00m
  2608		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = lib &&
  2609		     [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_into_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2610		    [37m# Hardcode the library path.[39;49;00m
  2611		    [37m# Skip directories that are in the system default run-time[39;49;00m
  2612		    [37m# search path.[39;49;00m
  2613		    [34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$sys_lib_dlsearch_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2614		    *[33m"[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2615		    *)
  2616		      [34mcase[39;49;00m [33m"[39;49;00m[31m$compile_rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2617		      *[33m"[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2618		      *) [31mcompile_rpath[39;49;00m=[33m"[39;49;00m[31m$compile_rpath[39;49;00m[33m [39;49;00m[31m$absdir[39;49;00m[33m"[39;49;00m
  2619		      [34mesac[39;49;00m
  2620		      ;;
  2621		    [34mesac[39;49;00m
  2622		    [34mcase[39;49;00m [33m"[39;49;00m[33m [39;49;00m[31m$sys_lib_dlsearch_path[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2623		    *[33m"[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2624		    *)
  2625		      [34mcase[39;49;00m [33m"[39;49;00m[31m$finalize_rpath[39;49;00m[33m [39;49;00m[33m"[39;49;00m [34min[39;49;00m
  2626		      *[33m"[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m [39;49;00m[33m"[39;49;00m*) ;;
  2627		      *) [31mfinalize_rpath[39;49;00m=[33m"[39;49;00m[31m$finalize_rpath[39;49;00m[33m [39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2628		      [34mesac[39;49;00m
  2629		      ;;
  2630		    [34mesac[39;49;00m
  2631		  [34mfi[39;49;00m
  2632
  2633		  [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$old_archive_from_expsyms_cmds[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2634		    [37m# figure out the soname[39;49;00m
  2635		    [36mset[39;49;00m dummy [31m$library_names[39;49;00m
  2636		    [31mrealname[39;49;00m=[33m"[39;49;00m[31m$2[39;49;00m[33m"[39;49;00m
  2637		    shift; [36mshift[39;49;00m
  2638		    [31mlibname[39;49;00m=[33m`[39;49;00m[36meval[39;49;00m [33m\\[39;49;00m[31m$echo[39;49;00m [33m\"[39;49;00m[31m$libname_spec[39;49;00m[33m\"[39;49;00m[33m`[39;49;00m
  2639		    [37m# use dlname if we got it. it's perfectly good, no?[39;49;00m
  2640		    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$dlname[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2641		      [31msoname[39;49;00m=[33m"[39;49;00m[31m$dlname[39;49;00m[33m"[39;49;00m
  2642		    [34melif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$soname_spec[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2643		      [37m# bleh windows[39;49;00m
  2644		      [34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  2645		      *cygwin* | mingw*)
  2646			[31mmajor[39;49;00m=[33m`[39;49;00mexpr [31m$current[39;49;00m - [31m$age[39;49;00m[33m`[39;49;00m
  2647			[31mversuffix[39;49;00m=[33m"[39;49;00m[33m-[39;49;00m[31m$major[39;49;00m[33m"[39;49;00m
  2648			;;
  2649		      [34mesac[39;49;00m
  2650		      [36meval[39;49;00m [31msoname[39;49;00m=[33m\"[39;49;00m[31m$soname_spec[39;49;00m[33m\"[39;49;00m
  2651		    [34melse[39;49;00m
  2652		      [31msoname[39;49;00m=[33m"[39;49;00m[31m$realname[39;49;00m[33m"[39;49;00m
  2653		    [34mfi[39;49;00m
  2654
  2655		    [37m# Make a new name for the extract_expsyms_cmds to use[39;49;00m
  2656		    [31msoroot[39;49;00m=[33m"[39;49;00m[31m$soname[39;49;00m[33m"[39;49;00m
  2657		    [31msoname[39;49;00m=[33m`[39;49;00m[31m$echo[39;49;00m [31m$soroot[39;49;00m | [33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m -e [33m's/^.*\///'[39;49;00m[33m`[39;49;00m
  2658		    [31mnewlib[39;49;00m=[33m"[39;49;00m[33mlibimp-`[39;49;00m[31m$echo[39;49;00m[33m [39;49;00m[31m$soname[39;49;00m[33m | [39;49;00m[33m${[39;49;00m[31mSED[39;49;00m[33m}[39;49;00m[33m 's/^lib//;s/\.dll[39;49;00m$[33m//'`.a[39;49;00m[33m"[39;49;00m
  2659
  2660		    [37m# If the library has no export list, then create one now[39;49;00m
  2661		    [34mif[39;49;00m [36mtest[39;49;00m -f [33m"[39;49;00m[31m$output_objdir[39;49;00m[33m/[39;49;00m[31m$soname[39;49;00m[33m-def[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m :
  2662		    [34melse[39;49;00m
  2663		      [31m$show[39;49;00m [33m"[39;49;00m[33mextracting exported symbol list from \`[39;49;00m[31m$soname[39;49;00m[33m'[39;49;00m[33m"[39;49;00m
  2664		      [31msave_ifs[39;49;00m=[33m"[39;49;00m[31m$IFS[39;49;00m[33m"[39;49;00m; [31mIFS[39;49;00m=[33m'~'[39;49;00m
  2665		      [31mcmds[39;49;00m=[31m$extract_expsyms_cmds[39;49;00m
  2666		      [34mfor[39;49;00m cmd [34min[39;49;00m [31m$cmds[39;49;00m; [34mdo[39;49;00m
  2667			[31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  2668			[36meval[39;49;00m [31mcmd[39;49;00m=[33m\"[39;49;00m[31m$cmd[39;49;00m[33m\"[39;49;00m
  2669			[31m$show[39;49;00m [33m"[39;49;00m[31m$cmd[39;49;00m[33m"[39;49;00m
  2670			[31m$run[39;49;00m [36meval[39;49;00m [33m"[39;49;00m[31m$cmd[39;49;00m[33m"[39;49;00m || [36mexit[39;49;00m [31m$?[39;49;00m
  2671		      [34mdone[39;49;00m
  2672		      [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  2673		    [34mfi[39;49;00m
  2674
  2675		    [37m# Create $newlib[39;49;00m
  2676		    [34mif[39;49;00m [36mtest[39;49;00m -f [33m"[39;49;00m[31m$output_objdir[39;49;00m[33m/[39;49;00m[31m$newlib[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m :; [34melse[39;49;00m
  2677		      [31m$show[39;49;00m [33m"[39;49;00m[33mgenerating import library for \`[39;49;00m[31m$soname[39;49;00m[33m'[39;49;00m[33m"[39;49;00m
  2678		      [31msave_ifs[39;49;00m=[33m"[39;49;00m[31m$IFS[39;49;00m[33m"[39;49;00m; [31mIFS[39;49;00m=[33m'~'[39;49;00m
  2679		      [31mcmds[39;49;00m=[31m$old_archive_from_expsyms_cmds[39;49;00m
  2680		      [34mfor[39;49;00m cmd [34min[39;49;00m [31m$cmds[39;49;00m; [34mdo[39;49;00m
  2681			[31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  2682			[36meval[39;49;00m [31mcmd[39;49;00m=[33m\"[39;49;00m[31m$cmd[39;49;00m[33m\"[39;49;00m
  2683			[31m$show[39;49;00m [33m"[39;49;00m[31m$cmd[39;49;00m[33m"[39;49;00m
  2684			[31m$run[39;49;00m [36meval[39;49;00m [33m"[39;49;00m[31m$cmd[39;49;00m[33m"[39;49;00m || [36mexit[39;49;00m [31m$?[39;49;00m
  2685		      [34mdone[39;49;00m
  2686		      [31mIFS[39;49;00m=[33m"[39;49;00m[31m$save_ifs[39;49;00m[33m"[39;49;00m
  2687		    [34mfi[39;49;00m
  2688		    [37m# make sure the library variables are pointing to the new library[39;49;00m
  2689		    [31mdir[39;49;00m=[31m$output_objdir[39;49;00m
  2690		    [31mlinklib[39;49;00m=[31m$newlib[39;49;00m
  2691		  [34mfi[39;49;00m [37m# test -n "$old_archive_from_expsyms_cmds"[39;49;00m
  2692
  2693		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog || [36mtest[39;49;00m [33m"[39;49;00m[31m$mode[39;49;00m[33m"[39;49;00m != relink; [34mthen[39;49;00m
  2694		    [31madd_shlibpath[39;49;00m=
  2695		    [31madd_dir[39;49;00m=
  2696		    [31madd[39;49;00m=
  2697		    [31mlib_linked[39;49;00m=yes
  2698		    [34mcase[39;49;00m [31m$hardcode_action[39;49;00m [34min[39;49;00m
  2699		    immediate | unsupported)
  2700		      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_direct[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2701			[31madd[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2702			[34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  2703			  *-*-sco3.2v5.0.[[34m024[39;49;00m]*) [31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  2704			  *-*-sysv4*uw2*) [31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  2705			  *-*-sysv5OpenUNIX* | *-*-sysv5UnixWare7.[[34m01[39;49;00m].[[34m10[39;49;00m]* | [33m\[39;49;00m
  2706			    *-*-unixware7*) [31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  2707			  *-*-darwin* )
  2708			    [37m# if the lib is a module then we can not link against[39;49;00m
  2709			    [37m# it, someone is ignoring the new warnings I added[39;49;00m
  2710			    [34mif[39;49;00m /usr/bin/file -L [31m$add[39;49;00m [34m2[39;49;00m> /dev/null |
  2711	                      [31m$EGREP[39;49;00m [33m": [^:]* bundle"[39;49;00m >/dev/null ; [34mthen[39;49;00m
  2712			      [31m$echo[39;49;00m [33m"[39;49;00m[33m** Warning, lib [39;49;00m[31m$linklib[39;49;00m[33m is a module, not a shared library[39;49;00m[33m"[39;49;00m
  2713			      [34mif[39;49;00m [36mtest[39;49;00m -z [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m
  2714			        [31m$echo[39;49;00m
  2715			        [31m$echo[39;49;00m [33m"** And there doesn't seem to be a static archive available"[39;49;00m
  2716			        [31m$echo[39;49;00m [33m"** The link will probably fail, sorry"[39;49;00m
  2717			      [34melse[39;49;00m
  2718			        [31madd[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m
  2719			      [34mfi[39;49;00m
  2720			    [34mfi[39;49;00m
  2721			[34mesac[39;49;00m
  2722		      [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_minus_L[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2723			[34mcase[39;49;00m [31m$host[39;49;00m [34min[39;49;00m
  2724			*-*-sunos*) [31madd_shlibpath[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m ;;
  2725			[34mesac[39;49;00m
  2726			[31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  2727			[31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2728		      [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_shlibpath_var[39;49;00m[33m"[39;49;00m = no; [34mthen[39;49;00m
  2729			[31madd_shlibpath[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  2730			[31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2731		      [34melse[39;49;00m
  2732			[31mlib_linked[39;49;00m=no
  2733		      [34mfi[39;49;00m
  2734		      ;;
  2735		    relink)
  2736		      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_direct[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2737			[31madd[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2738		      [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_minus_L[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2739			[31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  2740			[37m# Try looking first in the location we're being installed to.[39;49;00m
  2741			[34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$inst_prefix_dir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2742			  [34mcase[39;49;00m [31m$libdir[39;49;00m [34min[39;49;00m
  2743			    [[33m\\[39;49;00m/]*)
  2744			      [31madd_dir[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m -L[39;49;00m[31m$inst_prefix_dir[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2745			      ;;
  2746			  [34mesac[39;49;00m
  2747			[34mfi[39;49;00m
  2748			[31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2749		      [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_shlibpath_var[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2750			[31madd_shlibpath[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m"[39;49;00m
  2751			[31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2752		      [34melse[39;49;00m
  2753			[31mlib_linked[39;49;00m=no
  2754		      [34mfi[39;49;00m
  2755		      ;;
  2756		    *) [31mlib_linked[39;49;00m=no ;;
  2757		    [34mesac[39;49;00m
  2758
  2759		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$lib_linked[39;49;00m[33m"[39;49;00m != yes; [34mthen[39;49;00m
  2760		      [31m$echo[39;49;00m [33m"[39;49;00m[31m$modename[39;49;00m[33m: configuration error: unsupported hardcode properties[39;49;00m[33m"[39;49;00m
  2761		      [36mexit[39;49;00m [31m$EXIT_FAILURE[39;49;00m
  2762		    [34mfi[39;49;00m
  2763
  2764		    [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add_shlibpath[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2765		      [34mcase[39;49;00m :[31m$compile_shlibpath[39;49;00m: [34min[39;49;00m
  2766		      *[33m"[39;49;00m[33m:[39;49;00m[31m$add_shlibpath[39;49;00m[33m:[39;49;00m[33m"[39;49;00m*) ;;
  2767		      *) [31mcompile_shlibpath[39;49;00m=[33m"[39;49;00m[31m$compile_shlibpath[39;49;00m[31m$add_shlibpath[39;49;00m[33m:[39;49;00m[33m"[39;49;00m ;;
  2768		      [34mesac[39;49;00m
  2769		    [34mfi[39;49;00m
  2770		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2771		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add_dir[39;49;00m[33m"[39;49;00m && [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2772		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add[39;49;00m[33m"[39;49;00m && [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$add[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2773		    [34melse[39;49;00m
  2774		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add_dir[39;49;00m[33m"[39;49;00m && [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2775		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add[39;49;00m[33m"[39;49;00m && [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$add[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2776		      [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_direct[39;49;00m[33m"[39;49;00m != yes && [33m\[39;49;00m
  2777			 [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_minus_L[39;49;00m[33m"[39;49;00m != yes && [33m\[39;49;00m
  2778			 [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_shlibpath_var[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2779			[34mcase[39;49;00m :[31m$finalize_shlibpath[39;49;00m: [34min[39;49;00m
  2780			*[33m"[39;49;00m[33m:[39;49;00m[31m$libdir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m*) ;;
  2781			*) [31mfinalize_shlibpath[39;49;00m=[33m"[39;49;00m[31m$finalize_shlibpath[39;49;00m[31m$libdir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m ;;
  2782			[34mesac[39;49;00m
  2783		      [34mfi[39;49;00m
  2784		    [34mfi[39;49;00m
  2785		  [34mfi[39;49;00m
  2786
  2787		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog || [36mtest[39;49;00m [33m"[39;49;00m[31m$mode[39;49;00m[33m"[39;49;00m = relink; [34mthen[39;49;00m
  2788		    [31madd_shlibpath[39;49;00m=
  2789		    [31madd_dir[39;49;00m=
  2790		    [31madd[39;49;00m=
  2791		    [37m# Finalize command for both is simple: just hardcode it.[39;49;00m
  2792		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_direct[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2793		      [31madd[39;49;00m=[33m"[39;49;00m[31m$libdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2794		    [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_minus_L[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2795		      [31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2796		      [31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2797		    [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_shlibpath_var[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2798		      [34mcase[39;49;00m :[31m$finalize_shlibpath[39;49;00m: [34min[39;49;00m
  2799		      *[33m"[39;49;00m[33m:[39;49;00m[31m$libdir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m*) ;;
  2800		      *) [31mfinalize_shlibpath[39;49;00m=[33m"[39;49;00m[31m$finalize_shlibpath[39;49;00m[31m$libdir[39;49;00m[33m:[39;49;00m[33m"[39;49;00m ;;
  2801		      [34mesac[39;49;00m
  2802		      [31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2803		    [34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_automatic[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2804		      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$inst_prefix_dir[39;49;00m[33m"[39;49;00m &&
  2805			 [36mtest[39;49;00m -f [33m"[39;49;00m[31m$inst_prefix_dir[39;49;00m[31m$libdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m ; [34mthen[39;49;00m
  2806		        [31madd[39;49;00m=[33m"[39;49;00m[31m$inst_prefix_dir[39;49;00m[31m$libdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2807		      [34melse[39;49;00m
  2808		        [31madd[39;49;00m=[33m"[39;49;00m[31m$libdir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m"[39;49;00m
  2809		      [34mfi[39;49;00m
  2810		    [34melse[39;49;00m
  2811		      [37m# We cannot seem to hardcode it, guess we'll fake it.[39;49;00m
  2812		      [31madd_dir[39;49;00m=[33m"[39;49;00m[33m-L[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2813		      [37m# Try looking first in the location we're being installed to.[39;49;00m
  2814		      [34mif[39;49;00m [36mtest[39;49;00m -n [33m"[39;49;00m[31m$inst_prefix_dir[39;49;00m[33m"[39;49;00m; [34mthen[39;49;00m
  2815			[34mcase[39;49;00m [31m$libdir[39;49;00m [34min[39;49;00m
  2816			  [[33m\\[39;49;00m/]*)
  2817			    [31madd_dir[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m -L[39;49;00m[31m$inst_prefix_dir[39;49;00m[31m$libdir[39;49;00m[33m"[39;49;00m
  2818			    ;;
  2819			[34mesac[39;49;00m
  2820		      [34mfi[39;49;00m
  2821		      [31madd[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m"[39;49;00m
  2822		    [34mfi[39;49;00m
  2823
  2824		    [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2825		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add_dir[39;49;00m[33m"[39;49;00m && [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2826		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add[39;49;00m[33m"[39;49;00m && [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$add[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2827		    [34melse[39;49;00m
  2828		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add_dir[39;49;00m[33m"[39;49;00m && [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$add_dir[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2829		      [36mtest[39;49;00m -n [33m"[39;49;00m[31m$add[39;49;00m[33m"[39;49;00m && [31mdeplibs[39;49;00m=[33m"[39;49;00m[31m$add[39;49;00m[33m [39;49;00m[31m$deplibs[39;49;00m[33m"[39;49;00m
  2830		    [34mfi[39;49;00m
  2831		  [34mfi[39;49;00m
  2832		[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$linkmode[39;49;00m[33m"[39;49;00m = prog; [34mthen[39;49;00m
  2833		  [37m# Here we assume that one of hardcode_direct or hardcode_minus_L[39;49;00m
  2834		  [37m# is not unsupported.  This is valid on all known static and[39;49;00m
  2835		  [37m# shared platforms.[39;49;00m
  2836		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$hardcode_direct[39;49;00m[33m"[39;49;00m != unsupported; [34mthen[39;49;00m
  2837		    [36mtest[39;49;00m -n [33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m && [31mlinklib[39;49;00m=[33m"[39;49;00m[31m$old_library[39;49;00m[33m"[39;49;00m
  2838		    [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2839		    [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[31m$dir[39;49;00m[33m/[39;49;00m[31m$linklib[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2840		  [34melse[39;49;00m
  2841		    [31mcompile_deplibs[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m -L[39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[31m$compile_deplibs[39;49;00m[33m"[39;49;00m
  2842		    [31mfinalize_deplibs[39;49;00m=[33m"[39;49;00m[33m-l[39;49;00m[31m$name[39;49;00m[33m -L[39;49;00m[31m$dir[39;49;00m[33m [39;49;00m[31m$finalize_deplibs[39;49;00m[33m"[39;49;00m
  2843		  [34mfi[39;49;00m
  2844		[34melif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$build_libtool_libs[39;49;00m[33m"[39;49;00m = yes; [34mthen[39;49;00m
  2845		  [37m# Not a shared library[39;49;00m
  2846		  [34mif[39;49;00m [36mtest[39;49;00m [33m"[39;49;00m[31m$deplibs_check_method[39;49;00m[33m"[39;49;00m != pass_all; [34mthen[39;49;00m
  2847		    [37m# We're trying link a shared library against a static one[39;49;00m
  2848		    # but the system doesn[04m[91m'[39;49;00mt support it.
