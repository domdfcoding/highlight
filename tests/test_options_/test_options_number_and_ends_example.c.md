     1	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m<string.h>[39;49;00m[36m[39;49;00m$
     2	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m<stdlib.h>[39;49;00m[36m[39;49;00m$
     3	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m<stdio.h>[39;49;00m[36m[39;49;00m$
     4	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"codegen.h"[39;49;00m[36m[39;49;00m$
     5	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"symboltable.h"[39;49;00m[36m[39;49;00m$
     6	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"stringbuffer.h"[39;49;00m[36m[39;49;00m$
     7	[37m[39;49;00m$
     8	[34mextern[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m [39;49;00m[32myyerror[39;49;00m([36mchar[39;49;00m*[37m [39;49;00mmsg);[37m[39;49;00m$
     9	[37m[39;49;00m$
    10	[34mstatic[39;49;00m[37m [39;49;00mstringBuffer*[37m [39;49;00mstaticVariableBuffer;[37m[39;49;00m$
    11	[34mstatic[39;49;00m[37m [39;49;00mstringBuffer*[37m [39;49;00mclassInitBuffer;[37m[39;49;00m$
    12	[34mstatic[39;49;00m[37m [39;49;00mstringBuffer*[37m [39;49;00mcurrentMethodBuffer;[37m[39;49;00m$
    13	[34mstatic[39;49;00m[37m [39;49;00mstringBuffer*[37m [39;49;00mfinishedMethodsBuffer;[37m[39;49;00m$
    14	[34mstatic[39;49;00m[37m [39;49;00mstringBuffer*[37m [39;49;00mmainBuffer;[37m[39;49;00m$
    15	[37m[39;49;00m$
    16	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mcurrentMethodBufferIndex;[37m[39;49;00m$
    17	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mcurrentMethodStackSize;[37m[39;49;00m$
    18	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mcurrentMethodStackSizeMax;[37m[39;49;00m$
    19	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mcurrentMethodNumberOfLocals;[37m[39;49;00m$
    20	[37m[39;49;00m$
    21	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mclassInitBufferIndex;[37m[39;49;00m$
    22	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mclassInitStackSize;[37m[39;49;00m$
    23	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mclassInitStackSizeMax;[37m[39;49;00m$
    24	[37m[39;49;00m$
    25	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mlabelCounter[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
    26	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mglobal[37m       [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    27	[37m[39;49;00m$
    28	[36mchar[39;49;00m[37m [39;49;00mtempString[MAX_LENGTH_OF_COMMAND];[37m[39;49;00m$
    29	[37m[39;49;00m$
    30	[34mextern[39;49;00m[37m [39;49;00m[36mchar[39;49;00m*[37m [39;49;00mclassName;[37m        [39;49;00m[37m/* from minako-syntax.y */[39;49;00m[37m[39;49;00m$
    31	[37m[39;49;00m$
    32	[37m/* forward declarations */[39;49;00m[37m[39;49;00m$
    33	[34mstatic[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m [39;49;00m[32mincreaseStackby[39;49;00m([36mint[39;49;00m[37m [39;49;00mstackdiff);[37m[39;49;00m$
    34	[36mchar[39;49;00m[37m [39;49;00m[32mconvertType[39;49;00m([36mint[39;49;00m[37m [39;49;00mtype);[37m[39;49;00m$
    35	[37m[39;49;00m$
    36	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenInit[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
    37	[37m	[39;49;00mstaticVariableBuffer[37m  [39;49;00m=[37m [39;49;00mnewStringBuffer();[37m[39;49;00m$
    38	[37m	[39;49;00mclassInitBuffer[37m       [39;49;00m=[37m [39;49;00mnewStringBuffer();[37m[39;49;00m$
    39	[37m	[39;49;00mcurrentMethodBuffer[37m   [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
    40	[37m	[39;49;00mfinishedMethodsBuffer[37m [39;49;00m=[37m [39;49;00mnewStringBuffer();[37m[39;49;00m$
    41	[37m	[39;49;00mmainBuffer[37m            [39;49;00m=[37m [39;49;00mnewStringBuffer();[37m[39;49;00m$
    42	[37m[39;49;00m$
    43	[37m	[39;49;00mstringBufferAppend(mainBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Header --------------------------------------------[39;49;00m[33m"[39;49;00m);[37m [39;49;00m[37m[39;49;00m$
    44	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m.class  public synchronized %s[39;49;00m[33m"[39;49;00m,[37m [39;49;00mclassName);[37m[39;49;00m$
    45	[37m	[39;49;00mstringBufferAppend(mainBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
    46	[37m	[39;49;00mstringBufferAppend(mainBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.super  java/lang/Object[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    47	[37m	[39;49;00mstringBufferAppend(mainBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; -----------------------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    48	[37m	[39;49;00mstringBufferAppend(mainBuffer,[37m [39;49;00m[33m"[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    49	[37m	[39;49;00m[37m[39;49;00m$
    50	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Constructor ---------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    51	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.method public <init>()V[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    52	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit stack 1[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    53	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit locals 1[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    54	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33maload_0[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    55	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33minvokenonvirtual java/lang/Object/<init>()V[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    56	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33mreturn[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    57	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.end method[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    58	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; -----------------------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    59	[37m	[39;49;00mstringBufferAppend(finishedMethodsBuffer,[37m [39;49;00m[33m"[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    60	[37m[39;49;00m$
    61	[37m	[39;49;00mstringBufferAppend(staticVariableBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Class Variables -----------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    62	[37m[39;49;00m$
    63	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Class Initializer ---------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    64	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.method static <clinit>()V[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    65	[37m	[39;49;00mclassInitBufferIndex[37m [39;49;00m=[37m [39;49;00mclassInitBuffer->numberOfNextElement;[37m[39;49;00m$
    66	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit locals 0[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    67	[37m[39;49;00m$
    68	}[37m[39;49;00m$
    69	[37m[39;49;00m$
    70	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenAppendCommand[39;49;00m([36mchar[39;49;00m*[37m [39;49;00mcmd,[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mstackdiff)[37m [39;49;00m{[37m[39;49;00m$
    71	[37m	[39;49;00m[36mchar[39;49;00m[37m [39;49;00mtempString[MAX_LENGTH_OF_COMMAND];[37m[39;49;00m$
    72	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m%s[39;49;00m[33m"[39;49;00m,[37m [39;49;00mcmd);[37m[39;49;00m$
    73	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
    74	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
    75	[37m	[39;49;00mincreaseStackby(stackdiff);[37m[39;49;00m$
    76	}[37m[39;49;00m$
    77	[37m[39;49;00m$
    78	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenInsertCommand[39;49;00m([36mint[39;49;00m[37m [39;49;00maddress,[37m [39;49;00m[36mchar[39;49;00m*[37m [39;49;00mcmd,[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mstackdiff)[37m [39;49;00m{[37m[39;49;00m$
    79	[37m	[39;49;00m[36mchar[39;49;00m[37m [39;49;00mtempString[MAX_LENGTH_OF_COMMAND];[37m[39;49;00m$
    80	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m%s[39;49;00m[33m"[39;49;00m,[37m [39;49;00mcmd);[37m[39;49;00m$
    81	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00mstringBufferInsert(classInitBuffer,[37m [39;49;00maddress,[37m [39;49;00mtempString);[37m[39;49;00m$
    82	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00mstringBufferInsert(currentMethodBuffer,[37m [39;49;00maddress,[37m [39;49;00mtempString);[37m[39;49;00m$
    83	[37m	[39;49;00mincreaseStackby(stackdiff);[37m[39;49;00m$
    84	}[37m[39;49;00m$
    85	[37m[39;49;00m$
    86	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenAppendLabel[39;49;00m([36mint[39;49;00m[37m [39;49;00mlabel)[37m [39;49;00m{[37m[39;49;00m$
    87	[37m	[39;49;00m[36mchar[39;49;00m[37m [39;49;00mtempString[MAX_LENGTH_OF_COMMAND];[37m[39;49;00m$
    88	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33mLabel%d:[39;49;00m[33m"[39;49;00m,[37m [39;49;00mlabel);[37m[39;49;00m$
    89	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
    90	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
    91	}[37m[39;49;00m$
    92	[37m[39;49;00m$
    93	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenAddVariable[39;49;00m([36mchar[39;49;00m*[37m [39;49;00mname,[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mtype)[37m [39;49;00m{[37m[39;49;00m$
    94	[37m	[39;49;00m[37m/*fprintf(stderr, "add variable %s(%d) global=%d ", name, convertType(type), global);*/[39;49;00m[37m[39;49;00m$
    95	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00m{[37m[39;49;00m$
    96	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(type[37m [39;49;00m==[37m [39;49;00mTYPE_INT)[37m [39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m.field static %s %c[39;49;00m[33m"[39;49;00m,[37m [39;49;00mname,[37m [39;49;00m[33m'[39;49;00m[33mI[39;49;00m[33m'[39;49;00m);[37m[39;49;00m$
    97	[37m		[39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mif[39;49;00m[37m [39;49;00m(type[37m [39;49;00m==[37m [39;49;00mTYPE_FLOAT)[37m [39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m.field static %s %c[39;49;00m[33m"[39;49;00m,[37m [39;49;00mname,[37m [39;49;00m[33m'[39;49;00m[33mF[39;49;00m[33m'[39;49;00m);[37m[39;49;00m$
    98	[37m		[39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mif[39;49;00m[37m [39;49;00m(type[37m [39;49;00m==[37m [39;49;00mTYPE_BOOLEAN)[37m [39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m.field static %s %c[39;49;00m[33m"[39;49;00m,[37m [39;49;00mname,[37m [39;49;00m[33m'[39;49;00m[33mZ[39;49;00m[33m'[39;49;00m);[37m[39;49;00m$
    99	[37m		[39;49;00m[34melse[39;49;00m[37m [39;49;00myyerror([33m"[39;49;00m[33mcompiler-intern error in codegenAddGlobalVariable().[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   100	[37m		[39;49;00mstringBufferAppend(staticVariableBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
   101	[37m	[39;49;00m}[37m[39;49;00m$
   102	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   103	[37m		[39;49;00mcurrentMethodNumberOfLocals++;[37m[39;49;00m$
   104	[37m	[39;49;00m}[37m[39;49;00m$
   105	}[37m[39;49;00m$
   106	[37m[39;49;00m$
   107	[36mint[39;49;00m[37m [39;49;00m[32mcodegenGetNextLabel[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
   108	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mlabelCounter++;[37m[39;49;00m$
   109	}[37m[39;49;00m$
   110	[37m[39;49;00m$
   111	[36mint[39;49;00m[37m [39;49;00m[32mcodegenGetCurrentAddress[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
   112	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mclassInitBuffer->numberOfNextElement;[37m[39;49;00m$
   113	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mcurrentMethodBuffer->numberOfNextElement;[37m[39;49;00m$
   114	}[37m[39;49;00m$
   115	[37m[39;49;00m$
   116	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenEnterFunction[39;49;00m(symtabEntry*[37m [39;49;00mentry)[37m [39;49;00m{[37m[39;49;00m$
   117	[37m	[39;49;00mcurrentMethodBuffer[37m [39;49;00m=[37m [39;49;00mnewStringBuffer();[37m[39;49;00m$
   118	[37m	[39;49;00mcurrentMethodStackSize[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   119	[37m	[39;49;00mcurrentMethodStackSizeMax[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   120	[37m	[39;49;00mlabelCounter[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   121	[37m	[39;49;00mglobal[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   122	[37m	[39;49;00m[37m[39;49;00m$
   123	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(strcmp(entry->name,[37m [39;49;00m[33m"[39;49;00m[33mmain[39;49;00m[33m"[39;49;00m)[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   124	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(entry->idtype[37m [39;49;00m!=[37m [39;49;00mTYPE_VOID)[37m [39;49;00myyerror([33m"[39;49;00m[33mmain has to be void.[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   125	[37m		[39;49;00mcurrentMethodNumberOfLocals[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   126	[37m		[39;49;00msymtabInsert(strdup([33m"[39;49;00m[33m#main-param#[39;49;00m[33m"[39;49;00m),[37m [39;49;00mTYPE_VOID,[37m [39;49;00mCLASS_FUNC);[37m[39;49;00m$
   127	[37m		[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Methode ---- void main() --------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   128	[37m		[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.method public static main([Ljava/lang/String;)V[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   129	[37m	[39;49;00m}[37m[39;49;00m$
   130	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   131	[37m		[39;49;00m[36mint[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
   132	[37m		[39;49;00mcurrentMethodNumberOfLocals[37m [39;49;00m=[37m [39;49;00mentry->paramIndex;[37m[39;49;00m$
   133	[37m		[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; ------- Methode -------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   134	[37m		[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m.method public static %s([39;49;00m[33m"[39;49;00m,[37m [39;49;00mentry->name);[37m[39;49;00m$
   135	[37m		[39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=entry->paramIndex[34m-1[39;49;00m;[37m [39;49;00mi>=[34m0[39;49;00m;[37m [39;49;00mi--)[37m [39;49;00m{[37m[39;49;00m$
   136	[37m			[39;49;00m[36mint[39;49;00m[37m [39;49;00mtype[37m [39;49;00m=[37m [39;49;00mentry->params[i]->idtype;[37m[39;49;00m$
   137	[37m			[39;49;00mtempString[strlen(tempString)+[34m1[39;49;00m][37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   138	[37m			[39;49;00mtempString[strlen(tempString)][37m [39;49;00m=[37m [39;49;00mconvertType(type);[37m[39;49;00m$
   139	[37m		[39;49;00m}[37m[39;49;00m$
   140	[37m		[39;49;00mtempString[strlen(tempString)+[34m2[39;49;00m][37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   141	[37m		[39;49;00mtempString[strlen(tempString)+[34m1[39;49;00m][37m [39;49;00m=[37m [39;49;00mconvertType(entry->idtype);[37m[39;49;00m$
   142	[37m		[39;49;00mtempString[strlen(tempString)][37m   [39;49;00m=[37m [39;49;00m[33m'[39;49;00m[33m)[39;49;00m[33m'[39;49;00m;[37m[39;49;00m$
   143	[37m		[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00mtempString);[37m[39;49;00m$
   144	[37m	[39;49;00m}[37m[39;49;00m$
   145	[37m	[39;49;00mcurrentMethodBufferIndex[37m [39;49;00m=[37m [39;49;00mcurrentMethodBuffer->numberOfNextElement;[37m[39;49;00m$
   146	}[37m[39;49;00m$
   147	[37m[39;49;00m$
   148	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenLeaveFunction[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
   149	[37m	[39;49;00mglobal[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   150	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit locals %d[39;49;00m[33m"[39;49;00m,[37m [39;49;00mcurrentMethodNumberOfLocals);[37m[39;49;00m$
   151	[37m	[39;49;00mstringBufferInsert(currentMethodBuffer,[37m [39;49;00mcurrentMethodBufferIndex,[37m [39;49;00mtempString);[37m[39;49;00m$
   152	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit stack %d[39;49;00m[33m"[39;49;00m,[37m [39;49;00mcurrentMethodStackSizeMax);[37m[39;49;00m$
   153	[37m	[39;49;00mstringBufferInsert(currentMethodBuffer,[37m [39;49;00mcurrentMethodBufferIndex,[37m [39;49;00mtempString);[37m[39;49;00m$
   154	[37m	[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33mreturn[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   155	[37m	[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.end method[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   156	[37m	[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; -----------------------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   157	[37m	[39;49;00mstringBufferAppend(currentMethodBuffer,[37m [39;49;00m[33m"[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   158	[37m[39;49;00m$
   159	[37m	[39;49;00mstringBufferConcatenate(finishedMethodsBuffer,[37m [39;49;00mcurrentMethodBuffer);[37m[39;49;00m$
   160	}[37m[39;49;00m$
   161	[37m[39;49;00m$
   162	[37m[39;49;00m$
   163	[37m[39;49;00m$
   164	[36mvoid[39;49;00m[37m [39;49;00m[32mcodegenFinishCode[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
   165	[37m	[39;49;00mstringBufferAppend(staticVariableBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; -----------------------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   166	[37m	[39;49;00mstringBufferAppend(staticVariableBuffer,[37m [39;49;00m[33m"[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   167	[37m[39;49;00m$
   168	[37m	[39;49;00msprintf(tempString,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33m.limit stack %d[39;49;00m[33m"[39;49;00m,[37m [39;49;00mclassInitStackSizeMax);[37m[39;49;00m$
   169	[37m	[39;49;00mstringBufferInsert(classInitBuffer,[37m [39;49;00mclassInitBufferIndex,[37m [39;49;00mtempString);[37m[39;49;00m$
   170	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m\t[39;49;00m[33mreturn[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   171	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m.end method[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   172	[37m	[39;49;00mstringBufferAppend(classInitBuffer,[37m [39;49;00m[33m"[39;49;00m[33m; -----------------------------------------------------------[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   173	[37m	[39;49;00m[37m[39;49;00m$
   174	[37m	[39;49;00mstringBufferConcatenate(mainBuffer,[37m [39;49;00mstaticVariableBuffer);[37m[39;49;00m$
   175	[37m	[39;49;00mstringBufferConcatenate(mainBuffer,[37m [39;49;00mfinishedMethodsBuffer);[37m[39;49;00m$
   176	[37m	[39;49;00mstringBufferConcatenate(mainBuffer,[37m [39;49;00mclassInitBuffer);[37m[39;49;00m$
   177	[37m[39;49;00m$
   178	[37m	[39;49;00mstringBufferPrint(mainBuffer);[37m[39;49;00m$
   179	}[37m[39;49;00m$
   180	[37m[39;49;00m$
   181	[34mstatic[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m [39;49;00m[32mincreaseStackby[39;49;00m([36mint[39;49;00m[37m [39;49;00mstackdiff)[37m [39;49;00m{[37m[39;49;00m$
   182	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(global)[37m [39;49;00m{[37m[39;49;00m$
   183	[37m		[39;49;00mclassInitStackSize[37m [39;49;00m+=[37m [39;49;00mstackdiff;[37m[39;49;00m$
   184	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(classInitStackSize[37m [39;49;00m>[37m [39;49;00mclassInitStackSizeMax)[37m [39;49;00mclassInitStackSizeMax[37m [39;49;00m=[37m [39;49;00mclassInitStackSize;[37m[39;49;00m$
   185	[37m	[39;49;00m}[37m[39;49;00m$
   186	[37m	[39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   187	[37m		[39;49;00mcurrentMethodStackSize[37m [39;49;00m+=[37m [39;49;00mstackdiff;[37m[39;49;00m$
   188	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(currentMethodStackSize[37m [39;49;00m>[37m [39;49;00mcurrentMethodStackSizeMax)[37m [39;49;00mcurrentMethodStackSizeMax[37m [39;49;00m=[37m [39;49;00mcurrentMethodStackSize;[37m[39;49;00m$
   189	[37m	[39;49;00m}[37m[39;49;00m$
   190	}[37m[39;49;00m$
   191	[37m[39;49;00m$
   192	[36mchar[39;49;00m[37m [39;49;00m[32mconvertType[39;49;00m([36mint[39;49;00m[37m [39;49;00mtype)[37m [39;49;00m{[37m[39;49;00m$
   193	[37m	[39;49;00m[34mswitch[39;49;00m(type)[37m [39;49;00m{[37m[39;49;00m$
   194	[37m		[39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mTYPE_VOID[39;49;00m:[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[33m'[39;49;00m[33mV[39;49;00m[33m'[39;49;00m;[37m[39;49;00m$
   195	[37m		[39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mTYPE_INT[39;49;00m:[37m     [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[33m'[39;49;00m[33mI[39;49;00m[33m'[39;49;00m;[37m[39;49;00m$
   196	[37m		[39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mTYPE_FLOAT[39;49;00m:[37m   [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[33m'[39;49;00m[33mF[39;49;00m[33m'[39;49;00m;[37m[39;49;00m$
   197	[37m		[39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mTYPE_BOOLEAN[39;49;00m:[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[33m'[39;49;00m[33mZ[39;49;00m[33m'[39;49;00m;[37m[39;49;00m$
   198	[37m		[39;49;00m[34mdefault[39;49;00m[37m [39;49;00m:[37m [39;49;00myyerror([33m"[39;49;00m[33mcompiler-intern error in convertType().[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   199	[37m	[39;49;00m}[37m[39;49;00m$
   200	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00m[37m/* to avoid compiler-warning */[39;49;00m[37m[39;49;00m$
   201	}[37m[39;49;00m$
   202	[37m[39;49;00m$
   203	[37m[39;49;00m$
   204	[37m//#include <stdlib.h>[39;49;00m$
   205	[37m//#include <stdio.h>[39;49;00m$
   206	[37m[39;49;00m$
   207	[36mint[39;49;00m[37m [39;49;00m[32mmain[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
   208	[37m	[39;49;00m[36mint[39;49;00m[37m [39;49;00ma[37m [39;49;00m=[37m [39;49;00m[34m12[39;49;00m,[37m [39;49;00mb[37m [39;49;00m=[37m [39;49;00m[34m44[39;49;00m;[37m[39;49;00m$
   209	[37m	[39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(a[37m [39;49;00m!=[37m [39;49;00mb)[37m [39;49;00m{[37m[39;49;00m$
   210	[37m		[39;49;00m[34mif[39;49;00m[37m [39;49;00m(a[37m [39;49;00m>[37m [39;49;00mb)[37m[39;49;00m$
   211	[37m			[39;49;00ma[37m [39;49;00m-=[37m [39;49;00mb;[37m[39;49;00m$
   212	[37m		[39;49;00m[34melse[39;49;00m[37m[39;49;00m$
   213	[37m			[39;49;00mb[37m [39;49;00m-=[37m [39;49;00ma;[37m[39;49;00m$
   214	[37m	[39;49;00m}[37m[39;49;00m$
   215	[37m	[39;49;00mprintf([33m"[39;49;00m[33m%d[39;49;00m[33m\n[39;49;00m[33m%d[39;49;00m[33m"[39;49;00m,[37m [39;49;00ma,[37m [39;49;00m[34m0X0[39;49;00m);\$
   216	}[37m[39;49;00m$
   217	[37m[39;49;00m$
   218	[37m[39;49;00m$
   219	[37m/**********************************************************************[39;49;00m$
   220	[37m[39;49;00m$
   221	[37m  array.c -[39;49;00m$
   222	[37m[39;49;00m$
   223	[37m  $Author: murphy $[39;49;00m$
   224	[37m  $Date: 2005-11-05 04:33:55 +0100 (Sa, 05 Nov 2005) $[39;49;00m$
   225	[37m  created at: Fri Aug  6 09:46:12 JST 1993[39;49;00m$
   226	[37m[39;49;00m$
   227	[37m  Copyright (C) 1993-2003 Yukihiro Matsumoto[39;49;00m$
   228	[37m  Copyright (C) 2000  Network Applied Communication Laboratory, Inc.[39;49;00m$
   229	[37m  Copyright (C) 2000  Information-technology Promotion Agency, Japan[39;49;00m$
   230	[37m[39;49;00m$
   231	[37m**********************************************************************/[39;49;00m[37m[39;49;00m$
   232	[37m[39;49;00m$
   233	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"ruby.h"[39;49;00m[36m[39;49;00m$
   234	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"util.h"[39;49;00m[36m[39;49;00m$
   235	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"st.h"[39;49;00m[36m[39;49;00m$
   236	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m"node.h"[39;49;00m[36m[39;49;00m$
   237	[37m[39;49;00m$
   238	VALUE[37m [39;49;00mrb_cArray,[37m [39;49;00mrb_cValues;[37m[39;49;00m$
   239	[37m[39;49;00m$
   240	[34mstatic[39;49;00m[37m [39;49;00mID[37m [39;49;00mid_cmp;[37m[39;49;00m$
   241	[37m[39;49;00m$
   242	[36m#[39;49;00m[36mdefine ARY_DEFAULT_SIZE 16[39;49;00m[36m[39;49;00m$
   243	[37m[39;49;00m$
   244	[37m[39;49;00m$
   245	[36mvoid[39;49;00m[37m[39;49;00m$
   246	[32mrb_mem_clear[39;49;00m(mem,[37m [39;49;00msize)[37m[39;49;00m$
   247	[37m    [39;49;00m[34mregister[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00m*mem;[37m[39;49;00m$
   248	[37m    [39;49;00m[34mregister[39;49;00m[37m [39;49;00m[36mlong[39;49;00m[37m [39;49;00msize;[37m[39;49;00m$
   249	{[37m[39;49;00m$
   250	[37m    [39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(size--)[37m [39;49;00m{[37m[39;49;00m$
   251	[37m	[39;49;00m*mem++[37m [39;49;00m=[37m [39;49;00mQnil;[37m[39;49;00m$
   252	[37m    [39;49;00m}[37m[39;49;00m$
   253	}[37m[39;49;00m$
   254	[37m[39;49;00m$
   255	[34mstatic[39;49;00m[37m [39;49;00m[34minline[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m[39;49;00m$
   256	memfill(mem,[37m [39;49;00msize,[37m [39;49;00mval)[37m[39;49;00m$
   257	[37m    [39;49;00m[34mregister[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00m*mem;[37m[39;49;00m$
   258	[37m    [39;49;00m[34mregister[39;49;00m[37m [39;49;00m[36mlong[39;49;00m[37m [39;49;00msize;[37m[39;49;00m$
   259	[37m    [39;49;00m[34mregister[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
   260	{[37m[39;49;00m$
   261	[37m    [39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(size--)[37m [39;49;00m{[37m[39;49;00m$
   262	[37m	[39;49;00m*mem++[37m [39;49;00m=[37m [39;49;00mval;[37m[39;49;00m$
   263	[37m    [39;49;00m}[37m[39;49;00m$
   264	}[37m[39;49;00m$
   265	[37m[39;49;00m$
   266	[36m#[39;49;00m[36mdefine ARY_TMPLOCK  FL_USER1[39;49;00m[36m[39;49;00m$
   267	[37m[39;49;00m$
   268	[34mstatic[39;49;00m[37m [39;49;00m[34minline[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m[39;49;00m$
   269	rb_ary_modify_check(ary)[37m[39;49;00m$
   270	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   271	{[37m[39;49;00m$
   272	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(OBJ_FROZEN(ary))[37m [39;49;00mrb_error_frozen([33m"[39;49;00m[33marray[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   273	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FL_TEST(ary,[37m [39;49;00mARY_TMPLOCK))[37m[39;49;00m$
   274	[37m	[39;49;00mrb_raise(rb_eRuntimeError,[37m [39;49;00m[33m"[39;49;00m[33mcan't modify array during iteration[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   275	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(!OBJ_TAINTED(ary)[37m [39;49;00m&&[37m [39;49;00mrb_safe_level()[37m [39;49;00m>=[37m [39;49;00m[34m4[39;49;00m)[37m[39;49;00m$
   276	[37m	[39;49;00mrb_raise(rb_eSecurityError,[37m [39;49;00m[33m"[39;49;00m[33mInsecure: can't modify array[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   277	}[37m[39;49;00m$
   278	[37m[39;49;00m$
   279	[34mstatic[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m[39;49;00m$
   280	rb_ary_modify(ary)[37m[39;49;00m$
   281	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   282	{[37m[39;49;00m$
   283	[37m    [39;49;00mVALUE[37m [39;49;00m*ptr;[37m[39;49;00m$
   284	[37m[39;49;00m$
   285	[37m    [39;49;00mrb_ary_modify_check(ary);[37m[39;49;00m$
   286	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FL_TEST(ary,[37m [39;49;00mELTS_SHARED))[37m [39;49;00m{[37m[39;49;00m$
   287	[37m	[39;49;00mptr[37m [39;49;00m=[37m [39;49;00mALLOC_N(VALUE,[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
   288	[37m	[39;49;00mFL_UNSET(ary,[37m [39;49;00mELTS_SHARED);[37m[39;49;00m$
   289	[37m	[39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   290	[37m	[39;49;00mMEMCPY(ptr,[37m [39;49;00mRARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
   291	[37m	[39;49;00mRARRAY(ary)->ptr[37m [39;49;00m=[37m [39;49;00mptr;[37m[39;49;00m$
   292	[37m    [39;49;00m}[37m[39;49;00m$
   293	}[37m[39;49;00m$
   294	[37m[39;49;00m$
   295	VALUE[37m[39;49;00m$
   296	rb_ary_freeze(ary)[37m[39;49;00m$
   297	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   298	{[37m[39;49;00m$
   299	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_obj_freeze(ary);[37m[39;49;00m$
   300	}[37m[39;49;00m$
   301	[37m[39;49;00m$
   302	[37m/*[39;49;00m$
   303	[37m *  call-seq:[39;49;00m$
   304	[37m *     array.frozen?  -> true or false[39;49;00m$
   305	[37m *[39;49;00m$
   306	[37m *  Return <code>true</code> if this array is frozen (or temporarily frozen[39;49;00m$
   307	[37m *  while being sorted).[39;49;00m$
   308	[37m */[39;49;00m[37m[39;49;00m$
   309	[37m[39;49;00m$
   310	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   311	rb_ary_frozen_p(ary)[37m[39;49;00m$
   312	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   313	{[37m[39;49;00m$
   314	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(OBJ_FROZEN(ary))[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQtrue;[37m[39;49;00m$
   315	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FL_TEST(ary,[37m [39;49;00mARY_TMPLOCK))[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQtrue;[37m[39;49;00m$
   316	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQfalse;[37m[39;49;00m$
   317	}[37m[39;49;00m$
   318	[37m[39;49;00m$
   319	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00mary_alloc(VALUE);[37m[39;49;00m$
   320	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   321	[32mary_alloc[39;49;00m(klass)[37m[39;49;00m$
   322	[37m    [39;49;00mVALUE[37m [39;49;00mklass;[37m[39;49;00m$
   323	{[37m[39;49;00m$
   324	[37m    [39;49;00mNEWOBJ(ary,[37m [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mRArray[39;49;00m);[37m[39;49;00m$
   325	[37m    [39;49;00mOBJSETUP(ary,[37m [39;49;00mklass,[37m [39;49;00mT_ARRAY);[37m[39;49;00m$
   326	[37m[39;49;00m$
   327	[37m    [39;49;00mary->len[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   328	[37m    [39;49;00mary->ptr[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   329	[37m    [39;49;00mary->aux.capa[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   330	[37m[39;49;00m$
   331	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m(VALUE)ary;[37m[39;49;00m$
   332	}[37m[39;49;00m$
   333	[37m[39;49;00m$
   334	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   335	ary_new(klass,[37m [39;49;00mlen)[37m[39;49;00m$
   336	[37m    [39;49;00mVALUE[37m [39;49;00mklass;[37m[39;49;00m$
   337	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen;[37m[39;49;00m$
   338	{[37m[39;49;00m$
   339	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   340	[37m[39;49;00m$
   341	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   342	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mnegative array size (or size too big)[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   343	[37m    [39;49;00m}[37m[39;49;00m$
   344	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m&&[37m [39;49;00mlen[37m [39;49;00m*[37m [39;49;00m[34msizeof[39;49;00m(VALUE)[37m [39;49;00m<=[37m [39;49;00mlen)[37m [39;49;00m{[37m[39;49;00m$
   345	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33marray size too big[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   346	[37m    [39;49;00m}[37m[39;49;00m$
   347	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00mlen++;[37m[39;49;00m$
   348	[37m    [39;49;00m[37m[39;49;00m$
   349	[37m    [39;49;00mary[37m [39;49;00m=[37m [39;49;00mary_alloc(klass);[37m[39;49;00m$
   350	[37m    [39;49;00mRARRAY(ary)->ptr[37m [39;49;00m=[37m [39;49;00mALLOC_N(VALUE,[37m [39;49;00mlen);[37m[39;49;00m$
   351	[37m    [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
   352	[37m[39;49;00m$
   353	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   354	}[37m[39;49;00m$
   355	[37m[39;49;00m$
   356	VALUE[37m[39;49;00m$
   357	rb_ary_new2(len)[37m[39;49;00m$
   358	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen;[37m[39;49;00m$
   359	{[37m[39;49;00m$
   360	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_new(rb_cArray,[37m [39;49;00mlen);[37m[39;49;00m$
   361	}[37m[39;49;00m$
   362	[37m[39;49;00m$
   363	[37m[39;49;00m$
   364	VALUE[37m[39;49;00m$
   365	rb_ary_new()[37m[39;49;00m$
   366	{[37m[39;49;00m$
   367	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_new2(ARY_DEFAULT_SIZE);[37m[39;49;00m$
   368	}[37m[39;49;00m$
   369	[37m[39;49;00m$
   370	[36m#[39;49;00m[36mifdef HAVE_STDARG_PROTOTYPES[39;49;00m[36m[39;49;00m$
   371	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m<stdarg.h>[39;49;00m[36m[39;49;00m$
   372	[36m#[39;49;00m[36mdefine va_init_list(a,b) va_start(a,b)[39;49;00m[36m[39;49;00m$
   373	[36m#[39;49;00m[36melse[39;49;00m[36m[39;49;00m$
   374	[36m#[39;49;00m[36minclude[39;49;00m[37m [39;49;00m[37m<varargs.h>[39;49;00m[36m[39;49;00m$
   375	[36m#[39;49;00m[36mdefine va_init_list(a,b) va_start(a)[39;49;00m[36m[39;49;00m$
   376	[36m#[39;49;00m[36mendif[39;49;00m[36m[39;49;00m$
   377	[37m[39;49;00m$
   378	VALUE[37m[39;49;00m$
   379	[36m#[39;49;00m[36mifdef HAVE_STDARG_PROTOTYPES[39;49;00m[36m[39;49;00m$
   380	rb_ary_new3([36mlong[39;49;00m[37m [39;49;00mn,[37m [39;49;00m...)[37m[39;49;00m$
   381	[36m#[39;49;00m[36melse[39;49;00m[36m[39;49;00m$
   382	rb_ary_new3(n,[37m [39;49;00mva_alist)[37m[39;49;00m$
   383	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   384	[37m    [39;49;00mva_dcl[37m[39;49;00m$
   385	[36m#[39;49;00m[36mendif[39;49;00m[36m[39;49;00m$
   386	{[37m[39;49;00m$
   387	[37m    [39;49;00m[36mva_list[39;49;00m[37m [39;49;00mar;[37m[39;49;00m$
   388	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   389	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
   390	[37m[39;49;00m$
   391	[37m    [39;49;00mary[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(n);[37m[39;49;00m$
   392	[37m[39;49;00m$
   393	[37m    [39;49;00mva_init_list(ar,[37m [39;49;00mn);[37m[39;49;00m$
   394	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<n;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
   395	[37m	[39;49;00mRARRAY(ary)->ptr[i][37m [39;49;00m=[37m [39;49;00mva_arg(ar,[37m [39;49;00mVALUE);[37m[39;49;00m$
   396	[37m    [39;49;00m}[37m[39;49;00m$
   397	[37m    [39;49;00mva_end(ar);[37m[39;49;00m$
   398	[37m[39;49;00m$
   399	[37m    [39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mn;[37m[39;49;00m$
   400	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   401	}[37m[39;49;00m$
   402	[37m[39;49;00m$
   403	VALUE[37m[39;49;00m$
   404	rb_ary_new4(n,[37m [39;49;00melts)[37m[39;49;00m$
   405	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   406	[37m    [39;49;00m[34mconst[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00m*elts;[37m[39;49;00m$
   407	{[37m[39;49;00m$
   408	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   409	[37m[39;49;00m$
   410	[37m    [39;49;00mary[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(n);[37m[39;49;00m$
   411	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(n[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m&&[37m [39;49;00melts)[37m [39;49;00m{[37m[39;49;00m$
   412	[37m	[39;49;00mMEMCPY(RARRAY(ary)->ptr,[37m [39;49;00melts,[37m [39;49;00mVALUE,[37m [39;49;00mn);[37m[39;49;00m$
   413	[37m    [39;49;00m}[37m[39;49;00m$
   414	[37m    [39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mn;[37m[39;49;00m$
   415	[37m[39;49;00m$
   416	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   417	}[37m[39;49;00m$
   418	[37m[39;49;00m$
   419	VALUE[37m[39;49;00m$
   420	[36m#[39;49;00m[36mifdef HAVE_STDARG_PROTOTYPES[39;49;00m[36m[39;49;00m$
   421	rb_values_new([36mlong[39;49;00m[37m [39;49;00mn,[37m [39;49;00m...)[37m[39;49;00m$
   422	[36m#[39;49;00m[36melse[39;49;00m[36m[39;49;00m$
   423	rb_values_new(n,[37m [39;49;00mva_alist)[37m[39;49;00m$
   424	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   425	[37m    [39;49;00mva_dcl[37m[39;49;00m$
   426	[36m#[39;49;00m[36mendif[39;49;00m[36m[39;49;00m$
   427	{[37m[39;49;00m$
   428	[37m    [39;49;00m[36mva_list[39;49;00m[37m [39;49;00mar;[37m[39;49;00m$
   429	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
   430	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
   431	[37m[39;49;00m$
   432	[37m    [39;49;00mval[37m [39;49;00m=[37m [39;49;00mary_new(rb_cValues,[37m [39;49;00mn);[37m[39;49;00m$
   433	[37m    [39;49;00mva_init_list(ar,[37m [39;49;00mn);[37m[39;49;00m$
   434	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<n;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
   435	[37m	[39;49;00mRARRAY(val)->ptr[i][37m [39;49;00m=[37m [39;49;00mva_arg(ar,[37m [39;49;00mVALUE);[37m[39;49;00m$
   436	[37m    [39;49;00m}[37m[39;49;00m$
   437	[37m    [39;49;00mva_end(ar);[37m[39;49;00m$
   438	[37m    [39;49;00mRARRAY(val)->len[37m [39;49;00m=[37m [39;49;00mn;[37m[39;49;00m$
   439	[37m[39;49;00m$
   440	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mval;[37m[39;49;00m$
   441	}[37m[39;49;00m$
   442	[37m[39;49;00m$
   443	VALUE[37m[39;49;00m$
   444	rb_values_new2(n,[37m [39;49;00melts)[37m[39;49;00m$
   445	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   446	[37m    [39;49;00m[34mconst[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00m*elts;[37m[39;49;00m$
   447	{[37m[39;49;00m$
   448	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
   449	[37m[39;49;00m$
   450	[37m    [39;49;00mval[37m [39;49;00m=[37m [39;49;00mary_new(rb_cValues,[37m [39;49;00mn);[37m[39;49;00m$
   451	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(n[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m&&[37m [39;49;00melts)[37m [39;49;00m{[37m[39;49;00m$
   452	[37m	[39;49;00mRARRAY(val)->len[37m [39;49;00m=[37m [39;49;00mn;[37m[39;49;00m$
   453	[37m	[39;49;00mMEMCPY(RARRAY(val)->ptr,[37m [39;49;00melts,[37m [39;49;00mVALUE,[37m [39;49;00mn);[37m[39;49;00m$
   454	[37m    [39;49;00m}[37m[39;49;00m$
   455	[37m[39;49;00m$
   456	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mval;[37m[39;49;00m$
   457	}[37m[39;49;00m$
   458	[37m[39;49;00m$
   459	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   460	ary_make_shared(ary)[37m[39;49;00m$
   461	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   462	{[37m[39;49;00m$
   463	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(!FL_TEST(ary,[37m [39;49;00mELTS_SHARED))[37m [39;49;00m{[37m[39;49;00m$
   464	[37m	[39;49;00mNEWOBJ(shared,[37m [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mRArray[39;49;00m);[37m[39;49;00m$
   465	[37m	[39;49;00mOBJSETUP(shared,[37m [39;49;00mrb_cArray,[37m [39;49;00mT_ARRAY);[37m[39;49;00m$
   466	[37m[39;49;00m$
   467	[37m	[39;49;00mshared->len[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   468	[37m	[39;49;00mshared->ptr[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr;[37m[39;49;00m$
   469	[37m	[39;49;00mshared->aux.capa[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->aux.capa;[37m[39;49;00m$
   470	[37m	[39;49;00mRARRAY(ary)->aux.shared[37m [39;49;00m=[37m [39;49;00m(VALUE)shared;[37m[39;49;00m$
   471	[37m	[39;49;00mFL_SET(ary,[37m [39;49;00mELTS_SHARED);[37m[39;49;00m$
   472	[37m	[39;49;00mOBJ_FREEZE(shared);[37m[39;49;00m$
   473	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00m(VALUE)shared;[37m[39;49;00m$
   474	[37m    [39;49;00m}[37m[39;49;00m$
   475	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   476	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->aux.shared;[37m[39;49;00m$
   477	[37m    [39;49;00m}[37m[39;49;00m$
   478	}[37m[39;49;00m$
   479	[37m[39;49;00m$
   480	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   481	ary_shared_array(klass,[37m [39;49;00mary)[37m[39;49;00m$
   482	[37m    [39;49;00mVALUE[37m [39;49;00mklass,[37m [39;49;00mary;[37m[39;49;00m$
   483	{[37m[39;49;00m$
   484	[37m    [39;49;00mVALUE[37m [39;49;00mval[37m [39;49;00m=[37m [39;49;00mary_alloc(klass);[37m[39;49;00m$
   485	[37m[39;49;00m$
   486	[37m    [39;49;00mary_make_shared(ary);[37m[39;49;00m$
   487	[37m    [39;49;00mRARRAY(val)->ptr[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr;[37m[39;49;00m$
   488	[37m    [39;49;00mRARRAY(val)->len[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   489	[37m    [39;49;00mRARRAY(val)->aux.shared[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->aux.shared;[37m[39;49;00m$
   490	[37m    [39;49;00mFL_SET(val,[37m [39;49;00mELTS_SHARED);[37m[39;49;00m$
   491	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mval;[37m[39;49;00m$
   492	}[37m[39;49;00m$
   493	[37m[39;49;00m$
   494	VALUE[37m[39;49;00m$
   495	rb_values_from_ary(ary)[37m[39;49;00m$
   496	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   497	{[37m[39;49;00m$
   498	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_shared_array(rb_cValues,[37m [39;49;00mary);[37m[39;49;00m$
   499	}[37m[39;49;00m$
   500	[37m[39;49;00m$
   501	VALUE[37m[39;49;00m$
   502	rb_ary_from_values(val)[37m[39;49;00m$
   503	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
   504	{[37m[39;49;00m$
   505	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_shared_array(rb_cArray,[37m [39;49;00mval);[37m[39;49;00m$
   506	}[37m[39;49;00m$
   507	[37m[39;49;00m$
   508	VALUE[37m[39;49;00m$
   509	rb_assoc_new(car,[37m [39;49;00mcdr)[37m[39;49;00m$
   510	[37m    [39;49;00mVALUE[37m [39;49;00mcar,[37m [39;49;00mcdr;[37m[39;49;00m$
   511	{[37m[39;49;00m$
   512	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_values_new([34m2[39;49;00m,[37m [39;49;00mcar,[37m [39;49;00mcdr);[37m[39;49;00m$
   513	}[37m[39;49;00m$
   514	[37m[39;49;00m$
   515	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   516	to_ary(ary)[37m[39;49;00m$
   517	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   518	{[37m[39;49;00m$
   519	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_convert_type(ary,[37m [39;49;00mT_ARRAY,[37m [39;49;00m[33m"[39;49;00m[33mArray[39;49;00m[33m"[39;49;00m,[37m [39;49;00m[33m"[39;49;00m[33mto_ary[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   520	}[37m[39;49;00m$
   521	[37m[39;49;00m$
   522	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   523	to_a(ary)[37m[39;49;00m$
   524	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   525	{[37m[39;49;00m$
   526	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_convert_type(ary,[37m [39;49;00mT_ARRAY,[37m [39;49;00m[33m"[39;49;00m[33mArray[39;49;00m[33m"[39;49;00m,[37m [39;49;00m[33m"[39;49;00m[33mto_a[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   527	}[37m[39;49;00m$
   528	[37m[39;49;00m$
   529	VALUE[37m[39;49;00m$
   530	rb_check_array_type(ary)[37m[39;49;00m$
   531	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   532	{[37m[39;49;00m$
   533	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_check_convert_type(ary,[37m [39;49;00mT_ARRAY,[37m [39;49;00m[33m"[39;49;00m[33mArray[39;49;00m[33m"[39;49;00m,[37m [39;49;00m[33m"[39;49;00m[33mto_ary[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   534	}[37m[39;49;00m$
   535	[37m[39;49;00m$
   536	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00mrb_ary_replace[37m [39;49;00m_((VALUE,[37m [39;49;00mVALUE));[37m[39;49;00m$
   537	[37m[39;49;00m$
   538	[37m/*[39;49;00m$
   539	[37m *  call-seq:[39;49;00m$
   540	[37m *     Array.new(size=0, obj=nil)[39;49;00m$
   541	[37m *     Array.new(array)[39;49;00m$
   542	[37m *     Array.new(size) {|index| block }[39;49;00m$
   543	[37m *[39;49;00m$
   544	[37m *  Returns a new array. In the first form, the new array is[39;49;00m$
   545	[37m *  empty. In the second it is created with _size_ copies of _obj_[39;49;00m$
   546	[37m *  (that is, _size_ references to the same[39;49;00m$
   547	[37m *  _obj_). The third form creates a copy of the array[39;49;00m$
   548	[37m *  passed as a parameter (the array is generated by calling[39;49;00m$
   549	[37m *  to_ary  on the parameter). In the last form, an array[39;49;00m$
   550	[37m *  of the given size is created. Each element in this array is[39;49;00m$
   551	[37m *  calculated by passing the element's index to the given block and[39;49;00m$
   552	[37m *  storing the return value.[39;49;00m$
   553	[37m *[39;49;00m$
   554	[37m *     Array.new[39;49;00m$
   555	[37m *     Array.new(2)[39;49;00m$
   556	[37m *     Array.new(5, "A")[39;49;00m$
   557	[37m * [39;49;00m$
   558	[37m *     # only one copy of the object is created[39;49;00m$
   559	[37m *     a = Array.new(2, Hash.new)[39;49;00m$
   560	[37m *     a[0]['cat'] = 'feline'[39;49;00m$
   561	[37m *     a[39;49;00m$
   562	[37m *     a[1]['cat'] = 'Felix'[39;49;00m$
   563	[37m *     a[39;49;00m$
   564	[37m * [39;49;00m$
   565	[37m *     # here multiple copies are created[39;49;00m$
   566	[37m *     a = Array.new(2) { Hash.new }[39;49;00m$
   567	[37m *     a[0]['cat'] = 'feline'[39;49;00m$
   568	[37m *     a[39;49;00m$
   569	[37m * [39;49;00m$
   570	[37m *     squares = Array.new(5) {|i| i*i}[39;49;00m$
   571	[37m *     squares[39;49;00m$
   572	[37m * [39;49;00m$
   573	[37m *     copy = Array.new(squares)[39;49;00m$
   574	[37m */[39;49;00m[37m[39;49;00m$
   575	[37m[39;49;00m$
   576	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   577	[32mrb_ary_initialize[39;49;00m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   578	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   579	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   580	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   581	{[37m[39;49;00m$
   582	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen;[37m[39;49;00m$
   583	[37m    [39;49;00mVALUE[37m [39;49;00msize,[37m [39;49;00mval;[37m[39;49;00m$
   584	[37m[39;49;00m$
   585	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m02[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&size,[37m [39;49;00m&val)[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   586	[37m	[39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   587	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_block_given_p())[37m [39;49;00m{[37m[39;49;00m$
   588	[37m	    [39;49;00mrb_warning([33m"[39;49;00m[33mgiven block not used[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   589	[37m	[39;49;00m}[37m[39;49;00m$
   590	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   591	[37m    [39;49;00m}[37m[39;49;00m$
   592	[37m[39;49;00m$
   593	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m1[39;49;00m[37m [39;49;00m&&[37m [39;49;00m!FIXNUM_P(size))[37m [39;49;00m{[37m[39;49;00m$
   594	[37m	[39;49;00mval[37m [39;49;00m=[37m [39;49;00mrb_check_array_type(size);[37m[39;49;00m$
   595	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(!NIL_P(val))[37m [39;49;00m{[37m[39;49;00m$
   596	[37m	    [39;49;00mrb_ary_replace(ary,[37m [39;49;00mval);[37m[39;49;00m$
   597	[37m	    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   598	[37m	[39;49;00m}[37m[39;49;00m$
   599	[37m    [39;49;00m}[37m[39;49;00m$
   600	[37m[39;49;00m$
   601	[37m    [39;49;00mlen[37m [39;49;00m=[37m [39;49;00mNUM2LONG(size);[37m[39;49;00m$
   602	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   603	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mnegative array size[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   604	[37m    [39;49;00m}[37m[39;49;00m$
   605	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m&&[37m [39;49;00mlen[37m [39;49;00m*[37m [39;49;00m([36mlong[39;49;00m)[34msizeof[39;49;00m(VALUE)[37m [39;49;00m<=[37m [39;49;00mlen)[37m [39;49;00m{[37m[39;49;00m$
   606	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33marray size too big[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   607	[37m    [39;49;00m}[37m[39;49;00m$
   608	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
   609	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->aux.capa)[37m [39;49;00m{[37m[39;49;00m$
   610	[37m	[39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mlen);[37m[39;49;00m$
   611	[37m	[39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
   612	[37m    [39;49;00m}[37m[39;49;00m$
   613	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_block_given_p())[37m [39;49;00m{[37m[39;49;00m$
   614	[37m	[39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
   615	[37m[39;49;00m$
   616	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m2[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   617	[37m	    [39;49;00mrb_warn([33m"[39;49;00m[33mblock supersedes default value argument[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   618	[37m	[39;49;00m}[37m[39;49;00m$
   619	[37m	[39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
   620	[37m	    [39;49;00mrb_ary_store(ary,[37m [39;49;00mi,[37m [39;49;00mrb_yield(LONG2NUM(i)));[37m[39;49;00m$
   621	[37m	    [39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mi[37m [39;49;00m+[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   622	[37m	[39;49;00m}[37m[39;49;00m$
   623	[37m    [39;49;00m}[37m[39;49;00m$
   624	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   625	[37m	[39;49;00mmemfill(RARRAY(ary)->ptr,[37m [39;49;00mlen,[37m [39;49;00mval);[37m[39;49;00m$
   626	[37m	[39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
   627	[37m    [39;49;00m}[37m[39;49;00m$
   628	[37m[39;49;00m$
   629	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   630	}[37m[39;49;00m$
   631	[37m[39;49;00m$
   632	[37m[39;49;00m$
   633	[37m/* [39;49;00m$
   634	[37m* Returns a new array populated with the given objects. [39;49;00m$
   635	[37m*[39;49;00m$
   636	[37m*   Array.[]( 1, 'a', /^A/ )[39;49;00m$
   637	[37m*   Array[ 1, 'a', /^A/ ][39;49;00m$
   638	[37m*   [ 1, 'a', /^A/ ][39;49;00m$
   639	[37m*/[39;49;00m[37m[39;49;00m$
   640	[37m[39;49;00m$
   641	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   642	rb_ary_s_create(argc,[37m [39;49;00margv,[37m [39;49;00mklass)[37m[39;49;00m$
   643	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   644	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   645	[37m    [39;49;00mVALUE[37m [39;49;00mklass;[37m[39;49;00m$
   646	{[37m[39;49;00m$
   647	[37m    [39;49;00mVALUE[37m [39;49;00mary[37m [39;49;00m=[37m [39;49;00mary_alloc(klass);[37m[39;49;00m$
   648	[37m[39;49;00m$
   649	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   650	[37m	[39;49;00mRARRAY(ary)->ptr[37m [39;49;00m=[37m [39;49;00mALLOC_N(VALUE,[37m [39;49;00margc);[37m[39;49;00m$
   651	[37m	[39;49;00mMEMCPY(RARRAY(ary)->ptr,[37m [39;49;00margv,[37m [39;49;00mVALUE,[37m [39;49;00margc);[37m[39;49;00m$
   652	[37m    [39;49;00m}[37m[39;49;00m$
   653	[37m    [39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00margc;[37m[39;49;00m$
   654	[37m[39;49;00m$
   655	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   656	}[37m[39;49;00m$
   657	[37m[39;49;00m$
   658	[36mvoid[39;49;00m[37m[39;49;00m$
   659	rb_ary_store(ary,[37m [39;49;00midx,[37m [39;49;00mval)[37m[39;49;00m$
   660	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   661	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00midx;[37m[39;49;00m$
   662	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
   663	{[37m[39;49;00m$
   664	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   665	[37m	[39;49;00midx[37m [39;49;00m+=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   666	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   667	[37m	    [39;49;00mrb_raise(rb_eIndexError,[37m [39;49;00m[33m"[39;49;00m[33mindex %ld out of array[39;49;00m[33m"[39;49;00m,[37m[39;49;00m$
   668	[37m		    [39;49;00midx[37m [39;49;00m-[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
   669	[37m	[39;49;00m}[37m[39;49;00m$
   670	[37m    [39;49;00m}[37m[39;49;00m$
   671	[37m[39;49;00m$
   672	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
   673	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m>=[37m [39;49;00mRARRAY(ary)->aux.capa)[37m [39;49;00m{[37m[39;49;00m$
   674	[37m	[39;49;00m[36mlong[39;49;00m[37m [39;49;00mnew_capa[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m/[37m [39;49;00m[34m2[39;49;00m;[37m[39;49;00m$
   675	[37m[39;49;00m$
   676	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(new_capa[37m [39;49;00m<[37m [39;49;00mARY_DEFAULT_SIZE)[37m [39;49;00m{[37m[39;49;00m$
   677	[37m	    [39;49;00mnew_capa[37m [39;49;00m=[37m [39;49;00mARY_DEFAULT_SIZE;[37m[39;49;00m$
   678	[37m	[39;49;00m}[37m[39;49;00m$
   679	[37m	[39;49;00mnew_capa[37m [39;49;00m+=[37m [39;49;00midx;[37m[39;49;00m$
   680	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(new_capa[37m [39;49;00m*[37m [39;49;00m([36mlong[39;49;00m)[34msizeof[39;49;00m(VALUE)[37m [39;49;00m<=[37m [39;49;00mnew_capa)[37m [39;49;00m{[37m[39;49;00m$
   681	[37m	    [39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mindex too big[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   682	[37m	[39;49;00m}[37m[39;49;00m$
   683	[37m	[39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mnew_capa);[37m[39;49;00m$
   684	[37m	[39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mnew_capa;[37m[39;49;00m$
   685	[37m    [39;49;00m}[37m[39;49;00m$
   686	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
   687	[37m	[39;49;00mrb_mem_clear(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mRARRAY(ary)->len,[37m[39;49;00m$
   688	[37m		     [39;49;00midx-RARRAY(ary)->len[37m [39;49;00m+[37m [39;49;00m[34m1[39;49;00m);[37m[39;49;00m$
   689	[37m    [39;49;00m}[37m[39;49;00m$
   690	[37m[39;49;00m$
   691	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m>=[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
   692	[37m	[39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00midx[37m [39;49;00m+[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   693	[37m    [39;49;00m}[37m[39;49;00m$
   694	[37m    [39;49;00mRARRAY(ary)->ptr[idx][37m [39;49;00m=[37m [39;49;00mval;[37m[39;49;00m$
   695	}[37m[39;49;00m$
   696	[37m[39;49;00m$
   697	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   698	ary_shared_first(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   699	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   700	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   701	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   702	{[37m[39;49;00m$
   703	[37m    [39;49;00mVALUE[37m [39;49;00mnv,[37m [39;49;00mresult;[37m[39;49;00m$
   704	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   705	[37m[39;49;00m$
   706	[37m    [39;49;00mrb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m1[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&nv);[37m[39;49;00m$
   707	[37m    [39;49;00mn[37m [39;49;00m=[37m [39;49;00mNUM2LONG(nv);[37m[39;49;00m$
   708	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(n[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
   709	[37m	[39;49;00mn[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   710	[37m    [39;49;00m}[37m[39;49;00m$
   711	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mif[39;49;00m[37m [39;49;00m(n[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   712	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mnegative array size[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   713	[37m    [39;49;00m}[37m[39;49;00m$
   714	[37m    [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mary_shared_array(rb_cArray,[37m [39;49;00mary);[37m[39;49;00m$
   715	[37m    [39;49;00mRARRAY(result)->len[37m [39;49;00m=[37m [39;49;00mn;[37m[39;49;00m$
   716	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
   717	}[37m[39;49;00m$
   718	[37m[39;49;00m$
   719	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   720	ary_shared_last(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   721	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   722	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   723	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   724	{[37m[39;49;00m$
   725	[37m    [39;49;00mVALUE[37m [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mary_shared_first(argc,[37m [39;49;00margv,[37m [39;49;00mary);[37m[39;49;00m$
   726	[37m[39;49;00m$
   727	[37m    [39;49;00mRARRAY(result)->ptr[37m [39;49;00m+=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00mRARRAY(result)->len;[37m[39;49;00m$
   728	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
   729	}[37m[39;49;00m$
   730	[37m[39;49;00m$
   731	[37m/*[39;49;00m$
   732	[37m *  call-seq:[39;49;00m$
   733	[37m *     array << obj            -> array[39;49;00m$
   734	[37m *  [39;49;00m$
   735	[37m *  Append---Pushes the given object on to the end of this array. This[39;49;00m$
   736	[37m *  expression returns the array itself, so several appends[39;49;00m$
   737	[37m *  may be chained together.[39;49;00m$
   738	[37m *[39;49;00m$
   739	[37m *     [ 1, 2 ] << "c" << "d" << [ 3, 4 ][39;49;00m$
   740	[37m *             #=>  [ 1, 2, "c", "d", [ 3, 4 ] ][39;49;00m$
   741	[37m *[39;49;00m$
   742	[37m */[39;49;00m[37m[39;49;00m$
   743	[37m[39;49;00m$
   744	VALUE[37m[39;49;00m$
   745	rb_ary_push(ary,[37m [39;49;00mitem)[37m[39;49;00m$
   746	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   747	[37m    [39;49;00mVALUE[37m [39;49;00mitem;[37m[39;49;00m$
   748	{[37m[39;49;00m$
   749	[37m    [39;49;00mrb_ary_store(ary,[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00mitem);[37m[39;49;00m$
   750	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   751	}[37m[39;49;00m$
   752	[37m[39;49;00m$
   753	[37m/* [39;49;00m$
   754	[37m *  call-seq:[39;49;00m$
   755	[37m *     array.push(obj, ... )   -> array[39;49;00m$
   756	[37m *  [39;49;00m$
   757	[37m *  Append---Pushes the given object(s) on to the end of this array. This[39;49;00m$
   758	[37m *  expression returns the array itself, so several appends[39;49;00m$
   759	[37m *  may be chained together.[39;49;00m$
   760	[37m *[39;49;00m$
   761	[37m *     a = [ "a", "b", "c" ][39;49;00m$
   762	[37m *     a.push("d", "e", "f")  [39;49;00m$
   763	[37m *             #=> ["a", "b", "c", "d", "e", "f"][39;49;00m$
   764	[37m */[39;49;00m[37m[39;49;00m$
   765	[37m[39;49;00m$
   766	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   767	rb_ary_push_m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   768	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   769	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   770	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   771	{[37m[39;49;00m$
   772	[37m    [39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(argc--)[37m [39;49;00m{[37m[39;49;00m$
   773	[37m	[39;49;00mrb_ary_push(ary,[37m [39;49;00m*argv++);[37m[39;49;00m$
   774	[37m    [39;49;00m}[37m[39;49;00m$
   775	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   776	}[37m[39;49;00m$
   777	[37m[39;49;00m$
   778	VALUE[37m[39;49;00m$
   779	rb_ary_pop(ary)[37m[39;49;00m$
   780	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   781	{[37m[39;49;00m$
   782	[37m    [39;49;00mrb_ary_modify_check(ary);[37m[39;49;00m$
   783	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   784	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(!FL_TEST(ary,[37m [39;49;00mELTS_SHARED)[37m [39;49;00m&&[37m[39;49;00m$
   785	[37m	    [39;49;00mRARRAY(ary)->len[37m [39;49;00m*[37m [39;49;00m[34m2[39;49;00m[37m [39;49;00m<[37m [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m&&[37m[39;49;00m$
   786	[37m	    [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m>[37m [39;49;00mARY_DEFAULT_SIZE)[37m [39;49;00m{[37m[39;49;00m$
   787	[37m	[39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m*[37m [39;49;00m[34m2[39;49;00m;[37m[39;49;00m$
   788	[37m	[39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->aux.capa);[37m[39;49;00m$
   789	[37m    [39;49;00m}[37m[39;49;00m$
   790	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->ptr[--RARRAY(ary)->len];[37m[39;49;00m$
   791	}[37m[39;49;00m$
   792	[37m[39;49;00m$
   793	[37m/*[39;49;00m$
   794	[37m *  call-seq:[39;49;00m$
   795	[37m *     array.pop  -> obj or nil[39;49;00m$
   796	[37m *  [39;49;00m$
   797	[37m *  Removes the last element from <i>self</i> and returns it, or[39;49;00m$
   798	[37m *  <code>nil</code> if the array is empty.[39;49;00m$
   799	[37m *     [39;49;00m$
   800	[37m *     a = [ "a", "b", "c", "d" ][39;49;00m$
   801	[37m *     a.pop     #=> "d"[39;49;00m$
   802	[37m *     a.pop(2)  #=> ["b", "c"][39;49;00m$
   803	[37m *     a         #=> ["a"][39;49;00m$
   804	[37m */[39;49;00m[37m[39;49;00m$
   805	[37m[39;49;00m$
   806	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   807	rb_ary_pop_m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   808	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   809	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   810	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   811	{[37m[39;49;00m$
   812	[37m    [39;49;00mVALUE[37m [39;49;00mresult;[37m[39;49;00m$
   813	[37m[39;49;00m$
   814	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   815	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_pop(ary);[37m[39;49;00m$
   816	[37m    [39;49;00m}[37m[39;49;00m$
   817	[37m[39;49;00m$
   818	[37m    [39;49;00mrb_ary_modify_check(ary);[37m[39;49;00m$
   819	[37m[39;49;00m$
   820	[37m    [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mary_shared_last(argc,[37m [39;49;00margv,[37m [39;49;00mary);[37m[39;49;00m$
   821	[37m    [39;49;00mRARRAY(ary)->len[37m [39;49;00m-=[37m [39;49;00mRARRAY(result)->len;[37m[39;49;00m$
   822	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
   823	}[37m[39;49;00m$
   824	[37m[39;49;00m$
   825	VALUE[37m[39;49;00m$
   826	rb_ary_shift(ary)[37m[39;49;00m$
   827	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   828	{[37m[39;49;00m$
   829	[37m    [39;49;00mVALUE[37m [39;49;00mtop;[37m[39;49;00m$
   830	[37m[39;49;00m$
   831	[37m    [39;49;00mrb_ary_modify_check(ary);[37m[39;49;00m$
   832	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   833	[37m    [39;49;00mtop[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr[[34m0[39;49;00m];[37m[39;49;00m$
   834	[37m    [39;49;00mary_make_shared(ary);[37m[39;49;00m$
   835	[37m    [39;49;00mRARRAY(ary)->ptr++;[37m		[39;49;00m[37m/* shift ptr */[39;49;00m[37m[39;49;00m$
   836	[37m    [39;49;00mRARRAY(ary)->len--;[37m[39;49;00m$
   837	[37m[39;49;00m$
   838	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mtop;[37m[39;49;00m$
   839	}[37m[39;49;00m$
   840	[37m[39;49;00m$
   841	[37m/*[39;49;00m$
   842	[37m *  call-seq:[39;49;00m$
   843	[37m *     array.shift   ->   obj or nil[39;49;00m$
   844	[37m *  [39;49;00m$
   845	[37m *  Returns the first element of <i>self</i> and removes it (shifting all[39;49;00m$
   846	[37m *  other elements down by one). Returns <code>nil</code> if the array[39;49;00m$
   847	[37m *  is empty.[39;49;00m$
   848	[37m *     [39;49;00m$
   849	[37m *     args = [ "-m", "-q", "filename" ][39;49;00m$
   850	[37m *     args.shift     #=> "-m"[39;49;00m$
   851	[37m *     args           #=> ["-q", "filename"][39;49;00m$
   852	[37m *[39;49;00m$
   853	[37m *     args = [ "-m", "-q", "filename" ][39;49;00m$
   854	[37m *     args.shift(2)  #=> ["-m", "-q"][39;49;00m$
   855	[37m *     args           #=> ["filename"][39;49;00m$
   856	[37m */[39;49;00m[37m[39;49;00m$
   857	[37m[39;49;00m$
   858	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   859	rb_ary_shift_m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   860	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   861	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   862	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   863	{[37m[39;49;00m$
   864	[37m    [39;49;00mVALUE[37m [39;49;00mresult;[37m[39;49;00m$
   865	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
   866	[37m[39;49;00m$
   867	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   868	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_shift(ary);[37m[39;49;00m$
   869	[37m    [39;49;00m}[37m[39;49;00m$
   870	[37m[39;49;00m$
   871	[37m    [39;49;00mrb_ary_modify_check(ary);[37m[39;49;00m$
   872	[37m[39;49;00m$
   873	[37m    [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mary_shared_first(argc,[37m [39;49;00margv,[37m [39;49;00mary);[37m[39;49;00m$
   874	[37m    [39;49;00mn[37m [39;49;00m=[37m [39;49;00mRARRAY(result)->len;[37m[39;49;00m$
   875	[37m    [39;49;00mRARRAY(ary)->ptr[37m [39;49;00m+=[37m [39;49;00mn;[37m[39;49;00m$
   876	[37m    [39;49;00mRARRAY(ary)->len[37m [39;49;00m-=[37m [39;49;00mn;[37m[39;49;00m$
   877	[37m[39;49;00m$
   878	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
   879	}[37m[39;49;00m$
   880	[37m[39;49;00m$
   881	VALUE[37m[39;49;00m$
   882	rb_ary_unshift(ary,[37m [39;49;00mitem)[37m[39;49;00m$
   883	[37m    [39;49;00mVALUE[37m [39;49;00mary,[37m [39;49;00mitem;[37m[39;49;00m$
   884	{[37m[39;49;00m$
   885	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
   886	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00mRARRAY(ary)->aux.capa)[37m [39;49;00m{[37m[39;49;00m$
   887	[37m	[39;49;00m[36mlong[39;49;00m[37m [39;49;00mcapa_inc[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m/[37m [39;49;00m[34m2[39;49;00m;[37m[39;49;00m$
   888	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(capa_inc[37m [39;49;00m<[37m [39;49;00mARY_DEFAULT_SIZE)[37m [39;49;00m{[37m[39;49;00m$
   889	[37m	    [39;49;00mcapa_inc[37m [39;49;00m=[37m [39;49;00mARY_DEFAULT_SIZE;[37m[39;49;00m$
   890	[37m	[39;49;00m}[37m[39;49;00m$
   891	[37m	[39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m+=[37m [39;49;00mcapa_inc;[37m[39;49;00m$
   892	[37m	[39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->aux.capa);[37m[39;49;00m$
   893	[37m    [39;49;00m}[37m[39;49;00m$
   894	[37m[39;49;00m$
   895	[37m    [39;49;00m[37m/* sliding items */[39;49;00m[37m[39;49;00m$
   896	[37m    [39;49;00mMEMMOVE(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00mRARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
   897	[37m[39;49;00m$
   898	[37m    [39;49;00mRARRAY(ary)->len++;[37m[39;49;00m$
   899	[37m    [39;49;00mRARRAY(ary)->ptr[[34m0[39;49;00m][37m [39;49;00m=[37m [39;49;00mitem;[37m[39;49;00m$
   900	[37m[39;49;00m$
   901	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   902	}[37m[39;49;00m$
   903	[37m[39;49;00m$
   904	[37m/*[39;49;00m$
   905	[37m *  call-seq:[39;49;00m$
   906	[37m *     array.unshift(obj, ...)  -> array[39;49;00m$
   907	[37m *  [39;49;00m$
   908	[37m *  Prepends objects to the front of <i>array</i>.[39;49;00m$
   909	[37m *  other elements up one.[39;49;00m$
   910	[37m *     [39;49;00m$
   911	[37m *     a = [ "b", "c", "d" ][39;49;00m$
   912	[37m *     a.unshift("a")   #=> ["a", "b", "c", "d"][39;49;00m$
   913	[37m *     a.unshift(1, 2)  #=> [ 1, 2, "a", "b", "c", "d"][39;49;00m$
   914	[37m */[39;49;00m[37m[39;49;00m$
   915	[37m[39;49;00m$
   916	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   917	rb_ary_unshift_m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
   918	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
   919	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
   920	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   921	{[37m[39;49;00m$
   922	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   923	[37m[39;49;00m$
   924	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   925	[37m[39;49;00m$
   926	[37m    [39;49;00m[37m/* make rooms by setting the last item */[39;49;00m[37m[39;49;00m$
   927	[37m    [39;49;00mrb_ary_store(ary,[37m [39;49;00mlen[37m [39;49;00m+[37m [39;49;00margc[37m [39;49;00m-[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00mQnil);[37m[39;49;00m$
   928	[37m[39;49;00m$
   929	[37m    [39;49;00m[37m/* sliding items */[39;49;00m[37m[39;49;00m$
   930	[37m    [39;49;00mMEMMOVE(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00margc,[37m [39;49;00mRARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mlen);[37m[39;49;00m$
   931	[37m    [39;49;00mMEMCPY(RARRAY(ary)->ptr,[37m [39;49;00margv,[37m [39;49;00mVALUE,[37m [39;49;00margc);[37m[39;49;00m$
   932	[37m    [39;49;00m[37m[39;49;00m$
   933	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
   934	}[37m[39;49;00m$
   935	[37m[39;49;00m$
   936	[37m/* faster version - use this if you don't need to treat negative offset */[39;49;00m[37m[39;49;00m$
   937	[34mstatic[39;49;00m[37m [39;49;00m[34minline[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   938	rb_ary_elt(ary,[37m [39;49;00moffset)[37m[39;49;00m$
   939	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   940	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00moffset;[37m[39;49;00m$
   941	{[37m[39;49;00m$
   942	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   943	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(offset[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m||[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m<=[37m [39;49;00moffset)[37m [39;49;00m{[37m[39;49;00m$
   944	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   945	[37m    [39;49;00m}[37m[39;49;00m$
   946	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->ptr[offset];[37m[39;49;00m$
   947	}[37m[39;49;00m$
   948	[37m[39;49;00m$
   949	VALUE[37m[39;49;00m$
   950	rb_ary_entry(ary,[37m [39;49;00moffset)[37m[39;49;00m$
   951	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   952	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00moffset;[37m[39;49;00m$
   953	{[37m[39;49;00m$
   954	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(offset[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
   955	[37m	[39;49;00moffset[37m [39;49;00m+=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
   956	[37m    [39;49;00m}[37m[39;49;00m$
   957	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_elt(ary,[37m [39;49;00moffset);[37m[39;49;00m$
   958	}[37m[39;49;00m$
   959	[37m[39;49;00m$
   960	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
   961	rb_ary_subseq(ary,[37m [39;49;00mbeg,[37m [39;49;00mlen)[37m[39;49;00m$
   962	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
   963	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mbeg,[37m [39;49;00mlen;[37m[39;49;00m$
   964	{[37m[39;49;00m$
   965	[37m    [39;49;00mVALUE[37m [39;49;00mklass,[37m [39;49;00mary2,[37m [39;49;00mshared;[37m[39;49;00m$
   966	[37m    [39;49;00mVALUE[37m [39;49;00m*ptr;[37m[39;49;00m$
   967	[37m[39;49;00m$
   968	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   969	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m||[37m [39;49;00mlen[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
   970	[37m[39;49;00m$
   971	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m+[37m [39;49;00mlen[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
   972	[37m	[39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00mbeg;[37m[39;49;00m$
   973	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m[39;49;00m$
   974	[37m	    [39;49;00mlen[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   975	[37m    [39;49;00m}[37m[39;49;00m$
   976	[37m    [39;49;00mklass[37m [39;49;00m=[37m [39;49;00mrb_obj_class(ary);[37m[39;49;00m$
   977	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_new(klass,[37m [39;49;00m[34m0[39;49;00m);[37m[39;49;00m$
   978	[37m[39;49;00m$
   979	[37m    [39;49;00mshared[37m [39;49;00m=[37m [39;49;00mary_make_shared(ary);[37m[39;49;00m$
   980	[37m    [39;49;00mptr[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr;[37m[39;49;00m$
   981	[37m    [39;49;00mary2[37m [39;49;00m=[37m [39;49;00mary_alloc(klass);[37m[39;49;00m$
   982	[37m    [39;49;00mRARRAY(ary2)->ptr[37m [39;49;00m=[37m [39;49;00mptr[37m [39;49;00m+[37m [39;49;00mbeg;[37m[39;49;00m$
   983	[37m    [39;49;00mRARRAY(ary2)->len[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
   984	[37m    [39;49;00mRARRAY(ary2)->aux.shared[37m [39;49;00m=[37m [39;49;00mshared;[37m[39;49;00m$
   985	[37m    [39;49;00mFL_SET(ary2,[37m [39;49;00mELTS_SHARED);[37m[39;49;00m$
   986	[37m[39;49;00m$
   987	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary2;[37m[39;49;00m$
   988	}[37m[39;49;00m$
   989	[37m[39;49;00m$
   990	[37m/* [39;49;00m$
   991	[37m *  call-seq:[39;49;00m$
   992	[37m *     array[index]                -> obj      or nil[39;49;00m$
   993	[37m *     array[start, length]        -> an_array or nil[39;49;00m$
   994	[37m *     array[range]                -> an_array or nil[39;49;00m$
   995	[37m *     array.slice(index)          -> obj      or nil[39;49;00m$
   996	[37m *     array.slice(start, length)  -> an_array or nil[39;49;00m$
   997	[37m *     array.slice(range)          -> an_array or nil[39;49;00m$
   998	[37m *[39;49;00m$
   999	[37m *  Element Reference---Returns the element at _index_,[39;49;00m$
  1000	[37m *  or returns a subarray starting at _start_ and[39;49;00m$
  1001	[37m *  continuing for _length_ elements, or returns a subarray[39;49;00m$
  1002	[37m *  specified by _range_.[39;49;00m$
  1003	[37m *  Negative indices count backward from the end of the[39;49;00m$
  1004	[37m *  array (-1 is the last element). Returns nil if the index[39;49;00m$
  1005	[37m *  (or starting index) are out of range.[39;49;00m$
  1006	[37m *[39;49;00m$
  1007	[37m *     a = [ "a", "b", "c", "d", "e" ][39;49;00m$
  1008	[37m *     a[2] +  a[0] + a[1]    #=> "cab"[39;49;00m$
  1009	[37m *     a[6]                   #=> nil[39;49;00m$
  1010	[37m *     a[1, 2]                #=> [ "b", "c" ][39;49;00m$
  1011	[37m *     a[1..3]                #=> [ "b", "c", "d" ][39;49;00m$
  1012	[37m *     a[4..7]                #=> [ "e" ][39;49;00m$
  1013	[37m *     a[6..10]               #=> nil[39;49;00m$
  1014	[37m *     a[-3, 3]               #=> [ "c", "d", "e" ][39;49;00m$
  1015	[37m *     # special cases[39;49;00m$
  1016	[37m *     a[5]                   #=> nil[39;49;00m$
  1017	[37m *     a[5, 1]                #=> [][39;49;00m$
  1018	[37m *     a[5..10]               #=> [][39;49;00m$
  1019	[37m *[39;49;00m$
  1020	[37m */[39;49;00m[37m[39;49;00m$
  1021	[37m[39;49;00m$
  1022	VALUE[37m[39;49;00m$
  1023	rb_ary_aref(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1024	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1025	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1026	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1027	{[37m[39;49;00m$
  1028	[37m    [39;49;00mVALUE[37m [39;49;00marg;[37m[39;49;00m$
  1029	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mbeg,[37m [39;49;00mlen;[37m[39;49;00m$
  1030	[37m[39;49;00m$
  1031	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m2[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1032	[37m	[39;49;00mbeg[37m [39;49;00m=[37m [39;49;00mNUM2LONG(argv[[34m0[39;49;00m]);[37m[39;49;00m$
  1033	[37m	[39;49;00mlen[37m [39;49;00m=[37m [39;49;00mNUM2LONG(argv[[34m1[39;49;00m]);[37m[39;49;00m$
  1034	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1035	[37m	    [39;49;00mbeg[37m [39;49;00m+=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1036	[37m	[39;49;00m}[37m[39;49;00m$
  1037	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_subseq(ary,[37m [39;49;00mbeg,[37m [39;49;00mlen);[37m[39;49;00m$
  1038	[37m    [39;49;00m}[37m[39;49;00m$
  1039	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m!=[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1040	[37m	[39;49;00mrb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m11[39;49;00m[33m"[39;49;00m,[37m [39;49;00m[34m0[39;49;00m,[37m [39;49;00m[34m0[39;49;00m);[37m[39;49;00m$
  1041	[37m    [39;49;00m}[37m[39;49;00m$
  1042	[37m    [39;49;00marg[37m [39;49;00m=[37m [39;49;00margv[[34m0[39;49;00m];[37m[39;49;00m$
  1043	[37m    [39;49;00m[37m/* special case - speeding up */[39;49;00m[37m[39;49;00m$
  1044	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FIXNUM_P(arg))[37m [39;49;00m{[37m[39;49;00m$
  1045	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_entry(ary,[37m [39;49;00mFIX2LONG(arg));[37m[39;49;00m$
  1046	[37m    [39;49;00m}[37m[39;49;00m$
  1047	[37m    [39;49;00m[37m/* check if idx is Range */[39;49;00m[37m[39;49;00m$
  1048	[37m    [39;49;00m[34mswitch[39;49;00m[37m [39;49;00m(rb_range_beg_len(arg,[37m [39;49;00m&beg,[37m [39;49;00m&len,[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00m[34m0[39;49;00m))[37m [39;49;00m{[37m[39;49;00m$
  1049	[37m      [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mQfalse[39;49;00m:[37m[39;49;00m$
  1050	[37m	[39;49;00m[34mbreak[39;49;00m;[37m[39;49;00m$
  1051	[37m      [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mQnil[39;49;00m:[37m[39;49;00m$
  1052	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
  1053	[37m      [39;49;00m[34mdefault[39;49;00m:[37m[39;49;00m$
  1054	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_subseq(ary,[37m [39;49;00mbeg,[37m [39;49;00mlen);[37m[39;49;00m$
  1055	[37m    [39;49;00m}[37m[39;49;00m$
  1056	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_entry(ary,[37m [39;49;00mNUM2LONG(arg));[37m[39;49;00m$
  1057	}[37m[39;49;00m$
  1058	[37m[39;49;00m$
  1059	[37m/* [39;49;00m$
  1060	[37m *  call-seq:[39;49;00m$
  1061	[37m *     array.at(index)   ->   obj  or nil[39;49;00m$
  1062	[37m *[39;49;00m$
  1063	[37m *  Returns the element at _index_. A[39;49;00m$
  1064	[37m *  negative index counts from the end of _self_.  Returns +nil+[39;49;00m$
  1065	[37m *  if the index is out of range. See also <code>Array#[]</code>.[39;49;00m$
  1066	[37m *  (<code>Array#at</code> is slightly faster than <code>Array#[]</code>,[39;49;00m$
  1067	[37m *  as it does not accept ranges and so on.)[39;49;00m$
  1068	[37m *[39;49;00m$
  1069	[37m *     a = [ "a", "b", "c", "d", "e" ][39;49;00m$
  1070	[37m *     a.at(0)     #=> "a"[39;49;00m$
  1071	[37m *     a.at(-1)    #=> "e"[39;49;00m$
  1072	[37m */[39;49;00m[37m[39;49;00m$
  1073	[37m[39;49;00m$
  1074	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1075	rb_ary_at(ary,[37m [39;49;00mpos)[37m[39;49;00m$
  1076	[37m    [39;49;00mVALUE[37m [39;49;00mary,[37m [39;49;00mpos;[37m[39;49;00m$
  1077	{[37m[39;49;00m$
  1078	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_entry(ary,[37m [39;49;00mNUM2LONG(pos));[37m[39;49;00m$
  1079	}[37m[39;49;00m$
  1080	[37m[39;49;00m$
  1081	[37m/*[39;49;00m$
  1082	[37m *  call-seq:[39;49;00m$
  1083	[37m *     array.first     ->   obj or nil[39;49;00m$
  1084	[37m *     array.first(n)  ->   an_array[39;49;00m$
  1085	[37m *  [39;49;00m$
  1086	[37m *  Returns the first element of the array. If the array is empty,[39;49;00m$
  1087	[37m *  returns <code>nil</code>.[39;49;00m$
  1088	[37m *     [39;49;00m$
  1089	[37m *     a = [ "q", "r", "s", "t" ][39;49;00m$
  1090	[37m *     a.first     #=> "q"[39;49;00m$
  1091	[37m *     a.first(2)  #=> ["q", "r"][39;49;00m$
  1092	[37m */[39;49;00m[37m[39;49;00m$
  1093	[37m[39;49;00m$
  1094	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1095	rb_ary_first(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1096	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1097	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1098	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1099	{[37m[39;49;00m$
  1100	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1101	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
  1102	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->ptr[[34m0[39;49;00m];[37m[39;49;00m$
  1103	[37m    [39;49;00m}[37m[39;49;00m$
  1104	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1105	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_shared_first(argc,[37m [39;49;00margv,[37m [39;49;00mary);[37m[39;49;00m$
  1106	[37m    [39;49;00m}[37m[39;49;00m$
  1107	}[37m[39;49;00m$
  1108	[37m[39;49;00m$
  1109	[37m/*[39;49;00m$
  1110	[37m *  call-seq:[39;49;00m$
  1111	[37m *     array.last     ->  obj or nil[39;49;00m$
  1112	[37m *     array.last(n)  ->  an_array[39;49;00m$
  1113	[37m *  [39;49;00m$
  1114	[37m *  Returns the last element(s) of <i>self</i>. If the array is empty,[39;49;00m$
  1115	[37m *  the first form returns <code>nil</code>.[39;49;00m$
  1116	[37m *     [39;49;00m$
  1117	[37m *     a = [ "w", "x", "y", "z" ][39;49;00m$
  1118	[37m *     a.last     #=> "z"[39;49;00m$
  1119	[37m *     a.last(2)  #=> ["y", "z"][39;49;00m$
  1120	[37m */[39;49;00m[37m[39;49;00m$
  1121	[37m[39;49;00m$
  1122	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1123	rb_ary_last(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1124	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1125	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1126	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1127	{[37m[39;49;00m$
  1128	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1129	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
  1130	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->ptr[RARRAY(ary)->len[34m-1[39;49;00m];[37m[39;49;00m$
  1131	[37m    [39;49;00m}[37m[39;49;00m$
  1132	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1133	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary_shared_last(argc,[37m [39;49;00margv,[37m [39;49;00mary);[37m[39;49;00m$
  1134	[37m    [39;49;00m}[37m[39;49;00m$
  1135	}[37m[39;49;00m$
  1136	[37m[39;49;00m$
  1137	[37m/*[39;49;00m$
  1138	[37m *  call-seq:[39;49;00m$
  1139	[37m *     array.fetch(index)                    -> obj[39;49;00m$
  1140	[37m *     array.fetch(index, default )          -> obj[39;49;00m$
  1141	[37m *     array.fetch(index) {|index| block }   -> obj[39;49;00m$
  1142	[37m *  [39;49;00m$
  1143	[37m *  Tries to return the element at position <i>index</i>. If the index[39;49;00m$
  1144	[37m *  lies outside the array, the first form throws an[39;49;00m$
  1145	[37m *  <code>IndexError</code> exception, the second form returns[39;49;00m$
  1146	[37m *  <i>default</i>, and the third form returns the value of invoking[39;49;00m$
  1147	[37m *  the block, passing in the index. Negative values of <i>index</i>[39;49;00m$
  1148	[37m *  count from the end of the array.[39;49;00m$
  1149	[37m *     [39;49;00m$
  1150	[37m *     a = [ 11, 22, 33, 44 ][39;49;00m$
  1151	[37m *     a.fetch(1)               #=> 22[39;49;00m$
  1152	[37m *     a.fetch(-1)              #=> 44[39;49;00m$
  1153	[37m *     a.fetch(4, 'cat')        #=> "cat"[39;49;00m$
  1154	[37m *     a.fetch(4) { |i| i*i }   #=> 16[39;49;00m$
  1155	[37m */[39;49;00m[37m[39;49;00m$
  1156	[37m[39;49;00m$
  1157	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1158	rb_ary_fetch(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1159	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1160	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1161	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1162	{[37m[39;49;00m$
  1163	[37m    [39;49;00mVALUE[37m [39;49;00mpos,[37m [39;49;00mifnone;[37m[39;49;00m$
  1164	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mblock_given;[37m[39;49;00m$
  1165	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00midx;[37m[39;49;00m$
  1166	[37m[39;49;00m$
  1167	[37m    [39;49;00mrb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m11[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&pos,[37m [39;49;00m&ifnone);[37m[39;49;00m$
  1168	[37m    [39;49;00mblock_given[37m [39;49;00m=[37m [39;49;00mrb_block_given_p();[37m[39;49;00m$
  1169	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(block_given[37m [39;49;00m&&[37m [39;49;00margc[37m [39;49;00m==[37m [39;49;00m[34m2[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1170	[37m	[39;49;00mrb_warn([33m"[39;49;00m[33mblock supersedes default value argument[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1171	[37m    [39;49;00m}[37m[39;49;00m$
  1172	[37m    [39;49;00midx[37m [39;49;00m=[37m [39;49;00mNUM2LONG(pos);[37m[39;49;00m$
  1173	[37m[39;49;00m$
  1174	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1175	[37m	[39;49;00midx[37m [39;49;00m+=[37m  [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1176	[37m    [39;49;00m}[37m[39;49;00m$
  1177	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(idx[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m||[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m<=[37m [39;49;00midx)[37m [39;49;00m{[37m[39;49;00m$
  1178	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(block_given)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_yield(pos);[37m[39;49;00m$
  1179	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1180	[37m	    [39;49;00mrb_raise(rb_eIndexError,[37m [39;49;00m[33m"[39;49;00m[33mindex %ld out of array[39;49;00m[33m"[39;49;00m,[37m [39;49;00midx);[37m[39;49;00m$
  1181	[37m	[39;49;00m}[37m[39;49;00m$
  1182	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mifnone;[37m[39;49;00m$
  1183	[37m    [39;49;00m}[37m[39;49;00m$
  1184	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mRARRAY(ary)->ptr[idx];[37m[39;49;00m$
  1185	}[37m[39;49;00m$
  1186	[37m[39;49;00m$
  1187	[37m/*[39;49;00m$
  1188	[37m *  call-seq:[39;49;00m$
  1189	[37m *     array.index(obj)           ->  int or nil[39;49;00m$
  1190	[37m *     array.index {|item| block} ->  int or nil[39;49;00m$
  1191	[37m *  [39;49;00m$
  1192	[37m *  Returns the index of the first object in <i>self</i> such that is[39;49;00m$
  1193	[37m *  <code>==</code> to <i>obj</i>. If a block is given instead of an[39;49;00m$
  1194	[37m *  argument, returns first object for which <em>block</em> is true.[39;49;00m$
  1195	[37m *  Returns <code>nil</code> if no match is found.[39;49;00m$
  1196	[37m *     [39;49;00m$
  1197	[37m *     a = [ "a", "b", "c" ][39;49;00m$
  1198	[37m *     a.index("b")        #=> 1[39;49;00m$
  1199	[37m *     a.index("z")        #=> nil[39;49;00m$
  1200	[37m *     a.index{|x|x=="b"}  #=> 1[39;49;00m$
  1201	[37m */[39;49;00m[37m[39;49;00m$
  1202	[37m[39;49;00m$
  1203	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1204	rb_ary_index(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1205	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1206	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1207	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1208	{[37m[39;49;00m$
  1209	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
  1210	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1211	[37m[39;49;00m$
  1212	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m01[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&val)[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1213	[37m	[39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1214	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RTEST(rb_yield(RARRAY(ary)->ptr[i])))[37m [39;49;00m{[37m[39;49;00m$
  1215	[37m		[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mLONG2NUM(i);[37m[39;49;00m$
  1216	[37m	    [39;49;00m}[37m[39;49;00m$
  1217	[37m	[39;49;00m}[37m[39;49;00m$
  1218	[37m    [39;49;00m}[37m[39;49;00m$
  1219	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1220	[37m	[39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1221	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_equal(RARRAY(ary)->ptr[i],[37m [39;49;00mval))[37m[39;49;00m$
  1222	[37m		[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mLONG2NUM(i);[37m[39;49;00m$
  1223	[37m	[39;49;00m}[37m[39;49;00m$
  1224	[37m    [39;49;00m}[37m[39;49;00m$
  1225	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
  1226	}[37m[39;49;00m$
  1227	[37m[39;49;00m$
  1228	[37m/*[39;49;00m$
  1229	[37m *  call-seq:[39;49;00m$
  1230	[37m *     array.rindex(obj)    ->  int or nil[39;49;00m$
  1231	[37m *  [39;49;00m$
  1232	[37m *  Returns the index of the last object in <i>array</i>[39;49;00m$
  1233	[37m *  <code>==</code> to <i>obj</i>. If a block is given instead of an[39;49;00m$
  1234	[37m *  argument, returns first object for which <em>block</em> is[39;49;00m$
  1235	[37m *  true. Returns <code>nil</code> if no match is found.[39;49;00m$
  1236	[37m *     [39;49;00m$
  1237	[37m *     a = [ "a", "b", "b", "b", "c" ][39;49;00m$
  1238	[37m *     a.rindex("b")        #=> 3[39;49;00m$
  1239	[37m *     a.rindex("z")        #=> nil[39;49;00m$
  1240	[37m *     a.rindex{|x|x=="b"}  #=> 3[39;49;00m$
  1241	[37m */[39;49;00m[37m[39;49;00m$
  1242	[37m[39;49;00m$
  1243	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1244	rb_ary_rindex(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1245	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1246	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1247	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1248	{[37m[39;49;00m$
  1249	[37m    [39;49;00mVALUE[37m [39;49;00mval;[37m[39;49;00m$
  1250	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1251	[37m[39;49;00m$
  1252	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m01[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&val)[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1253	[37m	[39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(i--)[37m [39;49;00m{[37m[39;49;00m$
  1254	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RTEST(rb_yield(RARRAY(ary)->ptr[i])))[37m[39;49;00m$
  1255	[37m		[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mLONG2NUM(i);[37m[39;49;00m$
  1256	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(i[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
  1257	[37m		[39;49;00mi[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1258	[37m	    [39;49;00m}[37m[39;49;00m$
  1259	[37m	[39;49;00m}[37m[39;49;00m$
  1260	[37m    [39;49;00m}[37m[39;49;00m$
  1261	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1262	[37m	[39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(i--)[37m [39;49;00m{[37m[39;49;00m$
  1263	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_equal(RARRAY(ary)->ptr[i],[37m [39;49;00mval))[37m[39;49;00m$
  1264	[37m		[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mLONG2NUM(i);[37m[39;49;00m$
  1265	[37m	    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(i[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
  1266	[37m		[39;49;00mi[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1267	[37m	    [39;49;00m}[37m[39;49;00m$
  1268	[37m	[39;49;00m}[37m[39;49;00m$
  1269	[37m    [39;49;00m}[37m[39;49;00m$
  1270	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQnil;[37m[39;49;00m$
  1271	}[37m[39;49;00m$
  1272	[37m[39;49;00m$
  1273	VALUE[37m[39;49;00m$
  1274	rb_ary_to_ary(obj)[37m[39;49;00m$
  1275	[37m    [39;49;00mVALUE[37m [39;49;00mobj;[37m[39;49;00m$
  1276	{[37m[39;49;00m$
  1277	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(TYPE(obj)[37m [39;49;00m==[37m [39;49;00mT_ARRAY)[37m [39;49;00m{[37m[39;49;00m$
  1278	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mobj;[37m[39;49;00m$
  1279	[37m    [39;49;00m}[37m[39;49;00m$
  1280	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_respond_to(obj,[37m [39;49;00mrb_intern([33m"[39;49;00m[33mto_ary[39;49;00m[33m"[39;49;00m)))[37m [39;49;00m{[37m[39;49;00m$
  1281	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mto_ary(obj);[37m[39;49;00m$
  1282	[37m    [39;49;00m}[37m[39;49;00m$
  1283	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_new3([34m1[39;49;00m,[37m [39;49;00mobj);[37m[39;49;00m$
  1284	}[37m[39;49;00m$
  1285	[37m[39;49;00m$
  1286	[34mstatic[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m[39;49;00m$
  1287	rb_ary_splice(ary,[37m [39;49;00mbeg,[37m [39;49;00mlen,[37m [39;49;00mrpl)[37m[39;49;00m$
  1288	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1289	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mbeg,[37m [39;49;00mlen;[37m[39;49;00m$
  1290	[37m    [39;49;00mVALUE[37m [39;49;00mrpl;[37m[39;49;00m$
  1291	{[37m[39;49;00m$
  1292	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mrlen;[37m[39;49;00m$
  1293	[37m[39;49;00m$
  1294	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00mrb_raise(rb_eIndexError,[37m [39;49;00m[33m"[39;49;00m[33mnegative length (%ld)[39;49;00m[33m"[39;49;00m,[37m [39;49;00mlen);[37m[39;49;00m$
  1295	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1296	[37m	[39;49;00mbeg[37m [39;49;00m+=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1297	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1298	[37m	    [39;49;00mbeg[37m [39;49;00m-=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1299	[37m	    [39;49;00mrb_raise(rb_eIndexError,[37m [39;49;00m[33m"[39;49;00m[33mindex %ld out of array[39;49;00m[33m"[39;49;00m,[37m [39;49;00mbeg);[37m[39;49;00m$
  1300	[37m	[39;49;00m}[37m[39;49;00m$
  1301	[37m    [39;49;00m}[37m[39;49;00m$
  1302	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m+[37m [39;49;00mlen[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
  1303	[37m	[39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00mbeg;[37m[39;49;00m$
  1304	[37m    [39;49;00m}[37m[39;49;00m$
  1305	[37m[39;49;00m$
  1306	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rpl[37m [39;49;00m==[37m [39;49;00mQundef)[37m [39;49;00m{[37m[39;49;00m$
  1307	[37m	[39;49;00mrlen[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
  1308	[37m    [39;49;00m}[37m[39;49;00m$
  1309	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1310	[37m	[39;49;00mrpl[37m [39;49;00m=[37m [39;49;00mrb_ary_to_ary(rpl);[37m[39;49;00m$
  1311	[37m	[39;49;00mrlen[37m [39;49;00m=[37m [39;49;00mRARRAY(rpl)->len;[37m[39;49;00m$
  1312	[37m    [39;49;00m}[37m[39;49;00m$
  1313	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
  1314	[37m[39;49;00m$
  1315	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m>=[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
  1316	[37m	[39;49;00mlen[37m [39;49;00m=[37m [39;49;00mbeg[37m [39;49;00m+[37m [39;49;00mrlen;[37m[39;49;00m$
  1317	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m>=[37m [39;49;00mRARRAY(ary)->aux.capa)[37m [39;49;00m{[37m[39;49;00m$
  1318	[37m	    [39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mlen);[37m[39;49;00m$
  1319	[37m	    [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
  1320	[37m	[39;49;00m}[37m[39;49;00m$
  1321	[37m	[39;49;00mrb_mem_clear(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00mbeg[37m [39;49;00m-[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
  1322	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(rlen[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1323	[37m	    [39;49;00mMEMCPY(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mbeg,[37m [39;49;00mRARRAY(rpl)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mrlen);[37m[39;49;00m$
  1324	[37m	[39;49;00m}[37m[39;49;00m$
  1325	[37m	[39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00mlen;[37m[39;49;00m$
  1326	[37m    [39;49;00m}[37m[39;49;00m$
  1327	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1328	[37m	[39;49;00m[36mlong[39;49;00m[37m [39;49;00malen;[37m[39;49;00m$
  1329	[37m[39;49;00m$
  1330	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(beg[37m [39;49;00m+[37m [39;49;00mlen[37m [39;49;00m>[37m [39;49;00mRARRAY(ary)->len)[37m [39;49;00m{[37m[39;49;00m$
  1331	[37m	    [39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00mbeg;[37m[39;49;00m$
  1332	[37m	[39;49;00m}[37m[39;49;00m$
  1333	[37m[39;49;00m$
  1334	[37m	[39;49;00malen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m+[37m [39;49;00mrlen[37m [39;49;00m-[37m [39;49;00mlen;[37m[39;49;00m$
  1335	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(alen[37m [39;49;00m>=[37m [39;49;00mRARRAY(ary)->aux.capa)[37m [39;49;00m{[37m[39;49;00m$
  1336	[37m	    [39;49;00mREALLOC_N(RARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00malen);[37m[39;49;00m$
  1337	[37m	    [39;49;00mRARRAY(ary)->aux.capa[37m [39;49;00m=[37m [39;49;00malen;[37m[39;49;00m$
  1338	[37m	[39;49;00m}[37m[39;49;00m$
  1339	[37m[39;49;00m$
  1340	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m!=[37m [39;49;00mrlen)[37m [39;49;00m{[37m[39;49;00m$
  1341	[37m	    [39;49;00mMEMMOVE(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mbeg[37m [39;49;00m+[37m [39;49;00mrlen,[37m [39;49;00mRARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mbeg[37m [39;49;00m+[37m [39;49;00mlen,[37m[39;49;00m$
  1342	[37m		    [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00m(beg[37m [39;49;00m+[37m [39;49;00mlen));[37m[39;49;00m$
  1343	[37m	    [39;49;00mRARRAY(ary)->len[37m [39;49;00m=[37m [39;49;00malen;[37m[39;49;00m$
  1344	[37m	[39;49;00m}[37m[39;49;00m$
  1345	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(rlen[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1346	[37m	    [39;49;00mMEMMOVE(RARRAY(ary)->ptr[37m [39;49;00m+[37m [39;49;00mbeg,[37m [39;49;00mRARRAY(rpl)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mrlen);[37m[39;49;00m$
  1347	[37m	[39;49;00m}[37m[39;49;00m$
  1348	[37m    [39;49;00m}[37m[39;49;00m$
  1349	}[37m[39;49;00m$
  1350	[37m[39;49;00m$
  1351	[37m/* [39;49;00m$
  1352	[37m *  call-seq:[39;49;00m$
  1353	[37m *     array[index]         = obj                     ->  obj[39;49;00m$
  1354	[37m *     array[start, length] = obj or an_array or nil  ->  obj or an_array or nil[39;49;00m$
  1355	[37m *     array[range]         = obj or an_array or nil  ->  obj or an_array or nil[39;49;00m$
  1356	[37m *[39;49;00m$
  1357	[37m *  Element Assignment---Sets the element at _index_,[39;49;00m$
  1358	[37m *  or replaces a subarray starting at _start_ and[39;49;00m$
  1359	[37m *  continuing for _length_ elements, or replaces a subarray[39;49;00m$
  1360	[37m *  specified by _range_.  If indices are greater than[39;49;00m$
  1361	[37m *  the current capacity of the array, the array grows[39;49;00m$
  1362	[37m *  automatically. A negative indices will count backward[39;49;00m$
  1363	[37m *  from the end of the array. Inserts elements if _length_ is[39;49;00m$
  1364	[37m *  zero. An +IndexError+ is raised if a negative index points[39;49;00m$
  1365	[37m *  past the beginning of the array. See also[39;49;00m$
  1366	[37m *  <code>Array#push</code>, and <code>Array#unshift</code>.[39;49;00m$
  1367	[37m * [39;49;00m$
  1368	[37m *     a = Array.new[39;49;00m$
  1369	[37m *     a[4] = "4";                 #=> [nil, nil, nil, nil, "4"][39;49;00m$
  1370	[37m *     a[0, 3] = [ 'a', 'b', 'c' ] #=> ["a", "b", "c", nil, "4"][39;49;00m$
  1371	[37m *     a[1..2] = [ 1, 2 ]          #=> ["a", 1, 2, nil, "4"][39;49;00m$
  1372	[37m *     a[0, 2] = "?"               #=> ["?", 2, nil, "4"][39;49;00m$
  1373	[37m *     a[0..2] = "A"               #=> ["A", "4"][39;49;00m$
  1374	[37m *     a[-1]   = "Z"               #=> ["A", "Z"][39;49;00m$
  1375	[37m *     a[1..-1] = nil              #=> ["A", nil][39;49;00m$
  1376	[37m *     a[1..-1] = []              #=> ["A"][39;49;00m$
  1377	[37m */[39;49;00m[37m[39;49;00m$
  1378	[37m[39;49;00m$
  1379	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1380	rb_ary_aset(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1381	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1382	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1383	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1384	{[37m[39;49;00m$
  1385	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00moffset,[37m [39;49;00mbeg,[37m [39;49;00mlen;[37m[39;49;00m$
  1386	[37m[39;49;00m$
  1387	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m3[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1388	[37m	[39;49;00mrb_ary_splice(ary,[37m [39;49;00mNUM2LONG(argv[[34m0[39;49;00m]),[37m [39;49;00mNUM2LONG(argv[[34m1[39;49;00m]),[37m [39;49;00margv[[34m2[39;49;00m]);[37m[39;49;00m$
  1389	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00margv[[34m2[39;49;00m];[37m[39;49;00m$
  1390	[37m    [39;49;00m}[37m[39;49;00m$
  1391	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m!=[37m [39;49;00m[34m2[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1392	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mwrong number of arguments (%d for 2)[39;49;00m[33m"[39;49;00m,[37m [39;49;00margc);[37m[39;49;00m$
  1393	[37m    [39;49;00m}[37m[39;49;00m$
  1394	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FIXNUM_P(argv[[34m0[39;49;00m]))[37m [39;49;00m{[37m[39;49;00m$
  1395	[37m	[39;49;00moffset[37m [39;49;00m=[37m [39;49;00mFIX2LONG(argv[[34m0[39;49;00m]);[37m[39;49;00m$
  1396	[37m	[39;49;00m[34mgoto[39;49;00m[37m [39;49;00mfixnum;[37m[39;49;00m$
  1397	[37m    [39;49;00m}[37m[39;49;00m$
  1398	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_range_beg_len(argv[[34m0[39;49;00m],[37m [39;49;00m&beg,[37m [39;49;00m&len,[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00m[34m1[39;49;00m))[37m [39;49;00m{[37m[39;49;00m$
  1399	[37m	[39;49;00m[37m/* check if idx is Range */[39;49;00m[37m[39;49;00m$
  1400	[37m	[39;49;00mrb_ary_splice(ary,[37m [39;49;00mbeg,[37m [39;49;00mlen,[37m [39;49;00margv[[34m1[39;49;00m]);[37m[39;49;00m$
  1401	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00margv[[34m1[39;49;00m];[37m[39;49;00m$
  1402	[37m    [39;49;00m}[37m[39;49;00m$
  1403	[37m[39;49;00m$
  1404	[37m    [39;49;00moffset[37m [39;49;00m=[37m [39;49;00mNUM2LONG(argv[[34m0[39;49;00m]);[37m[39;49;00m$
  1405	fixnum:[37m[39;49;00m$
  1406	[37m    [39;49;00mrb_ary_store(ary,[37m [39;49;00moffset,[37m [39;49;00margv[[34m1[39;49;00m]);[37m[39;49;00m$
  1407	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00margv[[34m1[39;49;00m];[37m[39;49;00m$
  1408	}[37m[39;49;00m$
  1409	[37m[39;49;00m$
  1410	[37m/*[39;49;00m$
  1411	[37m *  call-seq:[39;49;00m$
  1412	[37m *     array.insert(index, obj...)  -> array[39;49;00m$
  1413	[37m *  [39;49;00m$
  1414	[37m *  Inserts the given values before the element with the given index[39;49;00m$
  1415	[37m *  (which may be negative).[39;49;00m$
  1416	[37m *     [39;49;00m$
  1417	[37m *     a = %w{ a b c d }[39;49;00m$
  1418	[37m *     a.insert(2, 99)         #=> ["a", "b", 99, "c", "d"][39;49;00m$
  1419	[37m *     a.insert(-2, 1, 2, 3)   #=> ["a", "b", 99, "c", 1, 2, 3, "d"][39;49;00m$
  1420	[37m */[39;49;00m[37m[39;49;00m$
  1421	[37m[39;49;00m$
  1422	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1423	rb_ary_insert(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1424	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1425	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1426	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1427	{[37m[39;49;00m$
  1428	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mpos;[37m[39;49;00m$
  1429	[37m[39;49;00m$
  1430	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m<[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1431	[37m	[39;49;00mrb_raise(rb_eArgError,[37m [39;49;00m[33m"[39;49;00m[33mwrong number of arguments (at least 1)[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1432	[37m    [39;49;00m}[37m[39;49;00m$
  1433	[37m    [39;49;00mpos[37m [39;49;00m=[37m [39;49;00mNUM2LONG(argv[[34m0[39;49;00m]);[37m[39;49;00m$
  1434	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(pos[37m [39;49;00m==[37m [39;49;00m[34m-1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1435	[37m	[39;49;00mpos[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1436	[37m    [39;49;00m}[37m[39;49;00m$
  1437	[37m    [39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mif[39;49;00m[37m [39;49;00m(pos[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1438	[37m	[39;49;00mpos++;[37m[39;49;00m$
  1439	[37m    [39;49;00m}[37m[39;49;00m$
  1440	[37m[39;49;00m$
  1441	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(argc[37m [39;49;00m==[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1442	[37m    [39;49;00mrb_ary_splice(ary,[37m [39;49;00mpos,[37m [39;49;00m[34m0[39;49;00m,[37m [39;49;00mrb_ary_new4(argc[37m [39;49;00m-[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00margv[37m [39;49;00m+[37m [39;49;00m[34m1[39;49;00m));[37m[39;49;00m$
  1443	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1444	}[37m[39;49;00m$
  1445	[37m[39;49;00m$
  1446	[37m/*[39;49;00m$
  1447	[37m *  call-seq:[39;49;00m$
  1448	[37m *     array.each {|item| block }   ->   array[39;49;00m$
  1449	[37m *  [39;49;00m$
  1450	[37m *  Calls <i>block</i> once for each element in <i>self</i>, passing that[39;49;00m$
  1451	[37m *  element as a parameter.[39;49;00m$
  1452	[37m *     [39;49;00m$
  1453	[37m *     a = [ "a", "b", "c" ][39;49;00m$
  1454	[37m *     a.each {|x| print x, " -- " }[39;49;00m$
  1455	[37m *     [39;49;00m$
  1456	[37m *  produces:[39;49;00m$
  1457	[37m *     [39;49;00m$
  1458	[37m *     a -- b -- c --[39;49;00m$
  1459	[37m */[39;49;00m[37m[39;49;00m$
  1460	[37m[39;49;00m$
  1461	VALUE[37m[39;49;00m$
  1462	rb_ary_each(ary)[37m[39;49;00m$
  1463	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1464	{[37m[39;49;00m$
  1465	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1466	[37m[39;49;00m$
  1467	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1468	[37m	[39;49;00mrb_yield(RARRAY(ary)->ptr[i]);[37m[39;49;00m$
  1469	[37m    [39;49;00m}[37m[39;49;00m$
  1470	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1471	}[37m[39;49;00m$
  1472	[37m[39;49;00m$
  1473	[37m/*[39;49;00m$
  1474	[37m *  call-seq:[39;49;00m$
  1475	[37m *     array.each_index {|index| block }  ->  array[39;49;00m$
  1476	[37m *  [39;49;00m$
  1477	[37m *  Same as <code>Array#each</code>, but passes the index of the element[39;49;00m$
  1478	[37m *  instead of the element itself.[39;49;00m$
  1479	[37m *     [39;49;00m$
  1480	[37m *     a = [ "a", "b", "c" ][39;49;00m$
  1481	[37m *     a.each_index {|x| print x, " -- " }[39;49;00m$
  1482	[37m *     [39;49;00m$
  1483	[37m *  produces:[39;49;00m$
  1484	[37m *     [39;49;00m$
  1485	[37m *     0 -- 1 -- 2 --[39;49;00m$
  1486	[37m */[39;49;00m[37m[39;49;00m$
  1487	[37m[39;49;00m$
  1488	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1489	rb_ary_each_index(ary)[37m[39;49;00m$
  1490	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1491	{[37m[39;49;00m$
  1492	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1493	[37m[39;49;00m$
  1494	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1495	[37m	[39;49;00mrb_yield(LONG2NUM(i));[37m[39;49;00m$
  1496	[37m    [39;49;00m}[37m[39;49;00m$
  1497	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1498	}[37m[39;49;00m$
  1499	[37m[39;49;00m$
  1500	[37m/*[39;49;00m$
  1501	[37m *  call-seq:[39;49;00m$
  1502	[37m *     array.reverse_each {|item| block } [39;49;00m$
  1503	[37m *  [39;49;00m$
  1504	[37m *  Same as <code>Array#each</code>, but traverses <i>self</i> in reverse[39;49;00m$
  1505	[37m *  order.[39;49;00m$
  1506	[37m *     [39;49;00m$
  1507	[37m *     a = [ "a", "b", "c" ][39;49;00m$
  1508	[37m *     a.reverse_each {|x| print x, " " }[39;49;00m$
  1509	[37m *     [39;49;00m$
  1510	[37m *  produces:[39;49;00m$
  1511	[37m *     [39;49;00m$
  1512	[37m *     c b a[39;49;00m$
  1513	[37m */[39;49;00m[37m[39;49;00m$
  1514	[37m[39;49;00m$
  1515	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1516	rb_ary_reverse_each(ary)[37m[39;49;00m$
  1517	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1518	{[37m[39;49;00m$
  1519	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1520	[37m[39;49;00m$
  1521	[37m    [39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(len--)[37m [39;49;00m{[37m[39;49;00m$
  1522	[37m	[39;49;00mrb_yield(RARRAY(ary)->ptr[len]);[37m[39;49;00m$
  1523	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m<[37m [39;49;00mlen)[37m [39;49;00m{[37m[39;49;00m$
  1524	[37m	    [39;49;00mlen[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1525	[37m	[39;49;00m}[37m[39;49;00m$
  1526	[37m    [39;49;00m}[37m[39;49;00m$
  1527	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1528	}[37m[39;49;00m$
  1529	[37m[39;49;00m$
  1530	[37m/*[39;49;00m$
  1531	[37m *  call-seq:[39;49;00m$
  1532	[37m *     array.length -> int[39;49;00m$
  1533	[37m *  [39;49;00m$
  1534	[37m *  Returns the number of elements in <i>self</i>. May be zero.[39;49;00m$
  1535	[37m *     [39;49;00m$
  1536	[37m *     [ 1, 2, 3, 4, 5 ].length   #=> 5[39;49;00m$
  1537	[37m */[39;49;00m[37m[39;49;00m$
  1538	[37m[39;49;00m$
  1539	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1540	rb_ary_length(ary)[37m[39;49;00m$
  1541	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1542	{[37m[39;49;00m$
  1543	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mLONG2NUM(RARRAY(ary)->len);[37m[39;49;00m$
  1544	}[37m[39;49;00m$
  1545	[37m[39;49;00m$
  1546	[37m/*[39;49;00m$
  1547	[37m *  call-seq:[39;49;00m$
  1548	[37m *     array.empty?   -> true or false[39;49;00m$
  1549	[37m *  [39;49;00m$
  1550	[37m *  Returns <code>true</code> if <i>self</i> array contains no elements.[39;49;00m$
  1551	[37m *     [39;49;00m$
  1552	[37m *     [].empty?   #=> true[39;49;00m$
  1553	[37m */[39;49;00m[37m[39;49;00m$
  1554	[37m[39;49;00m$
  1555	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1556	rb_ary_empty_p(ary)[37m[39;49;00m$
  1557	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1558	{[37m[39;49;00m$
  1559	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m[39;49;00m$
  1560	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQtrue;[37m[39;49;00m$
  1561	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mQfalse;[37m[39;49;00m$
  1562	}[37m[39;49;00m$
  1563	[37m[39;49;00m$
  1564	VALUE[37m[39;49;00m$
  1565	rb_ary_dup(ary)[37m[39;49;00m$
  1566	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1567	{[37m[39;49;00m$
  1568	[37m    [39;49;00mVALUE[37m [39;49;00mdup[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(RARRAY(ary)->len);[37m[39;49;00m$
  1569	[37m[39;49;00m$
  1570	[37m    [39;49;00mDUPSETUP(dup,[37m [39;49;00mary);[37m[39;49;00m$
  1571	[37m    [39;49;00mMEMCPY(RARRAY(dup)->ptr,[37m [39;49;00mRARRAY(ary)->ptr,[37m [39;49;00mVALUE,[37m [39;49;00mRARRAY(ary)->len);[37m[39;49;00m$
  1572	[37m    [39;49;00mRARRAY(dup)->len[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1573	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mdup;[37m[39;49;00m$
  1574	}[37m[39;49;00m$
  1575	[37m[39;49;00m$
  1576	[34mextern[39;49;00m[37m [39;49;00mVALUE[37m [39;49;00mrb_output_fs;[37m[39;49;00m$
  1577	[37m[39;49;00m$
  1578	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1579	[32mrecursive_join[39;49;00m(ary,[37m [39;49;00marg,[37m [39;49;00mrecur)[37m[39;49;00m$
  1580	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1581	[37m    [39;49;00mVALUE[37m [39;49;00m*arg;[37m[39;49;00m$
  1582	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mrecur;[37m[39;49;00m$
  1583	{[37m[39;49;00m$
  1584	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(recur)[37m [39;49;00m{[37m[39;49;00m$
  1585	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_str_new2([33m"[39;49;00m[33m[...][39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1586	[37m    [39;49;00m}[37m[39;49;00m$
  1587	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_join(arg[[34m0[39;49;00m],[37m [39;49;00marg[[34m1[39;49;00m]);[37m[39;49;00m$
  1588	}[37m[39;49;00m$
  1589	[37m[39;49;00m$
  1590	VALUE[37m[39;49;00m$
  1591	rb_ary_join(ary,[37m [39;49;00msep)[37m[39;49;00m$
  1592	[37m    [39;49;00mVALUE[37m [39;49;00mary,[37m [39;49;00msep;[37m[39;49;00m$
  1593	{[37m[39;49;00m$
  1594	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00mi;[37m[39;49;00m$
  1595	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mtaint[37m [39;49;00m=[37m [39;49;00mQfalse;[37m[39;49;00m$
  1596	[37m    [39;49;00mVALUE[37m [39;49;00mresult,[37m [39;49;00mtmp;[37m[39;49;00m$
  1597	[37m[39;49;00m$
  1598	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_str_new([34m0[39;49;00m,[37m [39;49;00m[34m0[39;49;00m);[37m[39;49;00m$
  1599	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(OBJ_TAINTED(ary)[37m [39;49;00m||[37m [39;49;00mOBJ_TAINTED(sep))[37m [39;49;00mtaint[37m [39;49;00m=[37m [39;49;00mQtrue;[37m[39;49;00m$
  1600	[37m[39;49;00m$
  1601	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1602	[37m	[39;49;00mtmp[37m [39;49;00m=[37m [39;49;00mrb_check_string_type(RARRAY(ary)->ptr[i]);[37m[39;49;00m$
  1603	[37m	[39;49;00mlen[37m [39;49;00m+=[37m [39;49;00mNIL_P(tmp)[37m [39;49;00m?[37m [39;49;00m[34m10[39;49;00m[37m [39;49;00m:[37m [39;49;00mRSTRING(tmp)->len;[37m[39;49;00m$
  1604	[37m    [39;49;00m}[37m[39;49;00m$
  1605	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(!NIL_P(sep))[37m [39;49;00m{[37m[39;49;00m$
  1606	[37m	[39;49;00mStringValue(sep);[37m[39;49;00m$
  1607	[37m	[39;49;00mlen[37m [39;49;00m+=[37m [39;49;00mRSTRING(sep)->len[37m [39;49;00m*[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00m[34m1[39;49;00m);[37m[39;49;00m$
  1608	[37m    [39;49;00m}[37m[39;49;00m$
  1609	[37m    [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mrb_str_buf_new(len);[37m[39;49;00m$
  1610	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1611	[37m	[39;49;00mtmp[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr[i];[37m[39;49;00m$
  1612	[37m	[39;49;00m[34mswitch[39;49;00m[37m [39;49;00m(TYPE(tmp))[37m [39;49;00m{[37m[39;49;00m$
  1613	[37m	  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mT_STRING[39;49;00m:[37m[39;49;00m$
  1614	[37m	    [39;49;00m[34mbreak[39;49;00m;[37m[39;49;00m$
  1615	[37m	  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mT_ARRAY[39;49;00m:[37m[39;49;00m$
  1616	[37m	    [39;49;00m{[37m[39;49;00m$
  1617	[37m		[39;49;00mVALUE[37m [39;49;00margs[[34m2[39;49;00m];[37m[39;49;00m$
  1618	[37m[39;49;00m$
  1619	[37m		[39;49;00margs[[34m0[39;49;00m][37m [39;49;00m=[37m [39;49;00mtmp;[37m[39;49;00m$
  1620	[37m		[39;49;00margs[[34m1[39;49;00m][37m [39;49;00m=[37m [39;49;00msep;[37m[39;49;00m$
  1621	[37m		[39;49;00mtmp[37m [39;49;00m=[37m [39;49;00mrb_exec_recursive(recursive_join,[37m [39;49;00mary,[37m [39;49;00m(VALUE)args);[37m[39;49;00m$
  1622	[37m	    [39;49;00m}[37m[39;49;00m$
  1623	[37m	    [39;49;00m[34mbreak[39;49;00m;[37m[39;49;00m$
  1624	[37m	  [39;49;00m[34mdefault[39;49;00m:[37m[39;49;00m$
  1625	[37m	    [39;49;00mtmp[37m [39;49;00m=[37m [39;49;00mrb_obj_as_string(tmp);[37m[39;49;00m$
  1626	[37m	[39;49;00m}[37m[39;49;00m$
  1627	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(i[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m&&[37m [39;49;00m!NIL_P(sep))[37m[39;49;00m$
  1628	[37m	    [39;49;00mrb_str_buf_append(result,[37m [39;49;00msep);[37m[39;49;00m$
  1629	[37m	[39;49;00mrb_str_buf_append(result,[37m [39;49;00mtmp);[37m[39;49;00m$
  1630	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(OBJ_TAINTED(tmp))[37m [39;49;00mtaint[37m [39;49;00m=[37m [39;49;00mQtrue;[37m[39;49;00m$
  1631	[37m    [39;49;00m}[37m[39;49;00m$
  1632	[37m[39;49;00m$
  1633	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(taint)[37m [39;49;00mOBJ_TAINT(result);[37m[39;49;00m$
  1634	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
  1635	}[37m[39;49;00m$
  1636	[37m[39;49;00m$
  1637	[37m/*[39;49;00m$
  1638	[37m *  call-seq:[39;49;00m$
  1639	[37m *     array.join(sep=$,)    -> str[39;49;00m$
  1640	[37m *  [39;49;00m$
  1641	[37m *  Returns a string created by converting each element of the array to[39;49;00m$
  1642	[37m *  a string, separated by <i>sep</i>.[39;49;00m$
  1643	[37m *     [39;49;00m$
  1644	[37m *     [ "a", "b", "c" ].join        #=> "abc"[39;49;00m$
  1645	[37m *     [ "a", "b", "c" ].join("-")   #=> "a-b-c"[39;49;00m$
  1646	[37m */[39;49;00m[37m[39;49;00m$
  1647	[37m[39;49;00m$
  1648	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1649	rb_ary_join_m(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  1650	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  1651	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  1652	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1653	{[37m[39;49;00m$
  1654	[37m    [39;49;00mVALUE[37m [39;49;00msep;[37m[39;49;00m$
  1655	[37m[39;49;00m$
  1656	[37m    [39;49;00mrb_scan_args(argc,[37m [39;49;00margv,[37m [39;49;00m[33m"[39;49;00m[33m01[39;49;00m[33m"[39;49;00m,[37m [39;49;00m&sep);[37m[39;49;00m$
  1657	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(NIL_P(sep))[37m [39;49;00msep[37m [39;49;00m=[37m [39;49;00mrb_output_fs;[37m[39;49;00m$
  1658	[37m    [39;49;00m[37m[39;49;00m$
  1659	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_join(ary,[37m [39;49;00msep);[37m[39;49;00m$
  1660	}[37m[39;49;00m$
  1661	[37m[39;49;00m$
  1662	[37m/*[39;49;00m$
  1663	[37m *  call-seq:[39;49;00m$
  1664	[37m *     array.to_s -> string[39;49;00m$
  1665	[37m *  [39;49;00m$
  1666	[37m *  Returns _self_<code>.join</code>.[39;49;00m$
  1667	[37m *     [39;49;00m$
  1668	[37m *     [ "a", "e", "i", "o" ].to_s   #=> "aeio"[39;49;00m$
  1669	[37m *[39;49;00m$
  1670	[37m */[39;49;00m[37m[39;49;00m$
  1671	[37m[39;49;00m$
  1672	VALUE[37m[39;49;00m$
  1673	rb_ary_to_s(ary)[37m[39;49;00m$
  1674	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1675	{[37m[39;49;00m$
  1676	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_str_new([34m0[39;49;00m,[37m [39;49;00m[34m0[39;49;00m);[37m[39;49;00m$
  1677	[37m    [39;49;00m[37m[39;49;00m$
  1678	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_join(ary,[37m [39;49;00mrb_output_fs);[37m[39;49;00m$
  1679	}[37m[39;49;00m$
  1680	[37m[39;49;00m$
  1681	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1682	inspect_ary(ary,[37m [39;49;00mdummy,[37m [39;49;00mrecur)[37m[39;49;00m$
  1683	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1684	[37m    [39;49;00mVALUE[37m [39;49;00mdummy;[37m[39;49;00m$
  1685	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mrecur;[37m[39;49;00m$
  1686	{[37m[39;49;00m$
  1687	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mtainted[37m [39;49;00m=[37m [39;49;00mOBJ_TAINTED(ary);[37m[39;49;00m$
  1688	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1689	[37m    [39;49;00mVALUE[37m [39;49;00ms,[37m [39;49;00mstr;[37m[39;49;00m$
  1690	[37m[39;49;00m$
  1691	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(recur)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_tainted_str_new2([33m"[39;49;00m[33m[...][39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1692	[37m    [39;49;00mstr[37m [39;49;00m=[37m [39;49;00mrb_str_buf_new2([33m"[39;49;00m[33m[[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1693	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<RARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1694	[37m	[39;49;00ms[37m [39;49;00m=[37m [39;49;00mrb_inspect(RARRAY(ary)->ptr[i]);[37m[39;49;00m$
  1695	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(OBJ_TAINTED(s))[37m [39;49;00mtainted[37m [39;49;00m=[37m [39;49;00mQtrue;[37m[39;49;00m$
  1696	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(i[37m [39;49;00m>[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00mrb_str_buf_cat2(str,[37m [39;49;00m[33m"[39;49;00m[33m, [39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1697	[37m	[39;49;00mrb_str_buf_append(str,[37m [39;49;00ms);[37m[39;49;00m$
  1698	[37m    [39;49;00m}[37m[39;49;00m$
  1699	[37m    [39;49;00mrb_str_buf_cat2(str,[37m [39;49;00m[33m"[39;49;00m[33m][39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1700	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(tainted)[37m [39;49;00mOBJ_TAINT(str);[37m[39;49;00m$
  1701	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mstr;[37m[39;49;00m$
  1702	}[37m[39;49;00m$
  1703	[37m[39;49;00m$
  1704	[37m/*[39;49;00m$
  1705	[37m *  call-seq:[39;49;00m$
  1706	[37m *     array.inspect  -> string[39;49;00m$
  1707	[37m *[39;49;00m$
  1708	[37m *  Create a printable version of <i>array</i>.[39;49;00m$
  1709	[37m */[39;49;00m[37m[39;49;00m$
  1710	[37m[39;49;00m$
  1711	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1712	rb_ary_inspect(ary)[37m[39;49;00m$
  1713	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1714	{[37m[39;49;00m$
  1715	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m==[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_str_new2([33m"[39;49;00m[33m[][39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1716	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_exec_recursive(inspect_ary,[37m [39;49;00mary,[37m [39;49;00m[34m0[39;49;00m);[37m[39;49;00m$
  1717	}[37m[39;49;00m$
  1718	[37m[39;49;00m$
  1719	[37m/*[39;49;00m$
  1720	[37m *  call-seq:[39;49;00m$
  1721	[37m *     array.to_a     -> array[39;49;00m$
  1722	[37m *  [39;49;00m$
  1723	[37m *  Returns _self_. If called on a subclass of Array, converts[39;49;00m$
  1724	[37m *  the receiver to an Array object.[39;49;00m$
  1725	[37m */[39;49;00m[37m[39;49;00m$
  1726	[37m[39;49;00m$
  1727	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1728	rb_ary_to_a(ary)[37m[39;49;00m$
  1729	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1730	{[37m[39;49;00m$
  1731	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(rb_obj_class(ary)[37m [39;49;00m!=[37m [39;49;00mrb_cArray)[37m [39;49;00m{[37m[39;49;00m$
  1732	[37m	[39;49;00mVALUE[37m [39;49;00mdup[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(RARRAY(ary)->len);[37m[39;49;00m$
  1733	[37m	[39;49;00mrb_ary_replace(dup,[37m [39;49;00mary);[37m[39;49;00m$
  1734	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mdup;[37m[39;49;00m$
  1735	[37m    [39;49;00m}[37m[39;49;00m$
  1736	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1737	}[37m[39;49;00m$
  1738	[37m[39;49;00m$
  1739	[37m/*[39;49;00m$
  1740	[37m *  call-seq:[39;49;00m$
  1741	[37m *     array.to_ary -> array[39;49;00m$
  1742	[37m *  [39;49;00m$
  1743	[37m *  Returns _self_.[39;49;00m$
  1744	[37m */[39;49;00m[37m[39;49;00m$
  1745	[37m[39;49;00m$
  1746	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1747	rb_ary_to_ary_m(ary)[37m[39;49;00m$
  1748	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1749	{[37m[39;49;00m$
  1750	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1751	}[37m[39;49;00m$
  1752	[37m[39;49;00m$
  1753	VALUE[37m[39;49;00m$
  1754	rb_ary_reverse(ary)[37m[39;49;00m$
  1755	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1756	{[37m[39;49;00m$
  1757	[37m    [39;49;00mVALUE[37m [39;49;00m*p1,[37m [39;49;00m*p2;[37m[39;49;00m$
  1758	[37m    [39;49;00mVALUE[37m [39;49;00mtmp;[37m[39;49;00m$
  1759	[37m[39;49;00m$
  1760	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
  1761	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m>[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1762	[37m	[39;49;00mp1[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr;[37m[39;49;00m$
  1763	[37m	[39;49;00mp2[37m [39;49;00m=[37m [39;49;00mp1[37m [39;49;00m+[37m [39;49;00mRARRAY(ary)->len[37m [39;49;00m-[37m [39;49;00m[34m1[39;49;00m;[37m	[39;49;00m[37m/* points last item */[39;49;00m[37m[39;49;00m$
  1764	[37m[39;49;00m$
  1765	[37m	[39;49;00m[34mwhile[39;49;00m[37m [39;49;00m(p1[37m [39;49;00m<[37m [39;49;00mp2)[37m [39;49;00m{[37m[39;49;00m$
  1766	[37m	    [39;49;00mtmp[37m [39;49;00m=[37m [39;49;00m*p1;[37m[39;49;00m$
  1767	[37m	    [39;49;00m*p1++[37m [39;49;00m=[37m [39;49;00m*p2;[37m[39;49;00m$
  1768	[37m	    [39;49;00m*p2--[37m [39;49;00m=[37m [39;49;00mtmp;[37m[39;49;00m$
  1769	[37m	[39;49;00m}[37m[39;49;00m$
  1770	[37m    [39;49;00m}[37m[39;49;00m$
  1771	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1772	}[37m[39;49;00m$
  1773	[37m[39;49;00m$
  1774	[37m/*[39;49;00m$
  1775	[37m *  call-seq:[39;49;00m$
  1776	[37m *     array.reverse!   -> array [39;49;00m$
  1777	[37m *  [39;49;00m$
  1778	[37m *  Reverses _self_ in place.[39;49;00m$
  1779	[37m *     [39;49;00m$
  1780	[37m *     a = [ "a", "b", "c" ][39;49;00m$
  1781	[37m *     a.reverse!       #=> ["c", "b", "a"][39;49;00m$
  1782	[37m *     a                #=> ["c", "b", "a"][39;49;00m$
  1783	[37m */[39;49;00m[37m[39;49;00m$
  1784	[37m[39;49;00m$
  1785	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1786	rb_ary_reverse_bang(ary)[37m[39;49;00m$
  1787	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1788	{[37m[39;49;00m$
  1789	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_reverse(ary);[37m[39;49;00m$
  1790	}[37m[39;49;00m$
  1791	[37m[39;49;00m$
  1792	[37m/*[39;49;00m$
  1793	[37m *  call-seq:[39;49;00m$
  1794	[37m *     array.reverse -> an_array[39;49;00m$
  1795	[37m *  [39;49;00m$
  1796	[37m *  Returns a new array containing <i>self</i>'s elements in reverse order.[39;49;00m$
  1797	[37m *     [39;49;00m$
  1798	[37m *     [ "a", "b", "c" ].reverse   #=> ["c", "b", "a"][39;49;00m$
  1799	[37m *     [ 1 ].reverse               #=> [1][39;49;00m$
  1800	[37m */[39;49;00m[37m[39;49;00m$
  1801	[37m[39;49;00m$
  1802	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1803	rb_ary_reverse_m(ary)[37m[39;49;00m$
  1804	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1805	{[37m[39;49;00m$
  1806	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_reverse(rb_ary_dup(ary));[37m[39;49;00m$
  1807	}[37m[39;49;00m$
  1808	[37m[39;49;00m$
  1809	[34mstruct[39;49;00m[37m [39;49;00m[04m[32mary_sort_data[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
  1810	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1811	[37m    [39;49;00mVALUE[37m [39;49;00m*ptr;[37m[39;49;00m$
  1812	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mlen;[37m[39;49;00m$
  1813	};[37m[39;49;00m$
  1814	[37m[39;49;00m$
  1815	[34mstatic[39;49;00m[37m [39;49;00m[36mvoid[39;49;00m[37m[39;49;00m$
  1816	[32mary_sort_check[39;49;00m(data)[37m[39;49;00m$
  1817	[37m    [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mary_sort_data[39;49;00m[37m [39;49;00m*data;[37m[39;49;00m$
  1818	{[37m[39;49;00m$
  1819	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(data->ary)->ptr[37m [39;49;00m!=[37m [39;49;00mdata->ptr[37m [39;49;00m||[37m [39;49;00mRARRAY(data->ary)->len[37m [39;49;00m!=[37m [39;49;00mdata->len)[37m [39;49;00m{[37m[39;49;00m$
  1820	[37m	[39;49;00mrb_raise(rb_eRuntimeError,[37m [39;49;00m[33m"[39;49;00m[33marray modified during sort[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
  1821	[37m    [39;49;00m}[37m[39;49;00m$
  1822	}[37m[39;49;00m$
  1823	[37m[39;49;00m$
  1824	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m[39;49;00m$
  1825	sort_1(a,[37m [39;49;00mb,[37m [39;49;00mdata)[37m[39;49;00m$
  1826	[37m    [39;49;00mVALUE[37m [39;49;00m*a,[37m [39;49;00m*b;[37m[39;49;00m$
  1827	[37m    [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mary_sort_data[39;49;00m[37m [39;49;00m*data;[37m[39;49;00m$
  1828	{[37m[39;49;00m$
  1829	[37m    [39;49;00mVALUE[37m [39;49;00mretval[37m [39;49;00m=[37m [39;49;00mrb_yield_values([34m2[39;49;00m,[37m [39;49;00m*a,[37m [39;49;00m*b);[37m[39;49;00m$
  1830	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
  1831	[37m[39;49;00m$
  1832	[37m    [39;49;00mn[37m [39;49;00m=[37m [39;49;00mrb_cmpint(retval,[37m [39;49;00m*a,[37m [39;49;00m*b);[37m[39;49;00m$
  1833	[37m    [39;49;00mary_sort_check(data);[37m[39;49;00m$
  1834	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
  1835	}[37m[39;49;00m$
  1836	[37m[39;49;00m$
  1837	[34mstatic[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m[39;49;00m$
  1838	sort_2(ap,[37m [39;49;00mbp,[37m [39;49;00mdata)[37m[39;49;00m$
  1839	[37m    [39;49;00mVALUE[37m [39;49;00m*ap,[37m [39;49;00m*bp;[37m[39;49;00m$
  1840	[37m    [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mary_sort_data[39;49;00m[37m [39;49;00m*data;[37m[39;49;00m$
  1841	{[37m[39;49;00m$
  1842	[37m    [39;49;00mVALUE[37m [39;49;00mretval;[37m[39;49;00m$
  1843	[37m    [39;49;00mVALUE[37m [39;49;00ma[37m [39;49;00m=[37m [39;49;00m*ap,[37m [39;49;00mb[37m [39;49;00m=[37m [39;49;00m*bp;[37m[39;49;00m$
  1844	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
  1845	[37m[39;49;00m$
  1846	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(FIXNUM_P(a)[37m [39;49;00m&&[37m [39;49;00mFIXNUM_P(b))[37m [39;49;00m{[37m[39;49;00m$
  1847	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(([36mlong[39;49;00m)a[37m [39;49;00m>[37m [39;49;00m([36mlong[39;49;00m)b)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
  1848	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(([36mlong[39;49;00m)a[37m [39;49;00m<[37m [39;49;00m([36mlong[39;49;00m)b)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m-1[39;49;00m;[37m[39;49;00m$
  1849	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
  1850	[37m    [39;49;00m}[37m[39;49;00m$
  1851	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(TYPE(a)[37m [39;49;00m==[37m [39;49;00mT_STRING[37m [39;49;00m&&[37m [39;49;00mTYPE(b)[37m [39;49;00m==[37m [39;49;00mT_STRING)[37m [39;49;00m{[37m[39;49;00m$
  1852	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_str_cmp(a,[37m [39;49;00mb);[37m[39;49;00m$
  1853	[37m    [39;49;00m}[37m[39;49;00m$
  1854	[37m[39;49;00m$
  1855	[37m    [39;49;00mretval[37m [39;49;00m=[37m [39;49;00mrb_funcall(a,[37m [39;49;00mid_cmp,[37m [39;49;00m[34m1[39;49;00m,[37m [39;49;00mb);[37m[39;49;00m$
  1856	[37m    [39;49;00mn[37m [39;49;00m=[37m [39;49;00mrb_cmpint(retval,[37m [39;49;00ma,[37m [39;49;00mb);[37m[39;49;00m$
  1857	[37m    [39;49;00mary_sort_check(data);[37m[39;49;00m$
  1858	[37m[39;49;00m$
  1859	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mn;[37m[39;49;00m$
  1860	}[37m[39;49;00m$
  1861	[37m[39;49;00m$
  1862	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1863	sort_internal(ary)[37m[39;49;00m$
  1864	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1865	{[37m[39;49;00m$
  1866	[37m    [39;49;00m[34mstruct[39;49;00m[37m [39;49;00m[04m[32mary_sort_data[39;49;00m[37m [39;49;00mdata;[37m[39;49;00m$
  1867	[37m[39;49;00m$
  1868	[37m    [39;49;00mdata.ary[37m [39;49;00m=[37m [39;49;00mary;[37m[39;49;00m$
  1869	[37m    [39;49;00mdata.ptr[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->ptr;[37m [39;49;00mdata.len[37m [39;49;00m=[37m [39;49;00mRARRAY(ary)->len;[37m[39;49;00m$
  1870	[37m    [39;49;00mqsort(RARRAY(ary)->ptr,[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00m[34msizeof[39;49;00m(VALUE),[37m[39;49;00m$
  1871	[37m	  [39;49;00mrb_block_given_p()?sort_1:sort_2,[37m [39;49;00m&data);[37m[39;49;00m$
  1872	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1873	}[37m[39;49;00m$
  1874	[37m[39;49;00m$
  1875	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1876	sort_unlock(ary)[37m[39;49;00m$
  1877	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1878	{[37m[39;49;00m$
  1879	[37m    [39;49;00mFL_UNSET(ary,[37m [39;49;00mARY_TMPLOCK);[37m[39;49;00m$
  1880	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1881	}[37m[39;49;00m$
  1882	[37m[39;49;00m$
  1883	[37m/*[39;49;00m$
  1884	[37m *  call-seq:[39;49;00m$
  1885	[37m *     array.sort!                   -> array[39;49;00m$
  1886	[37m *     array.sort! {| a,b | block }  -> array [39;49;00m$
  1887	[37m *  [39;49;00m$
  1888	[37m *  Sorts _self_. Comparisons for[39;49;00m$
  1889	[37m *  the sort will be done using the <code><=></code> operator or using[39;49;00m$
  1890	[37m *  an optional code block. The block implements a comparison between[39;49;00m$
  1891	[37m *  <i>a</i> and <i>b</i>, returning -1, 0, or +1. See also[39;49;00m$
  1892	[37m *  <code>Enumerable#sort_by</code>.[39;49;00m$
  1893	[37m *     [39;49;00m$
  1894	[37m *     a = [ "d", "a", "e", "c", "b" ][39;49;00m$
  1895	[37m *     a.sort                    #=> ["a", "b", "c", "d", "e"][39;49;00m$
  1896	[37m *     a.sort {|x,y| y <=> x }   #=> ["e", "d", "c", "b", "a"][39;49;00m$
  1897	[37m */[39;49;00m[37m[39;49;00m$
  1898	[37m[39;49;00m$
  1899	VALUE[37m[39;49;00m$
  1900	rb_ary_sort_bang(ary)[37m[39;49;00m$
  1901	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1902	{[37m[39;49;00m$
  1903	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
  1904	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(RARRAY(ary)->len[37m [39;49;00m>[37m [39;49;00m[34m1[39;49;00m)[37m [39;49;00m{[37m[39;49;00m$
  1905	[37m	[39;49;00mFL_SET(ary,[37m [39;49;00mARY_TMPLOCK);[37m	[39;49;00m[37m/* prohibit modification during sort */[39;49;00m[37m[39;49;00m$
  1906	[37m	[39;49;00mrb_ensure(sort_internal,[37m [39;49;00mary,[37m [39;49;00msort_unlock,[37m [39;49;00mary);[37m[39;49;00m$
  1907	[37m    [39;49;00m}[37m[39;49;00m$
  1908	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1909	}[37m[39;49;00m$
  1910	[37m[39;49;00m$
  1911	[37m/*[39;49;00m$
  1912	[37m *  call-seq:[39;49;00m$
  1913	[37m *     array.sort                   -> an_array [39;49;00m$
  1914	[37m *     array.sort {| a,b | block }  -> an_array [39;49;00m$
  1915	[37m *  [39;49;00m$
  1916	[37m *  Returns a new array created by sorting <i>self</i>. Comparisons for[39;49;00m$
  1917	[37m *  the sort will be done using the <code><=></code> operator or using[39;49;00m$
  1918	[37m *  an optional code block. The block implements a comparison between[39;49;00m$
  1919	[37m *  <i>a</i> and <i>b</i>, returning -1, 0, or +1. See also[39;49;00m$
  1920	[37m *  <code>Enumerable#sort_by</code>.[39;49;00m$
  1921	[37m *     [39;49;00m$
  1922	[37m *     a = [ "d", "a", "e", "c", "b" ][39;49;00m$
  1923	[37m *     a.sort                    #=> ["a", "b", "c", "d", "e"][39;49;00m$
  1924	[37m *     a.sort {|x,y| y <=> x }   #=> ["e", "d", "c", "b", "a"][39;49;00m$
  1925	[37m */[39;49;00m[37m[39;49;00m$
  1926	[37m[39;49;00m$
  1927	VALUE[37m[39;49;00m$
  1928	rb_ary_sort(ary)[37m[39;49;00m$
  1929	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1930	{[37m[39;49;00m$
  1931	[37m    [39;49;00mary[37m [39;49;00m=[37m [39;49;00mrb_ary_dup(ary);[37m[39;49;00m$
  1932	[37m    [39;49;00mrb_ary_sort_bang(ary);[37m[39;49;00m$
  1933	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1934	}[37m[39;49;00m$
  1935	[37m[39;49;00m$
  1936	[37m/*[39;49;00m$
  1937	[37m *  call-seq:[39;49;00m$
  1938	[37m *     array.collect {|item| block }  -> an_array[39;49;00m$
  1939	[37m *     array.map     {|item| block }  -> an_array[39;49;00m$
  1940	[37m *  [39;49;00m$
  1941	[37m *  Invokes <i>block</i> once for each element of <i>self</i>. Creates a [39;49;00m$
  1942	[37m *  new array containing the values returned by the block.[39;49;00m$
  1943	[37m *  See also <code>Enumerable#collect</code>.[39;49;00m$
  1944	[37m *     [39;49;00m$
  1945	[37m *     a = [ "a", "b", "c", "d" ][39;49;00m$
  1946	[37m *     a.collect {|x| x + "!" }   #=> ["a!", "b!", "c!", "d!"][39;49;00m$
  1947	[37m *     a                          #=> ["a", "b", "c", "d"][39;49;00m$
  1948	[37m */[39;49;00m[37m[39;49;00m$
  1949	[37m[39;49;00m$
  1950	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1951	rb_ary_collect(ary)[37m[39;49;00m$
  1952	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1953	{[37m[39;49;00m$
  1954	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1955	[37m    [39;49;00mVALUE[37m [39;49;00mcollect;[37m[39;49;00m$
  1956	[37m[39;49;00m$
  1957	[37m    [39;49;00m[34mif[39;49;00m[37m [39;49;00m(!rb_block_given_p())[37m [39;49;00m{[37m[39;49;00m$
  1958	[37m	[39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_ary_new4(RARRAY(ary)->len,[37m [39;49;00mRARRAY(ary)->ptr);[37m[39;49;00m$
  1959	[37m    [39;49;00m}[37m[39;49;00m$
  1960	[37m[39;49;00m$
  1961	[37m    [39;49;00mcollect[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(RARRAY(ary)->len);[37m[39;49;00m$
  1962	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00mi[37m [39;49;00m<[37m [39;49;00mRARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1963	[37m	[39;49;00mrb_ary_push(collect,[37m [39;49;00mrb_yield(RARRAY(ary)->ptr[i]));[37m[39;49;00m$
  1964	[37m    [39;49;00m}[37m[39;49;00m$
  1965	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mcollect;[37m[39;49;00m$
  1966	}[37m[39;49;00m$
  1967	[37m[39;49;00m$
  1968	[37m/* [39;49;00m$
  1969	[37m *  call-seq:[39;49;00m$
  1970	[37m *     array.collect! {|item| block }   ->   array[39;49;00m$
  1971	[37m *     array.map!     {|item| block }   ->   array[39;49;00m$
  1972	[37m *[39;49;00m$
  1973	[37m *  Invokes the block once for each element of _self_, replacing the[39;49;00m$
  1974	[37m *  element with the value returned by _block_.[39;49;00m$
  1975	[37m *  See also <code>Enumerable#collect</code>.[39;49;00m$
  1976	[37m *   [39;49;00m$
  1977	[37m *     a = [ "a", "b", "c", "d" ][39;49;00m$
  1978	[37m *     a.collect! {|x| x + "!" }[39;49;00m$
  1979	[37m *     a             #=>  [ "a!", "b!", "c!", "d!" ][39;49;00m$
  1980	[37m */[39;49;00m[37m[39;49;00m$
  1981	[37m[39;49;00m$
  1982	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  1983	rb_ary_collect_bang(ary)[37m[39;49;00m$
  1984	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  1985	{[37m[39;49;00m$
  1986	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  1987	[37m[39;49;00m$
  1988	[37m    [39;49;00mrb_ary_modify(ary);[37m[39;49;00m$
  1989	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00mi[37m [39;49;00m<[37m [39;49;00mRARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  1990	[37m	[39;49;00mrb_ary_store(ary,[37m [39;49;00mi,[37m [39;49;00mrb_yield(RARRAY(ary)->ptr[i]));[37m[39;49;00m$
  1991	[37m    [39;49;00m}[37m[39;49;00m$
  1992	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mary;[37m[39;49;00m$
  1993	}[37m[39;49;00m$
  1994	[37m[39;49;00m$
  1995	VALUE[37m[39;49;00m$
  1996	rb_get_values_at(obj,[37m [39;49;00molen,[37m [39;49;00margc,[37m [39;49;00margv,[37m [39;49;00mfunc)[37m[39;49;00m$
  1997	[37m    [39;49;00mVALUE[37m [39;49;00mobj;[37m[39;49;00m$
  1998	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00molen;[37m[39;49;00m$
  1999	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  2000	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  2001	[37m    [39;49;00mVALUE[37m [39;49;00m(*func)[37m [39;49;00m_((VALUE,[36mlong[39;49;00m));[37m[39;49;00m$
  2002	{[37m[39;49;00m$
  2003	[37m    [39;49;00mVALUE[37m [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(argc);[37m[39;49;00m$
  2004	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mbeg,[37m [39;49;00mlen,[37m [39;49;00mi,[37m [39;49;00mj;[37m[39;49;00m$
  2005	[37m[39;49;00m$
  2006	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i=[34m0[39;49;00m;[37m [39;49;00mi<argc;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  2007	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(FIXNUM_P(argv[i]))[37m [39;49;00m{[37m[39;49;00m$
  2008	[37m	    [39;49;00mrb_ary_push(result,[37m [39;49;00m(*func)(obj,[37m [39;49;00mFIX2LONG(argv[i])));[37m[39;49;00m$
  2009	[37m	    [39;49;00m[34mcontinue[39;49;00m;[37m[39;49;00m$
  2010	[37m	[39;49;00m}[37m[39;49;00m$
  2011	[37m	[39;49;00m[37m/* check if idx is Range */[39;49;00m[37m[39;49;00m$
  2012	[37m	[39;49;00m[34mswitch[39;49;00m[37m [39;49;00m(rb_range_beg_len(argv[i],[37m [39;49;00m&beg,[37m [39;49;00m&len,[37m [39;49;00molen,[37m [39;49;00m[34m0[39;49;00m))[37m [39;49;00m{[37m[39;49;00m$
  2013	[37m	  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mQfalse[39;49;00m:[37m[39;49;00m$
  2014	[37m	    [39;49;00m[34mbreak[39;49;00m;[37m[39;49;00m$
  2015	[37m	  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[31mQnil[39;49;00m:[37m[39;49;00m$
  2016	[37m	    [39;49;00m[34mcontinue[39;49;00m;[37m[39;49;00m$
  2017	[37m	  [39;49;00m[34mdefault[39;49;00m:[37m[39;49;00m$
  2018	[37m	    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(j=[34m0[39;49;00m;[37m [39;49;00mj<len;[37m [39;49;00mj++)[37m [39;49;00m{[37m[39;49;00m$
  2019	[37m		[39;49;00mrb_ary_push(result,[37m [39;49;00m(*func)(obj,[37m [39;49;00mj+beg));[37m[39;49;00m$
  2020	[37m	    [39;49;00m}[37m[39;49;00m$
  2021	[37m	    [39;49;00m[34mcontinue[39;49;00m;[37m[39;49;00m$
  2022	[37m	[39;49;00m}[37m[39;49;00m$
  2023	[37m	[39;49;00mrb_ary_push(result,[37m [39;49;00m(*func)(obj,[37m [39;49;00mNUM2LONG(argv[i])));[37m[39;49;00m$
  2024	[37m    [39;49;00m}[37m[39;49;00m$
  2025	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
  2026	}[37m[39;49;00m$
  2027	[37m[39;49;00m$
  2028	[37m/* [39;49;00m$
  2029	[37m *  call-seq:[39;49;00m$
  2030	[37m *     array.values_at(selector,... )  -> an_array[39;49;00m$
  2031	[37m *[39;49;00m$
  2032	[37m *  Returns an array containing the elements in[39;49;00m$
  2033	[37m *  _self_ corresponding to the given selector(s). The selectors[39;49;00m$
  2034	[37m *  may be either integer indices or ranges. [39;49;00m$
  2035	[37m *  See also <code>Array#select</code>.[39;49;00m$
  2036	[37m * [39;49;00m$
  2037	[37m *     a = %w{ a b c d e f }[39;49;00m$
  2038	[37m *     a.values_at(1, 3, 5)[39;49;00m$
  2039	[37m *     a.values_at(1, 3, 5, 7)[39;49;00m$
  2040	[37m *     a.values_at(-1, -3, -5, -7)[39;49;00m$
  2041	[37m *     a.values_at(1..3, 2...5)[39;49;00m$
  2042	[37m */[39;49;00m[37m[39;49;00m$
  2043	[37m[39;49;00m$
  2044	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  2045	rb_ary_values_at(argc,[37m [39;49;00margv,[37m [39;49;00mary)[37m[39;49;00m$
  2046	[37m    [39;49;00m[36mint[39;49;00m[37m [39;49;00margc;[37m[39;49;00m$
  2047	[37m    [39;49;00mVALUE[37m [39;49;00m*argv;[37m[39;49;00m$
  2048	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  2049	{[37m[39;49;00m$
  2050	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mrb_get_values_at(ary,[37m [39;49;00mRARRAY(ary)->len,[37m [39;49;00margc,[37m [39;49;00margv,[37m [39;49;00mrb_ary_entry);[37m[39;49;00m$
  2051	}[37m[39;49;00m$
  2052	[37m[39;49;00m$
  2053	[37m/*[39;49;00m$
  2054	[37m *  call-seq:[39;49;00m$
  2055	[37m *     array.select {|item| block } -> an_array[39;49;00m$
  2056	[37m *  [39;49;00m$
  2057	[37m *  Invokes the block passing in successive elements from <i>array</i>,[39;49;00m$
  2058	[37m *  returning an array containing those elements for which the block[39;49;00m$
  2059	[37m *  returns a true value (equivalent to <code>Enumerable#select</code>).[39;49;00m$
  2060	[37m *     [39;49;00m$
  2061	[37m *     a = %w{ a b c d e f }[39;49;00m$
  2062	[37m *     a.select {|v| v =~ /[aeiou]/}   #=> ["a", "e"][39;49;00m$
  2063	[37m */[39;49;00m[37m[39;49;00m$
  2064	[37m[39;49;00m$
  2065	[34mstatic[39;49;00m[37m [39;49;00mVALUE[37m[39;49;00m$
  2066	rb_ary_select(ary)[37m[39;49;00m$
  2067	[37m    [39;49;00mVALUE[37m [39;49;00mary;[37m[39;49;00m$
  2068	{[37m[39;49;00m$
  2069	[37m    [39;49;00mVALUE[37m [39;49;00mresult;[37m[39;49;00m$
  2070	[37m    [39;49;00m[36mlong[39;49;00m[37m [39;49;00mi;[37m[39;49;00m$
  2071	[37m[39;49;00m$
  2072	[37m    [39;49;00mresult[37m [39;49;00m=[37m [39;49;00mrb_ary_new2(RARRAY(ary)->len);[37m[39;49;00m$
  2073	[37m    [39;49;00m[34mfor[39;49;00m[37m [39;49;00m(i[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00mi[37m [39;49;00m<[37m [39;49;00mRARRAY(ary)->len;[37m [39;49;00mi++)[37m [39;49;00m{[37m[39;49;00m$
  2074	[37m	[39;49;00m[34mif[39;49;00m[37m [39;49;00m(RTEST(rb_yield(RARRAY(ary)->ptr[i])))[37m [39;49;00m{[37m[39;49;00m$
  2075	[37m	    [39;49;00mrb_ary_push(result,[37m [39;49;00mrb_ary_elt(ary,[37m [39;49;00mi));[37m[39;49;00m$
  2076	[37m	[39;49;00m}[37m[39;49;00m$
  2077	[37m    [39;49;00m}[37m[39;49;00m$
  2078	[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mresult;[37m[39;49;00m$
  2079	}$
