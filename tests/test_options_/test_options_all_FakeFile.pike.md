     1^I[36m#[39;49;00m[36mpike __REAL_VERSION__[39;49;00m[36m[39;49;00m$
     2^I[37m[39;49;00m$
     3^I[37m//! A string wrapper that pretends to be a @[Stdio.File] object[39;49;00m$
     4^I[37m//! in addition to some features of a @[Stdio.FILE] object.[39;49;00m$
     5^I[37m[39;49;00m$
     6^I[37m[39;49;00m$
     7^I[37m//! This constant can be used to distinguish a FakeFile object[39;49;00m$
     8^I[37m//! from a real @[Stdio.File] object.[39;49;00m$
     9^I[34mconstant[39;49;00m[37m [39;49;00mis_fake_file[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    10^I[37m[39;49;00m$
    11^I[34mprotected[39;49;00m[37m [39;49;00m[36mstring[39;49;00m[37m [39;49;00mdata;[37m[39;49;00m$
    12^I[34mprotected[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mptr;[37m[39;49;00m$
    13^I[34mprotected[39;49;00m[37m [39;49;00m[36mint[39;49;00m([34m0.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mr;[37m[39;49;00m$
    14^I[34mprotected[39;49;00m[37m [39;49;00m[36mint[39;49;00m([34m0.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mw;[37m[39;49;00m$
    15^I[34mprotected[39;49;00m[37m [39;49;00m[36mint[39;49;00m[37m [39;49;00mmtime;[37m[39;49;00m$
    16^I[37m[39;49;00m$
    17^I[34mprotected[39;49;00m[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mread_cb;[37m[39;49;00m$
    18^I[34mprotected[39;49;00m[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mread_oob_cb;[37m[39;49;00m$
    19^I[34mprotected[39;49;00m[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mwrite_cb;[37m[39;49;00m$
    20^I[34mprotected[39;49;00m[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mwrite_oob_cb;[37m[39;49;00m$
    21^I[34mprotected[39;49;00m[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mclose_cb;[37m[39;49;00m$
    22^I[37m[39;49;00m$
    23^I[37m//! @seealso[39;49;00m$
    24^I[37m//!   @[Stdio.File()->close()][39;49;00m$
    25^I[36mint[39;49;00m[37m [39;49;00m[32mclose[39;49;00m([36mvoid[39;49;00m|[36mstring[39;49;00m[37m [39;49;00mdirection)[37m [39;49;00m{[37m[39;49;00m$
    26^I[37m  [39;49;00mdirection[37m [39;49;00m=[37m [39;49;00mlower_case(direction||[33m"[39;49;00m[33mrw[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    27^I[37m  [39;49;00m[36mint[39;49;00m[37m [39;49;00mcr[37m [39;49;00m=[37m [39;49;00mhas_value(direction,[37m [39;49;00m[33m"[39;49;00m[33mr[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    28^I[37m  [39;49;00m[36mint[39;49;00m[37m [39;49;00mcw[37m [39;49;00m=[37m [39;49;00mhas_value(direction,[37m [39;49;00m[33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    29^I[37m[39;49;00m$
    30^I[37m  [39;49;00m[34mif[39;49;00m(cr)[37m [39;49;00m{[37m[39;49;00m$
    31^I[37m    [39;49;00mr[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
    32^I[37m  [39;49;00m}[37m[39;49;00m$
    33^I[37m[39;49;00m$
    34^I[37m  [39;49;00m[34mif[39;49;00m(cw)[37m [39;49;00m{[37m[39;49;00m$
    35^I[37m    [39;49;00mw[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
    36^I[37m  [39;49;00m}[37m[39;49;00m$
    37^I[37m[39;49;00m$
    38^I[37m  [39;49;00m[37m// FIXME: Close callback[39;49;00m$
    39^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    40^I}[37m[39;49;00m$
    41^I[37m[39;49;00m$
    42^I[37m//! @decl void create(string data, void|string type, void|int pointer)[39;49;00m$
    43^I[37m//! @seealso[39;49;00m$
    44^I[37m//!   @[Stdio.File()->create()][39;49;00m$
    45^I[36mvoid[39;49;00m[37m [39;49;00m[32mcreate[39;49;00m([36mstring[39;49;00m[37m [39;49;00m_data,[37m [39;49;00m[36mvoid[39;49;00m|[36mstring[39;49;00m[37m [39;49;00mtype,[37m [39;49;00m[36mint[39;49;00m|[36mvoid[39;49;00m[37m [39;49;00m_ptr)[37m [39;49;00m{[37m[39;49;00m$
    46^I[37m  [39;49;00m[34mif[39;49;00m(!_data)[37m [39;49;00merror([33m"[39;49;00m[33mNo data string given to FakeFile.[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
    47^I[37m  [39;49;00mdata[37m [39;49;00m=[37m [39;49;00m_data;[37m[39;49;00m$
    48^I[37m  [39;49;00mptr[37m [39;49;00m=[37m [39;49;00m_ptr;[37m[39;49;00m$
    49^I[37m  [39;49;00mmtime[37m [39;49;00m=[37m [39;49;00mtime();[37m[39;49;00m$
    50^I[37m  [39;49;00m[34mif[39;49;00m(type)[37m [39;49;00m{[37m[39;49;00m$
    51^I[37m    [39;49;00mtype[37m [39;49;00m=[37m [39;49;00mlower_case(type);[37m[39;49;00m$
    52^I[37m    [39;49;00m[34mif[39;49;00m(has_value(type,[37m [39;49;00m[33m"[39;49;00m[33mr[39;49;00m[33m"[39;49;00m))[37m[39;49;00m$
    53^I[37m      [39;49;00mr[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    54^I[37m    [39;49;00m[34mif[39;49;00m(has_value(type,[37m [39;49;00m[33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m))[37m[39;49;00m$
    55^I[37m      [39;49;00mw[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    56^I[37m  [39;49;00m}[37m[39;49;00m$
    57^I[37m  [39;49;00m[34melse[39;49;00m[37m[39;49;00m$
    58^I[37m    [39;49;00mr[37m [39;49;00m=[37m [39;49;00mw[37m [39;49;00m=[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
    59^I}[37m[39;49;00m$
    60^I[37m[39;49;00m$
    61^I[34mprotected[39;49;00m[37m [39;49;00m[36mstring[39;49;00m[37m [39;49;00m[32mmake_type_str[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
    62^I[37m  [39;49;00m[36mstring[39;49;00m[37m [39;49;00mtype[37m [39;49;00m=[37m [39;49;00m[33m"[39;49;00m[33m"[39;49;00m;[37m[39;49;00m$
    63^I[37m  [39;49;00m[34mif[39;49;00m(r)[37m [39;49;00mtype[37m [39;49;00m+=[37m [39;49;00m[33m"[39;49;00m[33mr[39;49;00m[33m"[39;49;00m;[37m[39;49;00m$
    64^I[37m  [39;49;00m[34mif[39;49;00m(w)[37m [39;49;00mtype[37m [39;49;00m+=[37m [39;49;00m[33m"[39;49;00m[33mw[39;49;00m[33m"[39;49;00m;[37m[39;49;00m$
    65^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mtype;[37m[39;49;00m$
    66^I}[37m[39;49;00m$
    67^I[37m[39;49;00m$
    68^I[37m//! @seealso[39;49;00m$
    69^I[37m//!   @[Stdio.File()->dup()][39;49;00m$
    70^Ithis_program[37m [39;49;00m[32mdup[39;49;00m()[37m [39;49;00m{[37m[39;49;00m$
    71^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mthis_program(data,[37m [39;49;00mmake_type_str(),[37m [39;49;00mptr);[37m[39;49;00m$
    72^I}[37m[39;49;00m$
    73^I[37m[39;49;00m$
    74^I[37m//! Always returns 0.[39;49;00m$
    75^I[37m//! @seealso[39;49;00m$
    76^I[37m//!   @[Stdio.File()->errno()][39;49;00m$
    77^I[36mint[39;49;00m[37m [39;49;00m[32merrno[39;49;00m()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00m}[37m[39;49;00m$
    78^I[37m[39;49;00m$
    79^I[37m//! Returns size and the creation time of the string.[39;49;00m$
    80^IStdio.Stat[37m [39;49;00mstat()[37m [39;49;00m{[37m[39;49;00m$
    81^I[37m  [39;49;00mStdio.Stat[37m [39;49;00mst[37m [39;49;00m=[37m [39;49;00mStdio.Stat();[37m[39;49;00m$
    82^I[37m  [39;49;00mst->size[37m [39;49;00m=[37m [39;49;00m[34msizeof[39;49;00m(data);[37m[39;49;00m$
    83^I[37m  [39;49;00mst->mtime=st->ctime=mtime;[37m[39;49;00m$
    84^I[37m  [39;49;00mst->atime=time();[37m[39;49;00m$
    85^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mst;[37m[39;49;00m$
    86^I}[37m[39;49;00m$
    87^I[37m[39;49;00m$
    88^I[37m//! @seealso[39;49;00m$
    89^I[37m//!   @[Stdio.File()->line_iterator()][39;49;00m$
    90^IString.SplitIterator[37m [39;49;00mline_iterator([36mint[39;49;00m|[36mvoid[39;49;00m[37m [39;49;00mtrim)[37m [39;49;00m{[37m[39;49;00m$
    91^I[37m  [39;49;00m[34mif[39;49;00m(trim)[37m[39;49;00m$
    92^I[37m    [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mString.SplitIterator([37m [39;49;00mdata-[33m"[39;49;00m[33m\r[39;49;00m[33m"[39;49;00m,[37m [39;49;00m[33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m[37m [39;49;00m);[37m[39;49;00m$
    93^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mString.SplitIterator([37m [39;49;00mdata,[37m [39;49;00m[33m'[39;49;00m[33m\n[39;49;00m[33m'[39;49;00m[37m [39;49;00m);[37m[39;49;00m$
    94^I}[37m[39;49;00m$
    95^I[37m[39;49;00m$
    96^I[34mprotected[39;49;00m[37m [39;49;00m[36mmixed[39;49;00m[37m [39;49;00mid;[37m[39;49;00m$
    97^I[37m[39;49;00m$
    98^I[37m//! @seealso[39;49;00m$
    99^I[37m//!   @[Stdio.File()->query_id()][39;49;00m$
   100^I[36mmixed[39;49;00m[37m [39;49;00m[32mquery_id[39;49;00m()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mid;[37m [39;49;00m}[37m[39;49;00m$
   101^I[37m[39;49;00m$
   102^I[37m//! @seealso[39;49;00m$
   103^I[37m//!   @[Stdio.File()->set_id()][39;49;00m$
   104^I[36mvoid[39;49;00m[37m [39;49;00m[32mset_id[39;49;00m([36mmixed[39;49;00m[37m [39;49;00m_id)[37m [39;49;00m{[37m [39;49;00mid[37m [39;49;00m=[37m [39;49;00m_id;[37m [39;49;00m}[37m[39;49;00m$
   105^I[37m[39;49;00m$
   106^I[37m//! @seealso[39;49;00m$
   107^I[37m//!   @[Stdio.File()->read_function()][39;49;00m$
   108^I[36mfunction[39;49;00m(:[36mstring[39;49;00m)[37m [39;49;00mread_function([36mint[39;49;00m[37m [39;49;00mnbytes)[37m [39;49;00m{[37m[39;49;00m$
   109^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[36mlambda[39;49;00m()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mread(nbytes);[37m [39;49;00m};[37m[39;49;00m$
   110^I}[37m[39;49;00m$
   111^I[37m[39;49;00m$
   112^I[37m//! @seealso[39;49;00m$
   113^I[37m//!   @[Stdio.File()->peek()][39;49;00m$
   114^I[36mint[39;49;00m(-[34m1.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mpeek([36mint[39;49;00m|[36mfloat[39;49;00m|[36mvoid[39;49;00m[37m [39;49;00mtimeout)[37m [39;49;00m{[37m[39;49;00m$
   115^I[37m  [39;49;00m[34mif[39;49;00m(!r)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m-[34m1[39;49;00m;[37m[39;49;00m$
   116^I[37m  [39;49;00m[34mif[39;49;00m(ptr[37m [39;49;00m>=[37m [39;49;00m[34msizeof[39;49;00m(data))[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   117^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m1[39;49;00m;[37m[39;49;00m$
   118^I}[37m[39;49;00m$
   119^I[37m[39;49;00m$
   120^I[37m//! Always returns 0.[39;49;00m$
   121^I[37m//! @seealso[39;49;00m$
   122^I[37m//!   @[Stdio.File()->query_address()][39;49;00m$
   123^I[36mstring[39;49;00m[37m [39;49;00mquery_address([36mvoid[39;49;00m|[36mint[39;49;00m([34m0.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mis_local)[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m [39;49;00m}[37m[39;49;00m$
   124^I[37m[39;49;00m$
   125^I[37m//! @seealso[39;49;00m$
   126^I[37m//!   @[Stdio.File()->read()][39;49;00m$
   127^I[36mstring[39;49;00m[37m [39;49;00mread([36mvoid[39;49;00m|[36mint[39;49;00m([34m0.[39;49;00m.)[37m [39;49;00mlen,[37m [39;49;00m[36mvoid[39;49;00m|[36mint[39;49;00m([34m0.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mnot_all)[37m [39;49;00m{[37m[39;49;00m$
   128^I[37m  [39;49;00m[34mif[39;49;00m(!r)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   129^I[37m  [39;49;00m[34mif[39;49;00m[37m [39;49;00m(len[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m)[37m [39;49;00merror([33m"[39;49;00m[33mCannot read negative number of characters.[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m);[37m[39;49;00m$
   130^I[37m  [39;49;00m[36mint[39;49;00m[37m [39;49;00mstart=ptr;[37m[39;49;00m$
   131^I[37m  [39;49;00mptr[37m [39;49;00m+=[37m [39;49;00mlen;[37m[39;49;00m$
   132^I[37m  [39;49;00m[34mif[39;49;00m(zero_type(len)[37m [39;49;00m||[37m [39;49;00mptr>[34msizeof[39;49;00m(data))[37m[39;49;00m$
   133^I[37m    [39;49;00mptr[37m [39;49;00m=[37m [39;49;00m[34msizeof[39;49;00m(data);[37m[39;49;00m$
   134^I[37m[39;49;00m$
   135^I[37m  [39;49;00m[37m// FIXME: read callback[39;49;00m$
   136^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mdata[start..ptr-[34m1[39;49;00m];[37m[39;49;00m$
   137^I}[37m[39;49;00m$
   138^I[37m[39;49;00m$
   139^I[37m//! @seealso[39;49;00m$
   140^I[37m//!   @[Stdio.FILE()->gets()][39;49;00m$
   141^I[36mstring[39;49;00m[37m [39;49;00mgets()[37m [39;49;00m{[37m[39;49;00m$
   142^I[37m  [39;49;00m[34mif[39;49;00m(!r)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   143^I[37m  [39;49;00m[36mstring[39;49;00m[37m [39;49;00mret;[37m[39;49;00m$
   144^I[37m  [39;49;00m[34msscanf[39;49;00m(data,[33m"[39;49;00m[33m%*[39;49;00m[33m"[39;49;00m+([36mstring[39;49;00m)ptr+[33m"[39;49;00m[33ms%[^[39;49;00m[33m\n[39;49;00m[33m][39;49;00m[33m"[39;49;00m,ret);[37m[39;49;00m$
   145^I[37m  [39;49;00m[34mif[39;49;00m(ret)[37m[39;49;00m$
   146^I[37m  [39;49;00m{[37m[39;49;00m$
   147^I[37m    [39;49;00mptr+=[34msizeof[39;49;00m(ret)+[34m1[39;49;00m;[37m[39;49;00m$
   148^I[37m    [39;49;00m[34mif[39;49;00m(ptr>[34msizeof[39;49;00m(data))[37m[39;49;00m$
   149^I[37m    [39;49;00m{[37m[39;49;00m$
   150^I[37m      [39;49;00mptr=[34msizeof[39;49;00m(data);[37m[39;49;00m$
   151^I[37m      [39;49;00m[34mif[39;49;00m(![34msizeof[39;49;00m(ret))[37m[39;49;00m$
   152^I[37m^I[39;49;00mret[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   153^I[37m    [39;49;00m}[37m[39;49;00m$
   154^I[37m  [39;49;00m}[37m[39;49;00m$
   155^I[37m[39;49;00m$
   156^I[37m  [39;49;00m[37m// FIXME: read callback[39;49;00m$
   157^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mret;[37m[39;49;00m$
   158^I}[37m[39;49;00m$
   159^I[37m[39;49;00m$
   160^I[37m//! @seealso[39;49;00m$
   161^I[37m//!   @[Stdio.FILE()->getchar()][39;49;00m$
   162^I[36mint[39;49;00m[37m [39;49;00mgetchar()[37m [39;49;00m{[37m[39;49;00m$
   163^I[37m  [39;49;00m[34mif[39;49;00m(!r)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   164^I[37m  [39;49;00m[36mint[39;49;00m[37m [39;49;00mc;[37m[39;49;00m$
   165^I[37m  [39;49;00m[34mif[39;49;00m([34mcatch[39;49;00m(c=data[ptr]))[37m[39;49;00m$
   166^I[37m    [39;49;00mc=-[34m1[39;49;00m;[37m[39;49;00m$
   167^I[37m  [39;49;00m[34melse[39;49;00m[37m[39;49;00m$
   168^I[37m    [39;49;00mptr++;[37m[39;49;00m$
   169^I[37m[39;49;00m$
   170^I[37m  [39;49;00m[37m// FIXME: read callback[39;49;00m$
   171^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mc;[37m[39;49;00m$
   172^I}[37m[39;49;00m$
   173^I[37m[39;49;00m$
   174^I[37m//! @seealso[39;49;00m$
   175^I[37m//!   @[Stdio.FILE()->unread()][39;49;00m$
   176^I[36mvoid[39;49;00m[37m [39;49;00munread([36mstring[39;49;00m[37m [39;49;00ms)[37m [39;49;00m{[37m[39;49;00m$
   177^I[37m  [39;49;00m[34mif[39;49;00m(!r)[37m [39;49;00m[34mreturn[39;49;00m;[37m[39;49;00m$
   178^I[37m  [39;49;00m[34mif[39;49;00m(data[ptr-[34msizeof[39;49;00m(s)..ptr-[34m1[39;49;00m]==s)[37m[39;49;00m$
   179^I[37m    [39;49;00mptr-=[34msizeof[39;49;00m(s);[37m[39;49;00m$
   180^I[37m  [39;49;00m[34melse[39;49;00m[37m[39;49;00m$
   181^I[37m  [39;49;00m{[37m[39;49;00m$
   182^I[37m    [39;49;00mdata=s+data[ptr..];[37m[39;49;00m$
   183^I[37m    [39;49;00mptr=[34m0[39;49;00m;[37m[39;49;00m$
   184^I[37m  [39;49;00m}[37m[39;49;00m$
   185^I}[37m[39;49;00m$
   186^I[37m[39;49;00m$
   187^I[37m//! @seealso[39;49;00m$
   188^I[37m//!   @[Stdio.File()->seek()][39;49;00m$
   189^I[36mint[39;49;00m[37m [39;49;00mseek([36mint[39;49;00m[37m [39;49;00mpos,[37m [39;49;00m[36mvoid[39;49;00m|[36mint[39;49;00m[37m [39;49;00mmult,[37m [39;49;00m[36mvoid[39;49;00m|[36mint[39;49;00m[37m [39;49;00madd)[37m [39;49;00m{[37m[39;49;00m$
   190^I[37m  [39;49;00m[34mif[39;49;00m(mult)[37m[39;49;00m$
   191^I[37m    [39;49;00mpos[37m [39;49;00m=[37m [39;49;00mpos*mult+add;[37m[39;49;00m$
   192^I[37m  [39;49;00m[34mif[39;49;00m(pos<[34m0[39;49;00m)[37m[39;49;00m$
   193^I[37m  [39;49;00m{[37m[39;49;00m$
   194^I[37m    [39;49;00mpos[37m [39;49;00m=[37m [39;49;00m[34msizeof[39;49;00m(data)+pos;[37m[39;49;00m$
   195^I[37m    [39;49;00m[34mif[39;49;00m([37m [39;49;00mpos[37m [39;49;00m<[37m [39;49;00m[34m0[39;49;00m[37m [39;49;00m)[37m[39;49;00m$
   196^I[37m^I[39;49;00mpos[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   197^I[37m  [39;49;00m}[37m[39;49;00m$
   198^I[37m  [39;49;00mptr[37m [39;49;00m=[37m [39;49;00mpos;[37m[39;49;00m$
   199^I[37m  [39;49;00m[34mif[39;49;00m([37m [39;49;00mptr[37m [39;49;00m>[37m [39;49;00mstrlen([37m [39;49;00mdata[37m [39;49;00m)[37m [39;49;00m)[37m[39;49;00m$
   200^I[37m      [39;49;00mptr[37m [39;49;00m=[37m [39;49;00mstrlen(data);[37m[39;49;00m$
   201^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mptr;[37m[39;49;00m$
   202^I}[37m[39;49;00m$
   203^I[37m[39;49;00m$
   204^I[37m//! Always returns 1.[39;49;00m$
   205^I[37m//! @seealso[39;49;00m$
   206^I[37m//!   @[Stdio.File()->sync()][39;49;00m$
   207^I[36mint[39;49;00m([34m1.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00msync()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34m1[39;49;00m;[37m [39;49;00m}[37m[39;49;00m$
   208^I[37m[39;49;00m$
   209^I[37m//! @seealso[39;49;00m$
   210^I[37m//!   @[Stdio.File()->tell()][39;49;00m$
   211^I[36mint[39;49;00m[37m [39;49;00mtell()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mptr;[37m [39;49;00m}[37m[39;49;00m$
   212^I[37m[39;49;00m$
   213^I[37m//! @seealso[39;49;00m$
   214^I[37m//!   @[Stdio.File()->truncate()][39;49;00m$
   215^I[36mint[39;49;00m([34m0.[39;49;00m[34m.1[39;49;00m)[37m [39;49;00mtruncate([36mint[39;49;00m[37m [39;49;00mlength)[37m [39;49;00m{[37m[39;49;00m$
   216^I[37m  [39;49;00mdata[37m [39;49;00m=[37m [39;49;00mdata[..length-[34m1[39;49;00m];[37m[39;49;00m$
   217^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34msizeof[39;49;00m(data)==length;[37m[39;49;00m$
   218^I}[37m[39;49;00m$
   219^I[37m[39;49;00m$
   220^I[37m//! @seealso[39;49;00m$
   221^I[37m//!   @[Stdio.File()->write()][39;49;00m$
   222^I[36mint[39;49;00m(-[34m1.[39;49;00m.)[37m [39;49;00mwrite([36mstring[39;49;00m|[36marray[39;49;00m([36mstring[39;49;00m)[37m [39;49;00mstr,[37m [39;49;00m[36mmixed[39;49;00m[37m [39;49;00m...[37m [39;49;00mextra)[37m [39;49;00m{[37m[39;49;00m$
   223^I[37m  [39;49;00m[34mif[39;49;00m(!w)[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m-[34m1[39;49;00m;[37m[39;49;00m$
   224^I[37m  [39;49;00m[34mif[39;49;00m(arrayp(str))[37m [39;49;00mstr=str*[33m"[39;49;00m[33m"[39;49;00m;[37m[39;49;00m$
   225^I[37m  [39;49;00m[34mif[39;49;00m([34msizeof[39;49;00m(extra))[37m [39;49;00mstr=sprintf(str,[37m [39;49;00m@extra);[37m[39;49;00m$
   226^I[37m[39;49;00m$
   227^I[37m  [39;49;00m[34mif[39;49;00m(ptr==[34msizeof[39;49;00m(data))[37m [39;49;00m{[37m[39;49;00m$
   228^I[37m    [39;49;00mdata[37m [39;49;00m+=[37m [39;49;00mstr;[37m[39;49;00m$
   229^I[37m    [39;49;00mptr[37m [39;49;00m=[37m [39;49;00m[34msizeof[39;49;00m(data);[37m[39;49;00m$
   230^I[37m  [39;49;00m}[37m[39;49;00m$
   231^I[37m  [39;49;00m[34melse[39;49;00m[37m [39;49;00m[34mif[39;49;00m([34msizeof[39;49;00m(str)==[34m1[39;49;00m)[37m[39;49;00m$
   232^I[37m    [39;49;00mdata[ptr++][37m [39;49;00m=[37m [39;49;00mstr[[34m0[39;49;00m];[37m[39;49;00m$
   233^I[37m  [39;49;00m[34melse[39;49;00m[37m [39;49;00m{[37m[39;49;00m$
   234^I[37m    [39;49;00mdata[37m [39;49;00m=[37m [39;49;00mdata[..ptr-[34m1[39;49;00m][37m [39;49;00m+[37m [39;49;00mstr[37m [39;49;00m+[37m [39;49;00mdata[ptr+[34msizeof[39;49;00m(str)..];[37m[39;49;00m$
   235^I[37m    [39;49;00mptr[37m [39;49;00m+=[37m [39;49;00m[34msizeof[39;49;00m(str);[37m[39;49;00m$
   236^I[37m  [39;49;00m}[37m[39;49;00m$
   237^I[37m[39;49;00m$
   238^I[37m  [39;49;00m[37m// FIXME: write callback[39;49;00m$
   239^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34msizeof[39;49;00m(str);[37m[39;49;00m$
   240^I}[37m[39;49;00m$
   241^I[37m[39;49;00m$
   242^I[37m//! @seealso[39;49;00m$
   243^I[37m//!   @[Stdio.File()->set_blocking][39;49;00m$
   244^I[36mvoid[39;49;00m[37m [39;49;00mset_blocking()[37m [39;49;00m{[37m[39;49;00m$
   245^I[37m  [39;49;00mclose_cb[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   246^I[37m  [39;49;00mread_cb[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   247^I[37m  [39;49;00mread_oob_cb[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   248^I[37m  [39;49;00mwrite_cb[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   249^I[37m  [39;49;00mwrite_oob_cb[37m [39;49;00m=[37m [39;49;00m[34m0[39;49;00m;[37m[39;49;00m$
   250^I}[37m[39;49;00m$
   251^I[37m[39;49;00m$
   252^I[37m//! @seealso[39;49;00m$
   253^I[37m//!   @[Stdio.File()->set_blocking_keep_callbacks][39;49;00m$
   254^I[36mvoid[39;49;00m[37m [39;49;00mset_blocking_keep_callbacks()[37m [39;49;00m{[37m [39;49;00m}[37m[39;49;00m$
   255^I[37m[39;49;00m$
   256^I[37m//! @seealso[39;49;00m$
   257^I[37m//!   @[Stdio.File()->set_blocking][39;49;00m$
   258^I[36mvoid[39;49;00m[37m [39;49;00mset_nonblocking([36mfunction[39;49;00m[37m [39;49;00mrcb,[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mwcb,[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mccb,[37m[39;49;00m$
   259^I[37m^I^I     [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mrocb,[37m [39;49;00m[36mfunction[39;49;00m[37m [39;49;00mwocb)[37m [39;49;00m{[37m[39;49;00m$
   260^I[37m  [39;49;00mread_cb[37m [39;49;00m=[37m [39;49;00mrcb;[37m[39;49;00m$
   261^I[37m  [39;49;00mwrite_cb[37m [39;49;00m=[37m [39;49;00mwcb;[37m[39;49;00m$
   262^I[37m  [39;49;00mclose_cb[37m [39;49;00m=[37m [39;49;00mccb;[37m[39;49;00m$
   263^I[37m  [39;49;00mread_oob_cb[37m [39;49;00m=[37m [39;49;00mrocb;[37m[39;49;00m$
   264^I[37m  [39;49;00mwrite_oob_cb[37m [39;49;00m=[37m [39;49;00mwocb;[37m[39;49;00m$
   265^I}[37m[39;49;00m$
   266^I[37m[39;49;00m$
   267^I[37m//! @seealso[39;49;00m$
   268^I[37m//!   @[Stdio.File()->set_blocking_keep_callbacks][39;49;00m$
   269^I[36mvoid[39;49;00m[37m [39;49;00mset_nonblocking_keep_callbacks()[37m [39;49;00m{[37m [39;49;00m}[37m[39;49;00m$
   270^I[37m[39;49;00m$
   271^I[37m[39;49;00m$
   272^I[37m//! @seealso[39;49;00m$
   273^I[37m//!   @[Stdio.File()->set_close_callback][39;49;00m$
   274^I[36mvoid[39;49;00m[37m [39;49;00mset_close_callback([36mfunction[39;49;00m[37m [39;49;00mcb)[37m [39;49;00m{[37m [39;49;00mclose_cb[37m [39;49;00m=[37m [39;49;00mcb;[37m [39;49;00m}[37m[39;49;00m$
   275^I[37m[39;49;00m$
   276^I[37m//! @seealso[39;49;00m$
   277^I[37m//!   @[Stdio.File()->set_read_callback][39;49;00m$
   278^I[36mvoid[39;49;00m[37m [39;49;00mset_read_callback([36mfunction[39;49;00m[37m [39;49;00mcb)[37m [39;49;00m{[37m [39;49;00mread_cb[37m [39;49;00m=[37m [39;49;00mcb;[37m [39;49;00m}[37m[39;49;00m$
   279^I[37m[39;49;00m$
   280^I[37m//! @seealso[39;49;00m$
   281^I[37m//!   @[Stdio.File()->set_read_oob_callback][39;49;00m$
   282^I[36mvoid[39;49;00m[37m [39;49;00mset_read_oob_callback([36mfunction[39;49;00m[37m [39;49;00mcb)[37m [39;49;00m{[37m [39;49;00mread_oob_cb[37m [39;49;00m=[37m [39;49;00mcb;[37m [39;49;00m}[37m[39;49;00m$
   283^I[37m[39;49;00m$
   284^I[37m//! @seealso[39;49;00m$
   285^I[37m//!   @[Stdio.File()->set_write_callback][39;49;00m$
   286^I[36mvoid[39;49;00m[37m [39;49;00mset_write_callback([36mfunction[39;49;00m[37m [39;49;00mcb)[37m [39;49;00m{[37m [39;49;00mwrite_cb[37m [39;49;00m=[37m [39;49;00mcb;[37m [39;49;00m}[37m[39;49;00m$
   287^I[37m[39;49;00m$
   288^I[37m//! @seealso[39;49;00m$
   289^I[37m//!   @[Stdio.File()->set_write_oob_callback][39;49;00m$
   290^I[36mvoid[39;49;00m[37m [39;49;00mset_write_oob_callback([36mfunction[39;49;00m[37m [39;49;00mcb)[37m [39;49;00m{[37m [39;49;00mwrite_oob_cb[37m [39;49;00m=[37m [39;49;00mcb;[37m [39;49;00m}[37m[39;49;00m$
   291^I[37m[39;49;00m$
   292^I[37m[39;49;00m$
   293^I[37m//! @seealso[39;49;00m$
   294^I[37m//!   @[Stdio.File()->query_close_callback][39;49;00m$
   295^I[36mfunction[39;49;00m[37m [39;49;00mquery_close_callback()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mclose_cb;[37m [39;49;00m}[37m[39;49;00m$
   296^I[37m[39;49;00m$
   297^I[37m//! @seealso[39;49;00m$
   298^I[37m//!   @[Stdio.File()->query_read_callback][39;49;00m$
   299^I[36mfunction[39;49;00m[37m [39;49;00mquery_read_callback()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mread_cb;[37m [39;49;00m}[37m[39;49;00m$
   300^I[37m[39;49;00m$
   301^I[37m//! @seealso[39;49;00m$
   302^I[37m//!   @[Stdio.File()->query_read_oob_callback][39;49;00m$
   303^I[36mfunction[39;49;00m[37m [39;49;00mquery_read_oob_callback()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mread_oob_cb;[37m [39;49;00m}[37m[39;49;00m$
   304^I[37m[39;49;00m$
   305^I[37m//! @seealso[39;49;00m$
   306^I[37m//!   @[Stdio.File()->query_write_callback][39;49;00m$
   307^I[36mfunction[39;49;00m[37m [39;49;00mquery_write_callback()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mwrite_cb;[37m [39;49;00m}[37m[39;49;00m$
   308^I[37m[39;49;00m$
   309^I[37m//! @seealso[39;49;00m$
   310^I[37m//!   @[Stdio.File()->query_write_oob_callback][39;49;00m$
   311^I[36mfunction[39;49;00m[37m [39;49;00mquery_write_oob_callback()[37m [39;49;00m{[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mwrite_oob_cb;[37m [39;49;00m}[37m[39;49;00m$
   312^I[37m[39;49;00m$
   313^I[36mstring[39;49;00m[37m [39;49;00m_sprintf([36mint[39;49;00m[37m [39;49;00mt)[37m [39;49;00m{[37m[39;49;00m$
   314^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mt==[33m'[39;49;00m[33mO[39;49;00m[33m'[39;49;00m[37m [39;49;00m&&[37m [39;49;00msprintf([33m"[39;49;00m[33m%O(%d,%O)[39;49;00m[33m"[39;49;00m,[37m [39;49;00mthis_program,[37m [39;49;00m[34msizeof[39;49;00m(data),[37m[39;49;00m$
   315^I[37m^I^I^I   [39;49;00mmake_type_str());[37m[39;49;00m$
   316^I}[37m[39;49;00m$
   317^I[37m[39;49;00m$
   318^I[37m[39;49;00m$
   319^I[37m// FakeFile specials.[39;49;00m$
   320^I[37m[39;49;00m$
   321^I[37m//! A FakeFile can be casted to a string.[39;49;00m$
   322^I[36mmixed[39;49;00m[37m [39;49;00mcast([36mstring[39;49;00m[37m [39;49;00mto)[37m [39;49;00m{[37m[39;49;00m$
   323^I[37m  [39;49;00m[34mswitch[39;49;00m(to)[37m [39;49;00m{[37m[39;49;00m$
   324^I[37m  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mstring[39;49;00m[33m"[39;49;00m:[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00mdata;[37m[39;49;00m$
   325^I[37m  [39;49;00m[34mcase[39;49;00m[37m [39;49;00m[33m"[39;49;00m[33mobject[39;49;00m[33m"[39;49;00m:[37m [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34mthis[39;49;00m;[37m[39;49;00m$
   326^I[37m  [39;49;00m}[37m[39;49;00m$
   327^I[37m  [39;49;00merror([33m"[39;49;00m[33mCan not cast object to %O.[39;49;00m[33m\n[39;49;00m[33m"[39;49;00m,[37m [39;49;00mto);[37m[39;49;00m$
   328^I}[37m[39;49;00m$
   329^I[37m[39;49;00m$
   330^I[37m//! Sizeof on a FakeFile returns the size of its contents.[39;49;00m$
   331^I[36mint[39;49;00m([34m0.[39;49;00m.)[37m [39;49;00m_sizeof()[37m [39;49;00m{[37m[39;49;00m$
   332^I[37m  [39;49;00m[34mreturn[39;49;00m[37m [39;49;00m[34msizeof[39;49;00m(data);[37m[39;49;00m$
   333^I}[37m[39;49;00m$
   334^I[37m[39;49;00m$
   335^I[37m//! @ignore[39;49;00m$
   336^I[37m[39;49;00m$
   337^I[36m#[39;49;00m[36mdefine NOPE(X) mixed X (mixed ... args) { error("This is a FakeFile. %s is not available.\n", #X); }[39;49;00m[36m[39;49;00m$
   338^INOPE(assign);[37m[39;49;00m$
   339^INOPE(async_connect);[37m[39;49;00m$
   340^INOPE(connect);[37m[39;49;00m$
   341^INOPE(connect_unix);[37m[39;49;00m$
   342^INOPE(open);[37m[39;49;00m$
   343^INOPE(open_socket);[37m[39;49;00m$
   344^INOPE(pipe);[37m[39;49;00m$
   345^INOPE(tcgetattr);[37m[39;49;00m$
   346^INOPE(tcsetattr);[37m[39;49;00m$
   347^I[37m[39;49;00m$
   348^I[37m// Stdio.Fd[39;49;00m$
   349^INOPE(dup2);[37m[39;49;00m$
   350^INOPE(lock);[37m [39;49;00m[37m// We could implement this[39;49;00m$
   351^INOPE(mode);[37m [39;49;00m[37m// We could implement this[39;49;00m$
   352^INOPE(proxy);[37m [39;49;00m[37m// We could implement this[39;49;00m$
   353^INOPE(query_fd);[37m[39;49;00m$
   354^INOPE(read_oob);[37m[39;49;00m$
   355^INOPE(set_close_on_exec);[37m[39;49;00m$
   356^INOPE(set_keepalive);[37m[39;49;00m$
   357^INOPE(trylock);[37m [39;49;00m[37m// We could implement this[39;49;00m$
   358^INOPE(write_oob);[37m[39;49;00m$
   359^I[37m[39;49;00m$
   360^I//![37m [39;49;00m@endignore$
